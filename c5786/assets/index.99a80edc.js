(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function ee(){}const xt=l=>l;function Ut(l){return l()}function ot(){return Object.create(null)}function we(l){l.forEach(Ut)}function Te(l){return typeof l=="function"}function fe(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function el(l){return Object.keys(l).length===0}function tl(l,...e){if(l==null)return ee;const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ve(l,e,t){l.$$.on_destroy.push(tl(e,t))}function xe(l){return l&&Te(l.destroy)?l.destroy:ee}const qt=typeof window<"u";let ll=qt?()=>window.performance.now():()=>Date.now(),lt=qt?l=>requestAnimationFrame(l):ee;const De=new Set;function Xt(l){De.forEach(e=>{e.c(l)||(De.delete(e),e.f())}),De.size!==0&&lt(Xt)}function nl(l){let e;return De.size===0&&lt(Xt),{promise:new Promise(t=>{De.add(e={c:l,f:t})}),abort(){De.delete(e)}}}function h(l,e){l.appendChild(e)}function il(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function sl(l,e){return h(l.head||l,e),e.sheet}function j(l,e,t){l.insertBefore(e,t||null)}function E(l){l.parentNode.removeChild(l)}function rl(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function y(l){return document.createElement(l)}function F(l){return document.createTextNode(l)}function I(){return F(" ")}function Ue(){return F("")}function le(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function A(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function ol(l){return Array.from(l.childNodes)}function Q(l,e){e=""+e,l.wholeText!==e&&(l.data=e)}function at(l,e){l.value=e==null?"":e}function B(l,e,t,n){t===null?l.style.removeProperty(e):l.style.setProperty(e,t,n?"important":"")}function G(l,e,t){l.classList[t?"add":"remove"](e)}function al(l,e,{bubbles:t=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(l,t,n,e),i}const Re=new Map;let Ge=0;function fl(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function ul(l){const e={style_element:y("style"),rules:{}};return Re.set(l,e),e}function ft(l,e,t,n,i,s,r,o=0){const f=16.666/n;let a=`{
`;for(let w=0;w<=1;w+=f){const m=e+(t-e)*s(w);a+=w*100+`%{${r(m,1-m)}}
`}const d=a+`100% {${r(t,1-t)}}
}`,v=`__svelte_${fl(d)}_${o}`,c=il(l),{style_element:p,rules:_}=Re.get(c)||ul(c);if(!_[v]){const w=sl(c,p);_[v]=!0,w.insertRule(`@keyframes ${v} ${d}`,w.cssRules.length)}const g=l.style.animation||"";return l.style.animation=`${g?`${g}, `:""}${v} ${n}ms linear ${i}ms 1 both`,Ge+=1,v}function cl(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=t.length-n.length;i&&(l.style.animation=n.join(", "),Ge-=i,Ge||dl())}function dl(){lt(()=>{Ge||(Re.forEach(l=>{const{style_element:e}=l;E(e)}),Re.clear())})}let He;function Ie(l){He=l}function _l(){if(!He)throw new Error("Function called outside component initialization");return He}function Jt(l){_l().$$.on_destroy.push(l)}const je=[],be=[],Fe=[],Ve=[],gl=Promise.resolve();let et=!1;function ml(){et||(et=!0,gl.then(Kt))}function pe(l){Fe.push(l)}function nt(l){Ve.push(l)}const Je=new Set;let ze=0;function Kt(){const l=He;do{for(;ze<je.length;){const e=je[ze];ze++,Ie(e),pl(e.$$)}for(Ie(null),je.length=0,ze=0;be.length;)be.pop()();for(let e=0;e<Fe.length;e+=1){const t=Fe[e];Je.has(t)||(Je.add(t),t())}Fe.length=0}while(je.length);for(;Ve.length;)Ve.pop()();et=!1,Je.clear(),Ie(l)}function pl(l){if(l.fragment!==null){l.update(),we(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(pe)}}let Ce;function hl(){return Ce||(Ce=Promise.resolve(),Ce.then(()=>{Ce=null})),Ce}function Ke(l,e,t){l.dispatchEvent(al(`${e?"intro":"outro"}${t}`))}const Ye=new Set;let he;function ne(){he={r:0,c:[],p:he}}function ie(){he.r||we(he.c),he=he.p}function O(l,e){l&&l.i&&(Ye.delete(l),l.i(e))}function C(l,e,t,n){if(l&&l.o){if(Ye.has(l))return;Ye.add(l),he.c.push(()=>{Ye.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const vl={duration:0};function de(l,e,t,n){let i=e(l,t),s=n?0:1,r=null,o=null,f=null;function a(){f&&cl(l,f)}function d(c,p){const _=c.b-s;return p*=Math.abs(_),{a:s,b:c.b,d:_,duration:p,start:c.start,end:c.start+p,group:c.group}}function v(c){const{delay:p=0,duration:_=300,easing:g=xt,tick:w=ee,css:m}=i||vl,u={start:ll()+p,b:c};c||(u.group=he,he.r+=1),r||o?o=u:(m&&(a(),f=ft(l,s,c,_,p,g,m)),c&&w(0,1),r=d(u,_),pe(()=>Ke(l,c,"start")),nl(b=>{if(o&&b>o.start&&(r=d(o,_),o=null,Ke(l,r.b,"start"),m&&(a(),f=ft(l,s,r.b,r.duration,0,g,i.css))),r){if(b>=r.end)w(s=r.b,1-s),Ke(l,r.b,"end"),o||(r.b?a():--r.group.r||we(r.group.c)),r=null;else if(b>=r.start){const L=b-r.start;s=r.a+r.d*g(L/r.duration),w(s,1-s)}}return!!(r||o)}))}return{run(c){Te(i)?hl().then(()=>{i=i(),v(c)}):v(c)},end(){a(),r=o=null}}}const bl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Zt(l,e){l.d(1),e.delete(l.key)}function Ne(l,e){C(l,1,1,()=>{e.delete(l.key)})}function Me(l,e,t,n,i,s,r,o,f,a,d,v){let c=l.length,p=s.length,_=c;const g={};for(;_--;)g[l[_].key]=_;const w=[],m=new Map,u=new Map;for(_=p;_--;){const S=v(i,s,_),k=t(S);let M=r.get(k);M?n&&M.p(S,e):(M=a(k,S),M.c()),m.set(k,w[_]=M),k in g&&u.set(k,Math.abs(_-g[k]))}const b=new Set,L=new Set;function T(S){O(S,1),S.m(o,d),r.set(S.key,S),d=S.first,p--}for(;c&&p;){const S=w[p-1],k=l[c-1],M=S.key,D=k.key;S===k?(d=S.first,c--,p--):m.has(D)?!r.has(M)||b.has(M)?T(S):L.has(D)?c--:u.get(M)>u.get(D)?(L.add(M),T(S)):(b.add(D),c--):(f(k,r),c--)}for(;c--;){const S=l[c];m.has(S.key)||f(S,r)}for(;p;)T(w[p-1]);return w}function it(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function oe(l){l&&l.c()}function se(l,e,t,n){const{fragment:i,on_mount:s,on_destroy:r,after_update:o}=l.$$;i&&i.m(e,t),n||pe(()=>{const f=s.map(Ut).filter(Te);r?r.push(...f):we(f),l.$$.on_mount=[]}),o.forEach(pe)}function re(l,e){const t=l.$$;t.fragment!==null&&(we(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function wl(l,e){l.$$.dirty[0]===-1&&(je.push(l),ml(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function _e(l,e,t,n,i,s,r,o=[-1]){const f=He;Ie(l);const a=l.$$={fragment:null,ctx:null,props:s,update:ee,not_equal:i,bound:ot(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:ot(),dirty:o,skip_bound:!1,root:e.target||f.$$.root};r&&r(a.root);let d=!1;if(a.ctx=t?t(l,e.props||{},(v,c,...p)=>{const _=p.length?p[0]:c;return a.ctx&&i(a.ctx[v],a.ctx[v]=_)&&(!a.skip_bound&&a.bound[v]&&a.bound[v](_),d&&wl(l,v)),c}):[],a.update(),d=!0,we(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const v=ol(e.target);a.fragment&&a.fragment.l(v),v.forEach(E)}else a.fragment&&a.fragment.c();e.intro&&O(l.$$.fragment),se(l,e.target,e.anchor,e.customElement),Kt()}Ie(f)}class ge{$destroy(){re(this,1),this.$destroy=ee}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!el(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function kl(l){const e=l-1;return e*e*e+1}function ye(l,{delay:e=0,duration:t=400,easing:n=xt}={}){const i=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:s=>`opacity: ${s*i}`}}function We(l,{delay:e=0,duration:t=400,easing:n=kl}={}){const i=getComputedStyle(l),s=+i.opacity,r=parseFloat(i.height),o=parseFloat(i.paddingTop),f=parseFloat(i.paddingBottom),a=parseFloat(i.marginTop),d=parseFloat(i.marginBottom),v=parseFloat(i.borderTopWidth),c=parseFloat(i.borderBottomWidth);return{delay:e,duration:t,easing:n,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*s};height: ${p*r}px;padding-top: ${p*o}px;padding-bottom: ${p*f}px;margin-top: ${p*a}px;margin-bottom: ${p*d}px;border-top-width: ${p*v}px;border-bottom-width: ${p*c}px;`}}const Ae=[];function qe(l,e=ee){let t;const n=new Set;function i(o){if(fe(l,o)&&(l=o,t)){const f=!Ae.length;for(const a of n)a[1](),Ae.push(a,l);if(f){for(let a=0;a<Ae.length;a+=2)Ae[a][0](Ae[a+1]);Ae.length=0}}}function s(o){i(o(l))}function r(o,f=ee){const a=[o,f];return n.add(a),n.size===1&&(t=e(i)||ee),o(l),()=>{n.delete(a),n.size===0&&(t(),t=null)}}return{set:i,update:s,subscribe:r}}const Xe=qe(null),yl=l=>{Xe.set(l),g_Api.setHeader("x-username",l.username)},st=(l,e)=>{const{subscribe:t,set:n,update:i}=qe(l);return[{subscribe:t},s=>{n(s),e&&e(s)}]},tt={},[Qt,Ll]=st(tt),Vt=l=>{l.length&&(l.map(e=>tt[e.id]=e),Ll(tt))},Tl=l=>Vt([l]),[Ml,Sl]=st(null),[Al,Dl]=st(null,l=>{Sl(l?l.id|0:null)});function ut(l){let e,t,n;return{c(){e=y("div"),e.textContent="Operators",A(e,"class","item cursor_ptr svelte-vbcb9r"),G(e,"active",l[0]==="operators"),G(e,"disabled",l[1].has("operators"))},m(i,s){j(i,e,s),t||(n=le(e,"click",l[3]("operators")),t=!0)},p(i,s){s&1&&G(e,"active",i[0]==="operators"),s&2&&G(e,"disabled",i[1].has("operators"))},d(i){i&&E(e),t=!1,n()}}}function ct(l){let e,t=l[2].username+"",n,i,s;return{c(){e=y("div"),n=F(t),A(e,"class","item cursor_ptr notHover nowrap textOverEllipsis svelte-vbcb9r"),B(e,"max-width","200px")},m(r,o){j(r,e,o),h(e,n),s=!0},p(r,o){(!s||o&4)&&t!==(t=r[2].username+"")&&Q(n,t)},i(r){s||(pe(()=>{i||(i=de(e,ye,{},!0)),i.run(1)}),s=!0)},o(r){i||(i=de(e,ye,{},!1)),i.run(0),s=!1},d(r){r&&E(e),r&&i&&i.end()}}}function Ol(l){let e,t,n,i,s,r,o=!l[2]&&ut(l),f=l[2]&&0,a=l[2]&&ct(l);return{c(){e=y("div"),o&&o.c(),t=I(),f&&f.c(),n=I(),i=y("div"),s=I(),a&&a.c(),A(i,"class","flex flex_grow_1"),A(e,"class","flex flex_cy w100 list unselect svelte-vbcb9r")},m(d,v){j(d,e,v),o&&o.m(e,null),h(e,t),f&&f.m(e,null),h(e,n),h(e,i),h(e,s),a&&a.m(e,null),r=!0},p(d,[v]){d[2]?o&&(o.d(1),o=null):o?o.p(d,v):(o=ut(d),o.c(),o.m(e,t)),d[2],f&&(f.d(1),f=null),d[2]?a?(a.p(d,v),v&4&&O(a,1)):(a=ct(d),a.c(),O(a,1),a.m(e,null)):a&&(ne(),C(a,1,1,()=>{a=null}),ie())},i(d){r||(O(a),r=!0)},o(d){C(a),r=!1},d(d){d&&E(e),o&&o.d(),f&&f.d(),a&&a.d()}}}function $l(l,e,t){let n;ve(l,Xe,o=>t(2,n=o));let{select:i=""}=e,{disabled:s=new Set}=e;s.add("newLeads"),s.add("myLeads");const r=o=>f=>{s.has(o)||t(0,i=o)};return l.$$set=o=>{"select"in o&&t(0,i=o.select),"disabled"in o&&t(1,s=o.disabled)},[i,s,n,r]}class El extends ge{constructor(e){super(),_e(this,e,$l,Ol,fe,{select:0,disabled:1})}}function Cl(l){let e;return{c(){e=y("div"),e.innerHTML=`<div class="svelte-j15bjw"></div> 
	<div class="svelte-j15bjw"></div> 
	<div class="svelte-j15bjw"></div>`,A(e,"class","lds-roller svelte-j15bjw")},m(t,n){j(t,e,n)},p:ee,i:ee,o:ee,d(t){t&&E(e)}}}class Oe extends ge{constructor(e){super(),_e(this,e,null,Cl,fe,{})}}function dt(l,e,t){const n=l.slice();return n[5]=e[t],n}function jl(l){let e,t,n=l[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=gt(dt(l,n,r));const s=r=>C(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Ue()},m(r,o){for(let f=0;f<i.length;f+=1)i[f].m(r,o);j(r,e,o),t=!0},p(r,o){if(o&5){n=r[0];let f;for(f=0;f<n.length;f+=1){const a=dt(r,n,f);i[f]?(i[f].p(a,o),O(i[f],1)):(i[f]=gt(a),i[f].c(),O(i[f],1),i[f].m(e.parentNode,e))}for(ne(),f=n.length;f<i.length;f+=1)s(f);ie()}},i(r){if(!t){for(let o=0;o<n.length;o+=1)O(i[o]);t=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)C(i[o]);t=!1},d(r){rl(i,r),r&&E(e)}}}function Il(l){let e,t,n,i,s;return i=new Oe({}),{c(){e=y("div"),t=y("div"),n=I(),oe(i.$$.fragment),B(t,"height","20px"),A(e,"class","flex flex_clm flex_grow_1 flex_cy")},m(r,o){j(r,e,o),h(e,t),h(e,n),se(i,e,null),s=!0},p:ee,i(r){s||(O(i.$$.fragment,r),s=!0)},o(r){C(i.$$.fragment,r),s=!1},d(r){r&&E(e),re(i)}}}function _t(l){let e,t,n=l[5].username+"",i;return{c(){e=y("div"),t=F("@"),i=F(n),A(e,"class","nowrap textOverEllipsis")},m(s,r){j(s,e,r),h(e,t),h(e,i)},p(s,r){r&1&&n!==(n=s[5].username+"")&&Q(i,n)},d(s){s&&E(e)}}}function gt(l){var b,L;let e,t,n,i=((b=l[5].first_name)!=null?b:"")+"",s,r,o,f,a,d=((L=l[5].last_name)!=null?L:"")+"",v,c,p,_,g,w,m,u=l[5].username&&_t(l);return{c(){e=y("div"),t=y("div"),n=y("div"),s=F(i),r=I(),o=y("div"),f=I(),a=y("div"),v=F(d),c=I(),u&&u.c(),p=I(),B(o,"width","8px"),A(t,"class","flex nowrap textOverEllipsis"),A(e,"class","flex flex_clm cursor_ptr item unselect svelte-1n771m2")},m(T,S){j(T,e,S),h(e,t),h(t,n),h(n,s),h(t,r),h(t,o),h(t,f),h(t,a),h(a,v),h(e,c),u&&u.m(e,null),h(e,p),g=!0,w||(m=le(e,"click",function(){Te(l[2](l[5]))&&l[2](l[5]).apply(this,arguments)}),w=!0)},p(T,S){var k,M;l=T,(!g||S&1)&&i!==(i=((k=l[5].first_name)!=null?k:"")+"")&&Q(s,i),(!g||S&1)&&d!==(d=((M=l[5].last_name)!=null?M:"")+"")&&Q(v,d),l[5].username?u?u.p(l,S):(u=_t(l),u.c(),u.m(e,p)):u&&(u.d(1),u=null)},i(T){g||(T&&pe(()=>{_||(_=de(e,ye,{},!0)),_.run(1)}),g=!0)},o(T){T&&(_||(_=de(e,ye,{},!1)),_.run(0)),g=!1},d(T){T&&E(e),u&&u.d(),T&&_&&_.end(),w=!1,m()}}}function Hl(l){let e,t,n,i;const s=[Il,jl],r=[];function o(f,a){return f[1]?0:1}return t=o(l),n=r[t]=s[t](l),{c(){e=y("div"),n.c(),A(e,"class","flex list flex_grow_1 svelte-1n771m2")},m(f,a){j(f,e,a),r[t].m(e,null),i=!0},p(f,[a]){let d=t;t=o(f),t===d?r[t].p(f,a):(ne(),C(r[d],1,1,()=>{r[d]=null}),ie(),n=r[t],n?n.p(f,a):(n=r[t]=s[t](f),n.c()),O(n,1),n.m(e,null))},i(f){i||(O(n),i=!0)},o(f){C(n),i=!1},d(f){f&&E(e),r[t].d()}}}function Nl(l,e,t){let n=[],i=!1;const s=async()=>{t(1,i=!0);const f=await g_Api("GET","operators");t(0,n=f.results),t(1,i=!1)};let r=!1;const o=f=>a=>{r||(yl(f),r=!0)};return s(),[n,i,o]}class Pl extends ge{constructor(e){super(),_e(this,e,Nl,Hl,fe,{})}}const zl=l=>new Promise(e=>setTimeout(e,l)),Ze=(l,e,t)=>Math.min(t,Math.max(l,e)),Bl=(l={})=>(Object.assign(l,{promise:new Promise((e,t)=>Object.assign(l,{resolve:e,reject:t}))}),l),Fl=l=>{const e=Bl();return setTimeout(e.resolve,l),e},rt=(l,e)=>{let t=null,n=null,i=!0;const s=()=>{i&&setTimeout(s,10);const o=l.parentNode;if(o){const f=o.getBoundingClientRect();(t!==f.width||n!==f.height)&&(t=f.width,n=f.height,l.style.width=`${t}px`,l.style.height=`${n}px`,e&&e.set(f))}};return s(),{destroy:()=>i=!1}},Yl=(l,e)=>{let t=null,n=null,i=null,s=null,r=!0;const o=()=>{r&&setTimeout(o,10);const a=l.getBoundingClientRect();(t!==a.width||n!==a.height||i!==a.x||s!==a.y)&&(t=a.width,n=a.height,i=a.x,s=a.y,e&&e.set(a))};return o(),{destroy:()=>r=!1}};const{Map:Rl}=bl;function mt(l,e,t){const n=l.slice();return n[15]=e[t],n}function pt(l){let e,t,n;return{c(){e=F("("),t=F(l[4]),n=F(")")},m(i,s){j(i,e,s),j(i,t,s),j(i,n,s)},p(i,s){s&16&&Q(t,i[4])},d(i){i&&E(e),i&&E(t),i&&E(n)}}}function ht(l){let e,t,n,i;return t=new Oe({}),{c(){e=y("div"),oe(t.$$.fragment),A(e,"class","pos_abs loading svelte-7z10cv")},m(s,r){j(s,e,r),se(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&pe(()=>{n||(n=de(e,ye,{},!0)),n.run(1)}),i=!0)},o(s){C(t.$$.fragment,s),s&&(n||(n=de(e,ye,{},!1)),n.run(0)),i=!1},d(s){s&&E(e),re(t),s&&n&&n.end()}}}function vt(l){let e,t,n=l[15].username+"",i;return{c(){e=y("div"),t=F("@"),i=F(n),A(e,"class","nowrap textOverEllipsis username svelte-7z10cv")},m(s,r){j(s,e,r),h(e,t),h(e,i)},p(s,r){r&8&&n!==(n=s[15].username+"")&&Q(i,n)},d(s){s&&E(e)}}}function bt(l){let e,t,n;return t=new Oe({}),{c(){e=y("div"),oe(t.$$.fragment),A(e,"class","pos_abs loadingLead svelte-7z10cv")},m(i,s){j(i,e,s),se(t,e,null),n=!0},i(i){n||(O(t.$$.fragment,i),n=!0)},o(i){C(t.$$.fragment,i),n=!1},d(i){i&&E(e),re(t)}}}function wt(l,e){var S,k;let t,n,i,s=((S=e[15].first_name)!=null?S:"")+"",r,o,f,a,d,v=((k=e[15].last_name)!=null?k:"")+"",c,p,_,g=e[2].has(e[15].tg_id)||e[1].has(e[15].tg_id),w,m,u,b,L=e[15].username&&vt(e),T=g&&bt();return{key:l,first:null,c(){t=y("div"),n=y("div"),i=y("div"),r=F(s),o=I(),f=y("div"),a=I(),d=y("div"),c=F(v),p=I(),L&&L.c(),_=I(),T&&T.c(),w=I(),B(f,"width","8px"),A(n,"class","flex nowrap textOverEllipsis userAttr svelte-7z10cv"),A(t,"class","flex flex_clm cursor_ptr item unselect pos_abs svelte-7z10cv"),B(t,"left",e[15].x+"px"),B(t,"top",e[15].y+"px"),G(t,"disabled",e[1].has(e[15].tg_id)),this.first=t},m(M,D){j(M,t,D),h(t,n),h(n,i),h(i,r),h(n,o),h(n,f),h(n,a),h(n,d),h(d,c),h(t,p),L&&L.m(t,null),h(t,_),T&&T.m(t,null),h(t,w),m=!0,u||(b=le(t,"click",function(){Te(e[6](e[15].tg_id))&&e[6](e[15].tg_id).apply(this,arguments)}),u=!0)},p(M,D){var H,W;e=M,(!m||D&8)&&s!==(s=((H=e[15].first_name)!=null?H:"")+"")&&Q(r,s),(!m||D&8)&&v!==(v=((W=e[15].last_name)!=null?W:"")+"")&&Q(c,v),e[15].username?L?L.p(e,D):(L=vt(e),L.c(),L.m(t,_)):L&&(L.d(1),L=null),D&14&&(g=e[2].has(e[15].tg_id)||e[1].has(e[15].tg_id)),g?T?D&14&&O(T,1):(T=bt(),T.c(),O(T,1),T.m(t,w)):T&&(ne(),C(T,1,1,()=>{T=null}),ie()),(!m||D&8)&&B(t,"left",e[15].x+"px"),(!m||D&8)&&B(t,"top",e[15].y+"px"),(!m||D&10)&&G(t,"disabled",e[1].has(e[15].tg_id))},i(M){m||(O(T),m=!0)},o(M){C(T),m=!1},d(M){M&&E(t),L&&L.d(),T&&T.d(),u=!1,b()}}}function Gl(l){let e,t,n,i,s,r,o,f,a=[],d=new Rl,v,c,p,_=l[4]!==null&&pt(l),g=l[5]&&ht(),w=l[3];const m=u=>u[15].tg_id;for(let u=0;u<w.length;u+=1){let b=mt(l,w,u),L=m(b);d.set(L,a[u]=wt(L,b))}return{c(){e=y("div"),t=y("div"),n=F(`New leads\r
		\r
		`),_&&_.c(),i=I(),g&&g.c(),s=I(),r=y("div"),o=y("div"),f=y("div");for(let u=0;u<a.length;u+=1)a[u].c();A(t,"class","flex flex_cx flex_cy header pos_rel svelte-7z10cv"),A(f,"class","flex list h100 svelte-7z10cv"),A(o,"class","pos_abs"),B(o,"overflow","hidden"),A(r,"class","flex cnt h100 pos_rel svelte-7z10cv"),A(e,"class","flex flex_clm wrapMain svelte-7z10cv")},m(u,b){j(u,e,b),h(e,t),h(t,n),_&&_.m(t,null),h(t,i),g&&g.m(t,null),h(e,s),h(e,r),h(r,o),h(o,f);for(let L=0;L<a.length;L+=1)a[L].m(f,null);l[8](o),v=!0,c||(p=xe(rt.call(null,o)),c=!0)},p(u,[b]){u[4]!==null?_?_.p(u,b):(_=pt(u),_.c(),_.m(t,i)):_&&(_.d(1),_=null),u[5]?g?b&32&&O(g,1):(g=ht(),g.c(),O(g,1),g.m(t,null)):g&&(ne(),C(g,1,1,()=>{g=null}),ie()),b&78&&(w=u[3],ne(),a=Me(a,b,m,1,u,w,d,f,Ne,wt,null,mt),ie())},i(u){if(!v){O(g);for(let b=0;b<w.length;b+=1)O(a[b]);v=!0}},o(u){C(g);for(let b=0;b<a.length;b+=1)C(a[b]);v=!1},d(u){u&&E(e),_&&_.d(),g&&g.d();for(let b=0;b<a.length;b+=1)a[b].d();l[8](null),c=!1,p()}}}const Wl=160,xl=33,Qe=0;function Ul(l,e,t){let n;ve(l,Xe,u=>t(10,n=u));let i=[],s=new Map,r=new Set,o=[],f=null;function a(){if(!f)return;const u=f.getBoundingClientRect(),b=Wl+Qe*2,L=xl+Qe*2,T=Math.max(1,Math.floor(u.width/b)),S=(u.width-T*b)/2,k=Qe;t(3,o=i.map((M,D)=>{const H={...M};return H.x=D%T*b+S,H.y=k+Math.floor(D/T)*L,H}))}let d=null,v=!1;async function c(){var b;const u=await g_Api.lead_GetUnassignedList({offset:0,limit:20});return u?(t(4,d=u.count),(b=u.results)!=null?b:u):null}let p=!0;async function _(){for(;p;){await zl(g_Config.updateIntervals.new_leads);const u=await c();if(!u)continue;const b=new Set(i.map(D=>D.tg_id)),L=new Set(u.map(D=>D.tg_id)),T=u.filter(D=>!b.has(D.tg_id)),S=i.filter(D=>!L.has(D.tg_id)),k=Date.now();S.map(D=>s.has(D.tg_id)||s.set(D.tg_id,k)),T.length===0&&S.length===0||t(7,i=[...i,...T]);const M=new Set;[...s].map(D=>{D[1]+2e3<=k&&M.add(D[0]),D[1]+1e4<=k&&s.delete(D[0])}),M.size&&t(7,i=i.filter(D=>!M.has(D.tg_id)))}}async function g(){for(t(5,v=!0);p;){const u=await c();if(u){t(7,i=u);break}}t(5,v=!1),_()}Jt(()=>p=!1);const w=u=>async b=>{if(!n||r.has(u)||s.has(u))return;r.add(u),t(2,r);const L=await g_Api.lead_AssignOperatorSelft(u);r.delete(u),t(2,r),L!==null&&(s.set(u,Date.now()),t(1,s)),t(7,i),t(3,o)};g();function m(u){be[u?"unshift":"push"](()=>{f=u,t(0,f)})}return l.$$.update=()=>{l.$$.dirty&129&&a()},[f,s,r,o,d,v,w,i,m]}class ql extends ge{constructor(e){super(),_e(this,e,Ul,Gl,fe,{})}}function kt(l,e,t){const n=l.slice();return n[6]=e[t],n}function Xl(l){let e;return{c(){e=F("\xA0")},m(t,n){j(t,e,n)},p:ee,d(t){t&&E(e)}}}function Jl(l){var n,i;let e=((i=(n=l[1])==null?void 0:n.last_message)==null?void 0:i.text)+"",t;return{c(){t=F(e)},m(s,r){j(s,t,r)},p(s,r){var o,f;r&2&&e!==(e=((f=(o=s[1])==null?void 0:o.last_message)==null?void 0:f.text)+"")&&Q(t,e)},d(s){s&&E(t)}}}function yt(l,e){let t,n=e[6].title.toLowerCase()+"",i;return{key:l,first:null,c(){t=y("div"),i=F(n),A(t,"class","flex tag svelte-1rzywox"),B(t,"background",e[6].background_color),B(t,"color",e[6].color),this.first=t},m(s,r){j(s,t,r),h(t,i)},p(s,r){e=s,r&2&&n!==(n=e[6].title.toLowerCase()+"")&&Q(i,n),r&2&&B(t,"background",e[6].background_color),r&2&&B(t,"color",e[6].color)},d(s){s&&E(t)}}}function Lt(l){let e,t=l[4](l[1]._lastTime)+"",n;return{c(){e=y("div"),n=F(t),A(e,"class","pos_abs flex flex_cx flex_cy lastTime svelte-1rzywox")},m(i,s){j(i,e,s),h(e,n)},p(i,s){s&2&&t!==(t=i[4](i[1]._lastTime)+"")&&Q(n,t)},d(i){i&&E(e)}}}function Tt(l){var i;let e,t=((i=l[1])==null?void 0:i.unread_messages_count)+"",n;return{c(){e=y("div"),n=F(t),A(e,"class","pos_abs flex flex_cx flex_cy unreadMsgs svelte-1rzywox")},m(s,r){j(s,e,r),h(e,n)},p(s,r){var o;r&2&&t!==(t=((o=s[1])==null?void 0:o.unread_messages_count)+"")&&Q(n,t)},d(s){s&&E(e)}}}function Kl(l){var ue,z,Z,x,q,te,ae,Le,$e;let e,t,n,i,s,r=((Z=(z=(ue=l[1])==null?void 0:ue.lead)==null?void 0:z.first_name)!=null?Z:"")+"",o,f,a,d,v,c=((te=(q=(x=l[1])==null?void 0:x.lead)==null?void 0:q.last_name)!=null?te:"")+"",p,_,g,w,m,u=[],b=new Map,L,T,S,k,M,D;function H(N,J){var R,X;return(X=(R=N[1])==null?void 0:R.last_message)!=null&&X.text?Jl:Xl}let W=H(l),$=W(l),P=(Le=(ae=l[1])==null?void 0:ae.tag)!=null?Le:[];const V=N=>N[6].id;for(let N=0;N<P.length;N+=1){let J=kt(l,P,N),R=V(J);b.set(R,u[N]=yt(R,J))}let Y=l[1]._lastTime&&Lt(l),U=(($e=l[1])==null?void 0:$e.unread_messages_count)&&Tt(l);return{c(){e=y("div"),t=y("div"),n=y("div"),i=I(),s=y("div"),o=F(r),f=I(),a=y("div"),d=I(),v=y("div"),p=F(c),_=I(),g=y("div"),$.c(),w=I(),m=y("div");for(let N=0;N<u.length;N+=1)u[N].c();L=I(),Y&&Y.c(),T=I(),U&&U.c(),B(n,"width","8px"),B(a,"width","8px"),A(t,"class","flex nowrap textOverEllipsis userFirstLastName pos_rel svelte-1rzywox"),A(g,"class","nowrap textOverEllipsis lastMessage pos_rel svelte-1rzywox"),A(m,"class","flex tag_list svelte-1rzywox"),A(e,"class","flex flex_clm cursor_ptr item flex_cx unselect pos_rel svelte-1rzywox"),G(e,"active",l[0]===l[2])},m(N,J){j(N,e,J),h(e,t),h(t,n),h(t,i),h(t,s),h(s,o),h(t,f),h(t,a),h(t,d),h(t,v),h(v,p),h(e,_),h(e,g),$.m(g,null),h(e,w),h(e,m);for(let R=0;R<u.length;R+=1)u[R].m(m,null);h(e,L),Y&&Y.m(e,null),h(e,T),U&&U.m(e,null),k=!0,M||(D=le(e,"click",l[3]),M=!0)},p(N,[J]){var R,X,ke,Ee,K,me,ce,Pe,Se;(!k||J&2)&&r!==(r=((ke=(X=(R=N[1])==null?void 0:R.lead)==null?void 0:X.first_name)!=null?ke:"")+"")&&Q(o,r),(!k||J&2)&&c!==(c=((me=(K=(Ee=N[1])==null?void 0:Ee.lead)==null?void 0:K.last_name)!=null?me:"")+"")&&Q(p,c),W===(W=H(N))&&$?$.p(N,J):($.d(1),$=W(N),$&&($.c(),$.m(g,null))),J&2&&(P=(Pe=(ce=N[1])==null?void 0:ce.tag)!=null?Pe:[],u=Me(u,J,V,1,N,P,b,m,Zt,yt,null,kt)),N[1]._lastTime?Y?Y.p(N,J):(Y=Lt(N),Y.c(),Y.m(e,T)):Y&&(Y.d(1),Y=null),(Se=N[1])!=null&&Se.unread_messages_count?U?U.p(N,J):(U=Tt(N),U.c(),U.m(e,null)):U&&(U.d(1),U=null),(!k||J&5)&&G(e,"active",N[0]===N[2])},i(N){k||(N&&pe(()=>{S||(S=de(e,We,{},!0)),S.run(1)}),k=!0)},o(N){N&&(S||(S=de(e,We,{},!1)),S.run(0)),k=!1},d(N){N&&E(e),$.d();for(let J=0;J<u.length;J+=1)u[J].d();Y&&Y.d(),U&&U.d(),N&&S&&S.end(),M=!1,D()}}}function Zl(l,e,t){let n,i,s;ve(l,Qt,a=>t(5,i=a)),ve(l,Ml,a=>t(2,s=a));let{dialog_id:r}=e;const o=a=>{Dl(n)},f=a=>{const d=c=>String(c).padStart(2,"0"),v=new Date;return a=new Date(a),a.getYear()===v.getYear()&&a.getMonth()===v.getMonth()?a.getDate()===v.getDate()?`${d(a.getHours())}:${d(a.getMinutes())}`:`${d(a.getDate())}d ${d(a.getHours())}:${d(a.getMinutes())}`:`${d(a.getDate())}.${d(a.getMonth())}.${a.getFullYear()}`};return l.$$set=a=>{"dialog_id"in a&&t(0,r=a.dialog_id)},l.$$.update=()=>{l.$$.dirty&33&&t(1,n=i[r])},[r,n,s,o,f,i]}class Ql extends ge{constructor(e){super(),_e(this,e,Zl,Kl,fe,{dialog_id:0})}}function Mt(l,e,t){const n=l.slice();return n[4]=e[t],n}function St(l,e){let t,n=e[4].title+"",i,s,r;function o(){return e[3](e[4])}return{key:l,first:null,c(){t=y("div"),i=F(n),A(t,"class","cursor_ptr filter_tag inactive svelte-12nwhpm"),B(t,"background",e[4].background_color),B(t,"color",e[4].color),G(t,"active",e[0]===e[4].title),this.first=t},m(f,a){j(f,t,a),h(t,i),s||(r=le(t,"click",o),s=!0)},p(f,a){e=f,a&3&&G(t,"active",e[0]===e[4].title)},d(f){f&&E(t),s=!1,r()}}}function Vl(l){let e,t,n,i,s,r,o=[],f=new Map,a,d,v=l[1];const c=p=>p[4].title;for(let p=0;p<v.length;p+=1){let _=Mt(l,v,p),g=c(_);f.set(g,o[p]=St(g,_))}return{c(){e=y("div"),t=y("div"),t.textContent="Filter tag",n=I(),i=y("div"),s=y("div"),s.textContent="all",r=I();for(let p=0;p<o.length;p+=1)o[p].c();A(t,"class","flex label svelte-12nwhpm"),A(s,"class","cursor_ptr filter_tag inactive svelte-12nwhpm"),B(s,"background","#fff"),B(s,"color","#000"),G(s,"active",l[0]===null),A(i,"class","flex filter_tag_list svelte-12nwhpm"),A(e,"class","flex flex_clm cnt unselect svelte-12nwhpm")},m(p,_){j(p,e,_),h(e,t),h(e,n),h(e,i),h(i,s),h(i,r);for(let g=0;g<o.length;g+=1)o[g].m(i,null);a||(d=le(s,"click",l[2]),a=!0)},p(p,[_]){_&1&&G(s,"active",p[0]===null),_&3&&(v=p[1],o=Me(o,_,c,1,p,v,f,i,Zt,St,null,Mt))},i:ee,o:ee,d(p){p&&E(e);for(let _=0;_<o.length;_+=1)o[_].d();a=!1,d()}}}function en(l,e,t){let{filterTag:n=null}=e,i=[...g_Config.pinnedTags];const s=()=>t(0,n=null),r=o=>t(0,n=o.title);return l.$$set=o=>{"filterTag"in o&&t(0,n=o.filterTag)},[n,i,s,r]}class tn extends ge{constructor(e){super(),_e(this,e,en,Vl,fe,{filterTag:0})}}function At(l){let e,t;return{c(){e=y("div"),t=F(l[1]),A(e,"class","username svelte-10cuqsv")},m(n,i){j(n,e,i),h(e,t)},p(n,i){i&2&&Q(t,n[1])},d(n){n&&E(e)}}}function ln(l){let e,t,n,i,s,r=l[0]&&l[1]&&At(l);return{c(){e=y("div"),r&&r.c(),t=I(),n=y("div"),i=y("pre"),s=F(l[2]),A(i,"class","text svelte-10cuqsv"),A(n,"class","flex"),A(e,"class","flex flex_clm chat_item pos_abs svelte-10cuqsv"),G(e,"chat_item_other",l[0]),G(e,"chat_item_self",!l[0])},m(o,f){j(o,e,f),r&&r.m(e,null),h(e,t),h(e,n),h(n,i),h(i,s),l[6](e)},p(o,[f]){o[0]&&o[1]?r?r.p(o,f):(r=At(o),r.c(),r.m(e,t)):r&&(r.d(1),r=null),f&4&&Q(s,o[2]),f&1&&G(e,"chat_item_other",o[0]),f&1&&G(e,"chat_item_self",!o[0])},i:ee,o:ee,d(o){o&&E(e),r&&r.d(),l[6](null)}}}function nn(l,e,t){let{incoming:n=!1}=e,{username:i=null}=e,{text:s=null}=e,{render_Width:r=1}=e,{render_X:o=-r*2}=e,f=null;function a(d){be[d?"unshift":"push"](()=>{f=d,t(3,f)})}return l.$$set=d=>{"incoming"in d&&t(0,n=d.incoming),"username"in d&&t(1,i=d.username),"text"in d&&t(2,s=d.text),"render_Width"in d&&t(4,r=d.render_Width),"render_X"in d&&t(5,o=d.render_X)},[n,i,s,f,r,o,a]}class sn extends ge{constructor(e){super(),_e(this,e,nn,ln,fe,{incoming:0,username:1,text:2,render_Width:4,render_X:5})}}function Dt(l,e,t){const n=l.slice();return n[17]=e[t],n}function Ot(l,e,t){const n=l.slice();return n[17]=e[t],n}function $t(l){var p,_;let e,t,n,i=[],s=new Map,r,o,f,a,d=(_=(p=l[0])==null?void 0:p.tag)!=null?_:[];const v=g=>g[17].id;for(let g=0;g<d.length;g+=1){let w=Ot(l,d,g),m=v(w);s.set(m,i[g]=Ct(m,w))}let c=l[1]!==null&&l[0]&&l[1]===l[0].id&&l[3].length&&jt(l);return{c(){e=y("div"),t=y("div"),t.innerHTML=`Add tag
			<div class="flex flex_cx flex_cy h100 pos_abs tag_delete_btn svelte-elfos6">+</div>`,n=I();for(let g=0;g<i.length;g+=1)i[g].c();r=I(),c&&c.c(),A(t,"class","flex flex_cx flex_cy overhide cursor_ptr pos_rel tag_add tag svelte-elfos6"),G(t,"disabled",l[3].length===0),A(e,"class","flex tag_list unselect pos_rel svelte-elfos6")},m(g,w){j(g,e,w),h(e,t),h(e,n);for(let m=0;m<i.length;m+=1)i[m].m(e,null);h(e,r),c&&c.m(e,null),l[12](e),o=!0,f||(a=le(t,"click",l[11]),f=!0)},p(g,w){var m,u;(!o||w&8)&&G(t,"disabled",g[3].length===0),w&165&&(d=(u=(m=g[0])==null?void 0:m.tag)!=null?u:[],ne(),i=Me(i,w,v,1,g,d,s,e,Ne,Ct,r,Ot),ie()),g[1]!==null&&g[0]&&g[1]===g[0].id&&g[3].length?c?(c.p(g,w),w&11&&O(c,1)):(c=jt(g),c.c(),O(c,1),c.m(e,null)):c&&(ne(),C(c,1,1,()=>{c=null}),ie())},i(g){if(!o){for(let w=0;w<d.length;w+=1)O(i[w]);O(c),o=!0}},o(g){for(let w=0;w<i.length;w+=1)C(i[w]);C(c),o=!1},d(g){g&&E(e);for(let w=0;w<i.length;w+=1)i[w].d();c&&c.d(),l[12](null),f=!1,a()}}}function Et(l){let e,t,n;return t=new Oe({}),{c(){e=y("div"),oe(t.$$.fragment),A(e,"class","pos_abs tag_loading svelte-elfos6")},m(i,s){j(i,e,s),se(t,e,null),n=!0},i(i){n||(O(t.$$.fragment,i),n=!0)},o(i){C(t.$$.fragment,i),n=!1},d(i){i&&E(e),re(t)}}}function Ct(l,e){let t,n=e[17].title.toLowerCase()+"",i,s,r,o,f=e[2]===e[5](e[0].id,e[17]),a,d,v,c=f&&Et();return{key:l,first:null,c(){t=y("div"),i=F(n),s=I(),r=y("div"),r.textContent="X",o=I(),c&&c.c(),A(r,"class","flex flex_cx flex_cy h100 pos_abs tag_delete_btn svelte-elfos6"),A(t,"class","flex flex_cx flex_cy overhide cursor_ptr pos_rel tag svelte-elfos6"),B(t,"background",e[17].background_color),B(t,"color",e[17].color),G(t,"disabled",e[2]),this.first=t},m(p,_){j(p,t,_),h(t,i),h(t,s),h(t,r),h(t,o),c&&c.m(t,null),a=!0,d||(v=le(t,"click",function(){Te(e[7](e[17]))&&e[7](e[17]).apply(this,arguments)}),d=!0)},p(p,_){e=p,(!a||_&1)&&n!==(n=e[17].title.toLowerCase()+"")&&Q(i,n),_&5&&(f=e[2]===e[5](e[0].id,e[17])),f?c?_&5&&O(c,1):(c=Et(),c.c(),O(c,1),c.m(t,null)):c&&(ne(),C(c,1,1,()=>{c=null}),ie()),(!a||_&1)&&B(t,"background",e[17].background_color),(!a||_&1)&&B(t,"color",e[17].color),(!a||_&4)&&G(t,"disabled",e[2])},i(p){a||(O(c),a=!0)},o(p){C(c),a=!1},d(p){p&&E(t),c&&c.d(),d=!1,v()}}}function jt(l){let e,t,n=[],i=new Map,s,r,o=l[3];const f=a=>a[17].title;for(let a=0;a<o.length;a+=1){let d=Dt(l,o,a),v=f(d);i.set(v,n[a]=Ht(v,d))}return{c(){e=y("div"),t=y("div");for(let a=0;a<n.length;a+=1)n[a].c();A(t,"class","flex tagAddList1 svelte-elfos6"),B(t,"flex-wrap","wrap"),A(e,"class","pos_abs tag_settings flex flex_clm svelte-elfos6")},m(a,d){j(a,e,d),h(e,t);for(let v=0;v<n.length;v+=1)n[v].m(t,null);r=!0},p(a,d){d&109&&(o=a[3],ne(),n=Me(n,d,f,1,a,o,i,t,Ne,Ht,null,Dt),ie())},i(a){if(!r){for(let d=0;d<o.length;d+=1)O(n[d]);a&&pe(()=>{s||(s=de(e,We,{},!0)),s.run(1)}),r=!0}},o(a){for(let d=0;d<n.length;d+=1)C(n[d]);a&&(s||(s=de(e,We,{},!1)),s.run(0)),r=!1},d(a){a&&E(e);for(let d=0;d<n.length;d+=1)n[d].d();a&&s&&s.end()}}}function It(l){let e,t,n;return t=new Oe({}),{c(){e=y("div"),oe(t.$$.fragment),A(e,"class","pos_abs tag_loading svelte-elfos6")},m(i,s){j(i,e,s),se(t,e,null),n=!0},i(i){n||(O(t.$$.fragment,i),n=!0)},o(i){C(t.$$.fragment,i),n=!1},d(i){i&&E(e),re(t)}}}function Ht(l,e){let t,n=e[17].title+"",i,s,r,o=e[2]===e[5](e[0].id,e[17]),f,a,d,v,c=o&&It();return{key:l,first:null,c(){t=y("div"),i=F(n),s=y("div"),s.textContent="+",r=I(),c&&c.c(),f=I(),A(s,"class","flex flex_cx flex_cy h100 pos_abs tag_delete_btn svelte-elfos6"),A(t,"class","flex flex_cx flex_cy overhide cursor_ptr pos_rel tag_add tag svelte-elfos6"),B(t,"background",e[17].background_color),B(t,"color",e[17].color),G(t,"disabled",e[2]),this.first=t},m(p,_){j(p,t,_),h(t,i),h(t,s),h(t,r),c&&c.m(t,null),h(t,f),a=!0,d||(v=le(t,"click",function(){Te(e[6](e[17]))&&e[6](e[17]).apply(this,arguments)}),d=!0)},p(p,_){e=p,(!a||_&8)&&n!==(n=e[17].title+"")&&Q(i,n),_&13&&(o=e[2]===e[5](e[0].id,e[17])),o?c?_&13&&O(c,1):(c=It(),c.c(),O(c,1),c.m(t,f)):c&&(ne(),C(c,1,1,()=>{c=null}),ie()),(!a||_&8)&&B(t,"background",e[17].background_color),(!a||_&8)&&B(t,"color",e[17].color),(!a||_&4)&&G(t,"disabled",e[2])},i(p){a||(O(c),a=!0)},o(p){C(c),a=!1},d(p){p&&E(t),c&&c.d(),d=!1,v()}}}function rn(l){let e,t,n,i,s=l[0]&&$t(l);return{c(){s&&s.c(),e=Ue()},m(r,o){s&&s.m(r,o),j(r,e,o),t=!0,n||(i=[le(window,"mousedown",l[8]),le(window,"blure_",l[8])],n=!0)},p(r,[o]){r[0]?s?(s.p(r,o),o&1&&O(s,1)):(s=$t(r),s.c(),O(s,1),s.m(e.parentNode,e)):s&&(ne(),C(s,1,1,()=>{s=null}),ie())},i(r){t||(O(s),t=!0)},o(r){C(s),t=!1},d(r){s&&s.d(r),r&&E(e),n=!1,we(i)}}}function on(l,e,t){let n,i;ve(l,Qt,u=>t(10,i=u));let{dialog_id:s=null}=e,r=null,o=!1;const f=async(u,b)=>{const L=await g_Api.dialog_SetTags(n.id,b);return L&&Tl(L),L},a=(u,b)=>{var L;return`${u}|${(L=b==null?void 0:b.title)!=null?L:"*"}`},d=u=>async b=>{if(!n||o)return;t(2,o=a(n.id,u));const L={color:"#fff",background_color:"#f00",...u,title:u.title.toLowerCase().trim()};await f(n.id,[...n.tag,L]),t(2,o=!1)},v=u=>async b=>{if(!n||o)return;t(2,o=a(n.id,u));const L=n.tag.filter(T=>T.id!==u.id).map(T=>({title:T.title,color:T.color,background_color:T.background_color}));await f(n.id,L),t(2,o=!1)};let c=[];function p(){var b;if(!n)return;const u=new Set(((b=n==null?void 0:n.tag)!=null?b:[]).map(L=>L.title));t(3,c=g_Config.pinnedTags.filter(L=>!u.has(L.title)))}let _;const g=u=>{let b=u.target;for(;b;){if(b===_)return;b=b.parentNode}t(1,r=null)},w=()=>t(1,r=n.id);function m(u){be[u?"unshift":"push"](()=>{_=u,t(4,_)})}return l.$$set=u=>{"dialog_id"in u&&t(9,s=u.dialog_id)},l.$$.update=()=>{l.$$.dirty&1536&&t(0,n=i[s]),l.$$.dirty&1&&p()},[n,r,o,c,_,a,d,v,g,s,i,w,m]}class an extends ge{constructor(e){super(),_e(this,e,on,rn,fe,{dialog_id:9})}}function fn(l){let e,t,n,i;return{c(){e=y("div"),t=y("div"),A(t,"class","pos_abs thumb w100 svelte-1un6dgr"),B(t,"height",l[1]+"px"),B(t,"top",l[5](l[0],l[3])+"px"),G(t,"active",l[2]),A(e,"class","pos_rel h100 unselect line svelte-1un6dgr"),G(e,"active",l[2])},m(s,r){j(s,e,r),h(e,t),n||(i=[le(window,"mousemove",l[7]),le(window,"mouseup",l[8]),le(window,"blur",l[8]),le(t,"mousedown",l[6]),xe(Yl.call(null,e,l[4])),le(e,"mousedown",l[9])],n=!0)},p(s,[r]){r&2&&B(t,"height",s[1]+"px"),r&9&&B(t,"top",s[5](s[0],s[3])+"px"),r&4&&G(t,"active",s[2]),r&4&&G(e,"active",s[2])},i:ee,o:ee,d(s){s&&E(e),n=!1,we(i)}}}function un(l,e,t){let n,{value_in:i=0}=e,{value_out:s=i}=e,{thumb_Height:r=20}=e;const o=qe(null);ve(l,o,w=>t(3,n=w));const f=()=>n?n.height-r:1,a=w=>n?w*f():0;let d=null;const v=w=>{!n||t(2,d={y:w.clientY,value_out:s})},c=w=>{if(!n||!d)return;const m=w.clientY-d.y;if(n.height){const u=m/f();t(0,s=Ze(0,d.value_out+u,1))}},p=w=>{t(2,d=null)},_=w=>{!n||(t(0,s=Ze(0,(w.clientY-n.y-r/2)/f(),1)),t(2,d={y:w.clientY,value_out:s}))},g=()=>{d||t(0,s=Ze(0,i,1))};return l.$$set=w=>{"value_in"in w&&t(10,i=w.value_in),"value_out"in w&&t(0,s=w.value_out),"thumb_Height"in w&&t(1,r=w.thumb_Height)},l.$$.update=()=>{l.$$.dirty&1024&&g()},[s,r,d,n,o,a,v,c,p,_,i]}class cn extends ge{constructor(e){super(),_e(this,e,un,fn,fe,{value_in:10,value_out:0,thumb_Height:1})}}function Nt(l,e,t){const n=l.slice();return n[32]=e[t],n}function Pt(l){var u,b,L,T,S,k,M,D;let e,t,n,i,s=((L=(b=(u=l[0])==null?void 0:u.lead)==null?void 0:b.first_name)!=null?L:"")+"",r,o,f,a,d,v=((k=(S=(T=l[0])==null?void 0:T.lead)==null?void 0:S.last_name)!=null?k:"")+"",c,p,_,g,w,m=((D=(M=l[0])==null?void 0:M.lead)==null?void 0:D.username)&&zt(l);return g=new an({props:{dialog_id:l[0].id}}),{c(){e=y("div"),t=y("div"),n=I(),i=y("div"),r=F(s),o=I(),f=y("div"),a=I(),d=y("div"),c=F(v),p=I(),m&&m.c(),_=I(),oe(g.$$.fragment),B(t,"width","8px"),B(f,"width","8px"),A(e,"class","flex nowrap textOverEllipsis userFirstLastName pos_rel svelte-1jlgmlw")},m(H,W){j(H,e,W),h(e,t),h(e,n),h(e,i),h(i,r),h(e,o),h(e,f),h(e,a),h(e,d),h(d,c),j(H,p,W),m&&m.m(H,W),j(H,_,W),se(g,H,W),w=!0},p(H,W){var P,V,Y,U,ue,z,Z,x;(!w||W[0]&1)&&s!==(s=((Y=(V=(P=H[0])==null?void 0:P.lead)==null?void 0:V.first_name)!=null?Y:"")+"")&&Q(r,s),(!w||W[0]&1)&&v!==(v=((z=(ue=(U=H[0])==null?void 0:U.lead)==null?void 0:ue.last_name)!=null?z:"")+"")&&Q(c,v),(x=(Z=H[0])==null?void 0:Z.lead)!=null&&x.username?m?m.p(H,W):(m=zt(H),m.c(),m.m(_.parentNode,_)):m&&(m.d(1),m=null);const $={};W[0]&1&&($.dialog_id=H[0].id),g.$set($)},i(H){w||(O(g.$$.fragment,H),w=!0)},o(H){C(g.$$.fragment,H),w=!1},d(H){H&&E(e),H&&E(p),m&&m.d(H),H&&E(_),re(g,H)}}}function zt(l){let e,t,n=l[0].lead.username+"",i;return{c(){e=y("div"),t=F("@"),i=F(n),A(e,"class","nowrap textOverEllipsis username svelte-1jlgmlw")},m(s,r){j(s,e,r),h(e,t),h(e,i)},p(s,r){r[0]&1&&n!==(n=s[0].lead.username+"")&&Q(i,n)},d(s){s&&E(e)}}}function Bt(l){let e,t,n,i;return t=new Oe({}),{c(){e=y("div"),oe(t.$$.fragment),A(e,"class","pos_abs loading svelte-1jlgmlw")},m(s,r){j(s,e,r),se(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&pe(()=>{n||(n=de(e,ye,{},!0)),n.run(1)}),i=!0)},o(s){C(t.$$.fragment,s),s&&(n||(n=de(e,ye,{},!1)),n.run(0)),i=!1},d(s){s&&E(e),re(t),s&&n&&n.end()}}}function Ft(l,e){var s,r,o,f,a,d;let t,n,i;return n=new sn({props:{render_Width:e[7],incoming:(s=e[32])==null?void 0:s.incoming,username:(f=(o=(r=e[0])==null?void 0:r.lead)==null?void 0:o.username)!=null?f:"",text:(d=(a=e[32])==null?void 0:a.text)!=null?d:""}}),{key:l,first:null,c(){t=Ue(),oe(n.$$.fragment),this.first=t},m(v,c){j(v,t,c),se(n,v,c),i=!0},p(v,c){var _,g,w,m,u,b;e=v;const p={};c[0]&128&&(p.render_Width=e[7]),c[0]&2&&(p.incoming=(_=e[32])==null?void 0:_.incoming),c[0]&1&&(p.username=(m=(w=(g=e[0])==null?void 0:g.lead)==null?void 0:w.username)!=null?m:""),c[0]&2&&(p.text=(b=(u=e[32])==null?void 0:u.text)!=null?b:""),n.$set(p)},i(v){i||(O(n.$$.fragment,v),i=!0)},o(v){C(n.$$.fragment,v),i=!1},d(v){v&&E(t),re(n,v)}}}function dn(l){let e,t,n,i,s,r,o,f,a,d=[],v=new Map,c,p,_,g,w,m,u,b,L,T,S=l[0]&&Pt(l),k=l[2]&&Bt(),M=l[1];const D=$=>$[32].index;for(let $=0;$<M.length;$+=1){let P=Nt(l,M,$),V=D(P);v.set(V,d[$]=Ft(V,P))}function H($){l[12]($)}let W={value_in:l[3]};return l[4]!==void 0&&(W.value_out=l[4]),_=new cn({props:W}),be.push(()=>it(_,"value_out",H)),{c(){e=y("div"),t=y("div"),n=y("div"),S&&S.c(),i=I(),k&&k.c(),s=I(),r=y("div"),o=y("div"),f=y("div"),a=y("div");for(let $=0;$<d.length;$+=1)d[$].c();c=I(),p=y("div"),oe(_.$$.fragment),w=I(),m=y("div"),u=y("textarea"),A(n,"class","flex flex_clm flex_cx"),A(t,"class","flex flex_cy header pos_rel svelte-1jlgmlw"),A(a,"class","pos_rel w100 h100"),A(p,"class","pos_abs h100"),B(p,"width","10px"),B(p,"right","0px"),B(p,"height","calc( 100% - 10px )"),B(p,"top","5px"),A(f,"class","pos_rel w100 h100"),A(o,"class","flex pos_abs overhide"),A(r,"class","flex flex_grow_1 pos_rel overhide"),A(u,"class","flex flex_grow_1 chat_input_textarea svelte-1jlgmlw"),A(m,"class","flex chat_input svelte-1jlgmlw"),A(e,"class","flex flex_clm flex_grow_1 overhide")},m($,P){j($,e,P),h(e,t),h(t,n),S&&S.m(n,null),h(t,i),k&&k.m(t,null),h(e,s),h(e,r),h(r,o),h(o,f),h(f,a);for(let V=0;V<d.length;V+=1)d[V].m(a,null);l[11](a),h(f,c),h(f,p),se(_,p,null),h(e,w),h(e,m),h(m,u),at(u,l[6]),b=!0,L||(T=[le(f,"wheel",l[10]),xe(rt.call(null,o,l[8])),le(u,"input",l[13]),le(u,"keyup",l[9])],L=!0)},p($,P){$[0]?S?(S.p($,P),P[0]&1&&O(S,1)):(S=Pt($),S.c(),O(S,1),S.m(n,null)):S&&(ne(),C(S,1,1,()=>{S=null}),ie()),$[2]?k?P[0]&4&&O(k,1):(k=Bt(),k.c(),O(k,1),k.m(t,null)):k&&(ne(),C(k,1,1,()=>{k=null}),ie()),P[0]&131&&(M=$[1],ne(),d=Me(d,P,D,1,$,M,v,a,Ne,Ft,null,Nt),ie());const V={};P[0]&8&&(V.value_in=$[3]),!g&&P[0]&16&&(g=!0,V.value_out=$[4],nt(()=>g=!1)),_.$set(V),P[0]&64&&at(u,$[6])},i($){if(!b){O(S),O(k);for(let P=0;P<M.length;P+=1)O(d[P]);O(_.$$.fragment,$),b=!0}},o($){C(S),C(k);for(let P=0;P<d.length;P+=1)C(d[P]);C(_.$$.fragment,$),b=!1},d($){$&&E(e),S&&S.d(),k&&k.d();for(let P=0;P<d.length;P+=1)d[P].d();l[11](null),re(_),L=!1,we(T)}}}const Yt=10,Be=4;async function Rt(l){try{await g_Api("POST",`dialogs/${l}/read`)}catch(e){console.log(e.message)}}function _n(l,e,t){let n,{dialog:i=null}=e,s=[],r=[],o=[],f=new Set,a=0,d=0,v=1,c=1,p=null;const _=qe(null);ve(l,_,z=>t(22,n=z));const g={id:1,text:"",received_at:new Date().toJSON(),is_read:!0,incoming:!0,dialog:1};let w=-1;async function m(z,Z=0,x=20){const q=await g_Api("GET","messages",{dialog_id:z,offset:Z,limit:x});if(i&&i.id===z){for(a=q.count;r.length<a;){const ae=r.length;r.push({id:w--,index:ae,_isFakeMsg:!0})}const te=q.results;te.map((ae,Le)=>ae.index=Z+Le),te.map(ae=>r[ae.index]=ae)}}let u="";const b=async z=>{if(z.which===13&&(t(6,u=u.trim()),u)){const Z={...g};Z.id=Math.random()*1e9|0,Z.text=u,Z.incoming=!1,i&&g_Api("POST","messages",{dialog:i.id,text:u,is_read:!0}),s.push(Z),s=s,t(6,u="")}};function L(){s=[],r=[],t(1,o=[]),f=new Set,a=0,console.log("clear all")}let T=null,S=null;async function k(z){if(!z){if(!T)return;T=null,L();return}S!==z.id&&(T=z,S=z.id,L(),s=[],r=[],t(1,o=[]),a=0,t(2,d++,d),await m(z.id),a&&await m(z.id,Math.max(a-20,0),20),await Rt(z.id),t(2,d--,d))}let M=1,D=!0;function H(){if(D&&requestAnimationFrame(H),!n||!p||!r.length)return;n.width;const z=n.height,Z=n.width-Yt*2,x=Yt;t(7,M=Math.floor(Z*.9));const q=1+c*(r.length-1);let te=Math.floor(q),ae=q-te;te>=r.length&&(te=r.length-1,ae=1);const Le=[],$e=[];let N=null;t(1,o=[]);for(let R=te-22,X=0,ke=!0;R<te+2;R++)R<0||R>=r.length||(r[R]._isFakeMsg&&f.add(R),o[X]!==r[R]&&(ke&&(ke=!1,o.splice(X,1e9)),t(1,o[X]=r[R],o),t(1,o)),t(1,o[X]._drawIndex=X,o),R<te&&Le.push(o[X]),R>te&&$e.push(o[X]),R===te&&(N=o[X]),X++);const J=[...p.children];if(J.length===o.length){J.map((K,me)=>{const ce=o[me];if(!ce||K._remove)return;const Pe=K.getBoundingClientRect();K._bbox=Pe;const Se=Math.floor(x+(ce.incoming?0:n.width*.05));K.__cacheWidth!==M&&(K.__cacheWidth=M,K.style.width=M+"px"),K.__cacheLeft!==Se&&(K.__cacheLeft=Se,K.style.left=Se+"px")});const R=(K,me,ce=1)=>(K.__cacheTop!==me&&(K.__cacheTop=me,K.style.top=me+"px"),me+(K._bbox.height+Be)*ce);let X=0,ke=0;const Ee=J[N._drawIndex];if(Ee){const K=Ee;X=z+Be-(K._bbox.height+Be)*ae,ke=X,X=R(K,X,1)}$e.map((K,me)=>{const ce=J[K._drawIndex];X=R(ce,X,1)}),X=ke,Le.reverse().map((K,me)=>{const ce=J[K._drawIndex];X-=ce._bbox.height+Be,R(ce,X,0)})}}requestAnimationFrame(H),Jt(()=>D=!1);async function W(){if(f.size){const z=[...f].sort((q,te)=>q-te);f.clear();const Z=[];let x={offset:null,limit:0};for(const q of z){if(x.offset!==null){if(x.limit<=500&&x.offset+x.limit===q){x.limit++;continue}Z.push(x)}x={offset:q,limit:1}}x.offset!==null&&Z.push(x),i&&(t(2,d++,d),await Promise.all(Z.map(q=>m(i.id,q.offset,q.limit))),t(2,d--,d))}setTimeout(W,500)}W();async function $(){i&&await Rt(i.id),setTimeout($,5e3)}$();async function P(){i&&await m(i.id,a,20),setTimeout(P,500)}P();const V=z=>{z.deltaY>0?t(3,v=c+1/(r.length-1)):t(3,v=c-1/(r.length-1))};function Y(z){be[z?"unshift":"push"](()=>{p=z,t(5,p)})}function U(z){c=z,t(4,c)}function ue(){u=this.value,t(6,u)}return l.$$set=z=>{"dialog"in z&&t(0,i=z.dialog)},l.$$.update=()=>{l.$$.dirty[0]&1&&k(i)},[i,o,d,v,c,p,u,M,_,b,V,Y,U,ue]}class gn extends ge{constructor(e){super(),_e(this,e,_n,dn,fe,{dialog:0},null,[-1,-1])}}function Gt(l,e,t){const n=l.slice();return n[12]=e[t],n}function Wt(l,e){let t,n,i;return n=new Ql({props:{dialog_id:e[12].id}}),{key:l,first:null,c(){t=Ue(),oe(n.$$.fragment),this.first=t},m(s,r){j(s,t,r),se(n,s,r),i=!0},p(s,r){e=s;const o={};r&4&&(o.dialog_id=e[12].id),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){C(n.$$.fragment,s),i=!1},d(s){s&&E(t),re(n,s)}}}function mn(l){let e,t,n,i,s,r,o,f,a,d,v,c=[],p=new Map,_,g,w,m,u;function b(k){l[5](k)}let L={};l[0]!==void 0&&(L.filterTag=l[0]),a=new tn({props:L}),be.push(()=>it(a,"filterTag",b));let T=l[2];const S=k=>k[12].id;for(let k=0;k<T.length;k+=1){let M=Gt(l,T,k),D=S(M);p.set(D,c[k]=Wt(D,M))}return g=new gn({props:{dialog:l[3]}}),{c(){e=y("div"),t=y("div"),n=y("div"),i=F(`My leads\r
\r
			\r
			\r
			`),s=y("button"),r=F("UF:"),o=F(l[1]),f=I(),oe(a.$$.fragment),v=I();for(let k=0;k<c.length;k+=1)c[k].c();_=I(),oe(g.$$.fragment),A(s,"class","pos_abs cursor_ptr"),A(s,"style","right: 1px; background: #484848; color: #000; //border-radius: 4px; "),A(n,"class","flex flex_cx flex_cy header pos_rel svelte-lcq473"),A(t,"class","flex flex_clm list svelte-lcq473"),A(e,"class","flex flex_grow_1 ")},m(k,M){j(k,e,M),h(e,t),h(t,n),h(n,i),h(n,s),h(s,r),h(s,o),h(t,f),se(a,t,null),h(t,v);for(let D=0;D<c.length;D+=1)c[D].m(t,null);h(e,_),se(g,e,null),w=!0,m||(u=le(s,"click",l[4]),m=!0)},p(k,[M]){(!w||M&2)&&Q(o,k[1]);const D={};!d&&M&1&&(d=!0,D.filterTag=k[0],nt(()=>d=!1)),a.$set(D),M&4&&(T=k[2],ne(),c=Me(c,M,S,1,k,T,p,t,Ne,Wt,null,Gt),ie());const H={};M&8&&(H.dialog=k[3]),g.$set(H)},i(k){if(!w){O(a.$$.fragment,k);for(let M=0;M<T.length;M+=1)O(c[M]);O(g.$$.fragment,k),w=!0}},o(k){C(a.$$.fragment,k);for(let M=0;M<c.length;M+=1)C(c[M]);C(g.$$.fragment,k),w=!1},d(k){k&&E(e),re(a);for(let M=0;M<c.length;M+=1)c[M].d();re(g),m=!1,u()}}}function pn(l,e,t){let n;ve(l,Al,g=>t(3,n=g));let i=null,s=1,r=[];async function o(g){g={unread_first:s,offset:0,limit:20,...g},i&&(g.tag=i);const w=await g_Api.dialog_GetList(g);return w?(Vt(w.results),w.results):[]}let f=null,a=!1;async function d(){for(;;){for(;a=!1,t(2,r=await o({offset:0,limit:20})),!!a;);f=Fl(g_Config.updateIntervals.my_leads),await f.promise,f=null}}async function v(){t(2,r=await o({offset:0,limit:20})),d()}v();function c(){if(f){f.resolve();return}a=!0}const p=()=>t(1,s^=1);function _(g){i=g,t(0,i)}return l.$$.update=()=>{l.$$.dirty&1&&c()},[i,s,r,n,p,_]}class hn extends ge{constructor(e){super(),_e(this,e,pn,mn,fe,{})}}function vn(l){let e,t,n,i,s,r,o;return t=new ql({}),i=new hn({}),{c(){e=y("div"),oe(t.$$.fragment),n=I(),oe(i.$$.fragment),A(e,"class","pos_abs content flex svelte-116f09r"),G(e,"contentHideL__",l[1]!=="newLeads")},m(f,a){j(f,e,a),se(t,e,null),h(e,n),se(i,e,null),s=!0,r||(o=xe(rt.call(null,e)),r=!0)},p(f,a){(!s||a&2)&&G(e,"contentHideL__",f[1]!=="newLeads")},i(f){s||(O(t.$$.fragment,f),O(i.$$.fragment,f),s=!0)},o(f){C(t.$$.fragment,f),C(i.$$.fragment,f),s=!1},d(f){f&&E(e),re(t),re(i),r=!1,o()}}}function bn(l){let e,t;return e=new Pl({}),{c(){oe(e.$$.fragment)},m(n,i){se(e,n,i),t=!0},p:ee,i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){re(e,n)}}}function wn(l){let e,t,n,i,s,r,o,f;function a(_){l[2](_)}let d={};l[1]!==void 0&&(d.select=l[1]),t=new El({props:d}),be.push(()=>it(t,"select",a));const v=[bn,vn],c=[];function p(_,g){return _[0]?1:0}return r=p(l),o=c[r]=v[r](l),{c(){e=y("main"),oe(t.$$.fragment),i=I(),s=y("div"),o.c(),A(s,"class","flex flex_grow_1 pos_rel overhide"),A(e,"class","flex flex_clm svelte-116f09r")},m(_,g){j(_,e,g),se(t,e,null),h(e,i),h(e,s),c[r].m(s,null),f=!0},p(_,[g]){const w={};!n&&g&2&&(n=!0,w.select=_[1],nt(()=>n=!1)),t.$set(w);let m=r;r=p(_),r===m?c[r].p(_,g):(ne(),C(c[m],1,1,()=>{c[m]=null}),ie(),o=c[r],o?o.p(_,g):(o=c[r]=v[r](_),o.c()),O(o,1),o.m(s,null))},i(_){f||(O(t.$$.fragment,_),O(o),f=!0)},o(_){C(t.$$.fragment,_),C(o),f=!1},d(_){_&&E(e),re(t),c[r].d()}}}function kn(){const l=m=>new Promise(u=>setTimeout(u,m)),e=()=>l(1500+(Math.random()*200|0)),t={id:1};let n=0;const i={tg_id:123123124,username:"123124123",first_name:"test",last_name:"ewr",date_joined:"2022-10-27T13:48:51.054781Z",esub:"123123",pub_id:"2312",refcode:"123123",subpub:"23123",hasOperator:!1};let s=[];const r=m=>s.find(u=>String(u.tg_id)===String(m)),o=()=>{const m={...i};m.tg_id+=n,m.first_name+=" "+n,m.last_name+=" "+n,m.date_joined=new Date().toJSON(),m.username=[m.first_name,m.last_name].map(u=>u.trim()).filter(Boolean).join(" ").replace(/\s/g,"_"),n++,s.push(m)},f=()=>[...s],a=()=>f().filter(m=>!m.hasOperator),d=(m,u)=>{var k;const b=u.offset|0,L=Math.max(1,Math.min(1e6,((k=u.limit)!=null?k:20)|0)),T=m.length,S=m.slice(b).slice(0,L);return{count:T,results:S}},v={},c={};let p=1;Array(1e4).fill().map(o),setInterval(()=>{},2400),setInterval(()=>{},3e3),setInterval(()=>{const m=Object.keys(c),u=m[m.length*Math.random()|0],b=c[u];if(b){const L=b.length?0:10;for(let T=0;T<L;T++)b.push({id:p++,dialog:u,text:Math.random()<.5?"Hi. And short message "+(p-1)+" ...":"Hi. And long message "+(p-1)+" ..."+`
 Long!`.repeat(20),is_read:!1,incoming:!0,received_at:new Date().toJSON()})}},1e3);const _={},g=async(m,u,b={},L=0)=>{var $,P,V;const T=!location.hash.match(/real\-api/),S=async()=>{var Y,U,ue,z,Z;if(m==="GET"&&u==="operators")return await e(),{results:[{username:"stan18k",first_name:"Stanislav",last_name:"Kulakov"},{username:"dmodev",first_name:"Demon",last_name:"Dev"},{username:"idandrey",first_name:"Andrey",last_name:""},{username:"eveascigarettesnbeer",first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer ".repeat(1e3),first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer",first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer",first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer",first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer",first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer ".repeat(1e3),first_name:"YEHA ".repeat(1e3),last_name:"D sf  ".repeat(1e3)}]};if(m==="GET"&&u==="leads/unassigned")return await e(),d(a(),b);if(m==="POST"&&/leads\/\d+\/assign/.test(u)){await e();const x=(Y=u.match(/leads\/(\d+)\/assign/))==null?void 0:Y[1],q=_["x-username"];if(!x||!q)return!1;const te=r(x);if(!te||te.hasOperator)return!1;te.hasOperator=!0,t.id++;const ae={...t,lead_id:x,operator:q,tag:[]};return v[q]=(U=v[q])!=null?U:[],v[q].push(ae),c[ae.id]=[],!0}if(m==="GET"&&u==="dialogs"){const x=[...(ue=v[_["x-username"]])!=null?ue:[]].map(q=>({...q,lead:r(q.lead_id)}));return d(x,b)}if(m==="GET"&&u==="messages"){await e();const x=c[b.dialog_id]=(z=c[b.dialog_id])!=null?z:[];return d(x,b)}if(m==="POST"&&u==="messages")return c[b.dialog]=(Z=c[b.dialog])!=null?Z:[],c[b.dialog].push({id:p++,dialog:b.dialog,text:b.text,is_read:!!b.is_read,incoming:!1,received_at:new Date().toJSON()}),!0};if(T){const Y=await S();if(L===0)return Y;if(L===1)return{status:200,json:()=>Y}}let k="";{const Y=g_Config.api,U=($=Y.protocol)!=null?$:location.protocol,ue=(P=Y.host)!=null?P:location.host,z=(V=Y.path_base)!=null?V:"/";k=`${U}//${ue}/${z}`}const M=new URL(k);m==="GET"&&Object.entries(b).map(([Y,U])=>M.searchParams.append(Y,U)),M.pathname=(M.pathname+"/"+u+"/").replace(/\/{2,}/g,"/");let D;const H={..._};(m==="POST"||m==="PATCH")&&(H["Content-Type"]="application/json",D=JSON.stringify(b));const W=await fetch(M,{method:m,headers:H,body:D});if(L===0)return await W.json();if(L===1)return W},w=m=>{var b,L,T;const u=(T=(b=m==null?void 0:m.last_message)==null?void 0:b.received_at)!=null?T:(L=m==null?void 0:m.lead)==null?void 0:L.date_joined;return{...m,_lastTime:u?+new Date(u):null}};return g.dialog_SetTags=async(m,u)=>{try{const b=await g_Api("PATCH",`dialogs/${m}`,{tag:u},1);if(b.status===200)return await b.json()}catch(b){console.error(b.message)}return null},g.dialog_GetList=async m=>{try{const u=await g_Api("GET","dialogs",m,1);if(u.status===200){const b=await u.json();return b.results=b.results.map(w),b}}catch(u){console.error(u.message)}return null},g.lead_GetUnassignedList=async m=>{try{const u=await g_Api("GET","leads/unassigned",{options:m},1);if(u.status===200)return await u.json()}catch(u){console.error(u.message)}return null},g.lead_AssignOperatorSelft=async m=>{try{const u=await g_Api("POST",`leads/${m}/assign`,{},1),b=await u.json();if(u.status===200)return!0;if(u.status===400)return!1}catch(u){console.error(u.message)}return null},g.setHeader=(m,u)=>_[m]=u,g}function yn(l,e,t){let n;ve(l,Xe,o=>t(0,n=o));let i="operators";function s(o){o&&t(1,i="newLeads")}globalThis.g_Api=kn();function r(o){i=o,t(1,i)}return l.$$.update=()=>{l.$$.dirty&1&&s(n)},[n,i,r]}class Ln extends ge{constructor(e){super(),_e(this,e,yn,wn,fe,{})}}new Ln({target:document.getElementById("app")});
