(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function ue(){}const Xt=l=>l;function rl(l,e){for(const t in e)l[t]=e[t];return l}function In(l){return l()}function ol(){return Object.create(null)}function je(l){l.forEach(In)}function Xe(l){return typeof l=="function"}function _e(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let bt;function Re(l,e){return bt||(bt=document.createElement("a")),bt.href=e,l===bt.href}function Xn(l){return Object.keys(l).length===0}function zt(l,...e){if(l==null)return ue;const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ht(l){let e;return zt(l,t=>e=t)(),e}function he(l,e,t){l.$$.on_destroy.push(zt(e,t))}function Qe(l,e,t){return l.set(t),e}function ft(l){return l&&Xe(l.destroy)?l.destroy:ue}const Dn=typeof window<"u";let On=Dn?()=>window.performance.now():()=>Date.now(),Kt=Dn?l=>requestAnimationFrame(l):ue;const it=new Set;function An(l){it.forEach(e=>{e.c(l)||(it.delete(e),e.f())}),it.size!==0&&Kt(An)}function Fn(l){let e;return it.size===0&&Kt(An),{promise:new Promise(t=>{it.add(e={c:l,f:t})}),abort(){it.delete(e)}}}function g(l,e){l.appendChild(e)}function Kn(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function Zn(l,e){return g(l.head||l,e),e.sheet}function N(l,e,t){l.insertBefore(e,t||null)}function R(l){l.parentNode.removeChild(l)}function Zt(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function w(l){return document.createElement(l)}function Ye(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function ae(l){return document.createTextNode(l)}function D(){return ae(" ")}function Ue(){return ae("")}function $(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function h(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Qn(l){return Array.from(l.childNodes)}function be(l,e){e=""+e,l.wholeText!==e&&(l.data=e)}function al(l,e){l.value=e==null?"":e}function j(l,e,t,n){t===null?l.style.removeProperty(e):l.style.setProperty(e,t,n?"important":"")}function Y(l,e,t){l.classList[t?"add":"remove"](e)}function En(l,e,{bubbles:t=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(l,t,n,e),i}const Dt=new Map;let Ot=0;function $n(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function es(l){const e={style_element:w("style"),rules:{}};return Dt.set(l,e),e}function fl(l,e,t,n,i,s,r,o=0){const a=16.666/n;let f=`{
`;for(let v=0;v<=1;v+=a){const y=e+(t-e)*s(v);f+=v*100+`%{${r(y,1-y)}}
`}const c=f+`100% {${r(t,1-t)}}
}`,u=`__svelte_${$n(c)}_${o}`,m=Kn(l),{style_element:_,rules:d}=Dt.get(m)||es(m);if(!d[u]){const v=Zn(m,_);d[u]=!0,v.insertRule(`@keyframes ${u} ${c}`,v.cssRules.length)}const p=l.style.animation||"";return l.style.animation=`${p?`${p}, `:""}${u} ${n}ms linear ${i}ms 1 both`,Ot+=1,u}function ts(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=t.length-n.length;i&&(l.style.animation=n.join(", "),Ot-=i,Ot||ls())}function ls(){Kt(()=>{Ot||(Dt.forEach(l=>{const{style_element:e}=l;R(e)}),Dt.clear())})}let mt;function _t(l){mt=l}function Qt(){if(!mt)throw new Error("Function called outside component initialization");return mt}function pt(l){Qt().$$.on_mount.push(l)}function Be(l){Qt().$$.on_destroy.push(l)}function $t(){const l=Qt();return(e,t,{cancelable:n=!1}={})=>{const i=l.$$.callbacks[e];if(i){const s=En(e,t,{cancelable:n});return i.slice().forEach(r=>{r.call(l,s)}),!s.defaultPrevented}return!0}}function el(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const dt=[],Ne=[],Ct=[],Gt=[],zn=Promise.resolve();let xt=!1;function jn(){xt||(xt=!0,zn.then(Rn))}function ns(){return jn(),zn}function He(l){Ct.push(l)}function rt(l){Gt.push(l)}const Pt=new Set;let yt=0;function Rn(){const l=mt;do{for(;yt<dt.length;){const e=dt[yt];yt++,_t(e),ss(e.$$)}for(_t(null),dt.length=0,yt=0;Ne.length;)Ne.pop()();for(let e=0;e<Ct.length;e+=1){const t=Ct[e];Pt.has(t)||(Pt.add(t),t())}Ct.length=0}while(dt.length);for(;Gt.length;)Gt.pop()();xt=!1,Pt.clear(),_t(l)}function ss(l){if(l.fragment!==null){l.update(),je(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(He)}}let ut;function is(){return ut||(ut=Promise.resolve(),ut.then(()=>{ut=null})),ut}function qt(l,e,t){l.dispatchEvent(En(`${e?"intro":"outro"}${t}`))}const Tt=new Set;let Ze;function ke(){Ze={r:0,c:[],p:Ze}}function Se(){Ze.r||je(Ze.c),Ze=Ze.p}function O(l,e){l&&l.i&&(Tt.delete(l),l.i(e))}function H(l,e,t,n){if(l&&l.o){if(Tt.has(l))return;Tt.add(l),Ze.c.push(()=>{Tt.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const rs={duration:0};function Ae(l,e,t,n){let i=e(l,t),s=n?0:1,r=null,o=null,a=null;function f(){a&&ts(l,a)}function c(m,_){const d=m.b-s;return _*=Math.abs(d),{a:s,b:m.b,d,duration:_,start:m.start,end:m.start+_,group:m.group}}function u(m){const{delay:_=0,duration:d=300,easing:p=Xt,tick:v=ue,css:y}=i||rs,b={start:On()+_,b:m};m||(b.group=Ze,Ze.r+=1),r||o?o=b:(y&&(f(),a=fl(l,s,m,d,_,p,y)),m&&v(0,1),r=c(b,d),He(()=>qt(l,m,"start")),Fn(M=>{if(o&&M>o.start&&(r=c(o,d),o=null,qt(l,r.b,"start"),y&&(f(),a=fl(l,s,r.b,r.duration,0,p,i.css))),r){if(M>=r.end)v(s=r.b,1-s),qt(l,r.b,"end"),o||(r.b?f():--r.group.r||je(r.group.c)),r=null;else if(M>=r.start){const L=M-r.start;s=r.a+r.d*p(L/r.duration),v(s,1-s)}}return!!(r||o)}))}return{run(m){Xe(i)?is().then(()=>{i=i(),u(m)}):u(m)},end(){f(),r=o=null}}}const os=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Un(l,e){l.d(1),e.delete(l.key)}function tt(l,e){H(l,1,1,()=>{e.delete(l.key)})}function Ke(l,e,t,n,i,s,r,o,a,f,c,u){let m=l.length,_=s.length,d=m;const p={};for(;d--;)p[l[d].key]=d;const v=[],y=new Map,b=new Map;for(d=_;d--;){const k=u(i,s,d),I=t(k);let C=r.get(I);C?n&&C.p(k,e):(C=f(I,k),C.c()),y.set(I,v[d]=C),I in p&&b.set(I,Math.abs(d-p[I]))}const M=new Set,L=new Set;function T(k){O(k,1),k.m(o,c),r.set(k.key,k),c=k.first,_--}for(;m&&_;){const k=v[_-1],I=l[m-1],C=k.key,P=I.key;k===I?(c=k.first,m--,_--):y.has(P)?!r.has(C)||M.has(C)?T(k):L.has(P)?m--:b.get(C)>b.get(P)?(L.add(C),T(k)):(M.add(P),m--):(a(I,r),m--)}for(;m--;){const k=l[m];y.has(k.key)||a(k,r)}for(;_;)T(v[_-1]);return v}function ot(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function de(l){l&&l.c()}function fe(l,e,t,n){const{fragment:i,on_mount:s,on_destroy:r,after_update:o}=l.$$;i&&i.m(e,t),n||He(()=>{const a=s.map(In).filter(Xe);r?r.push(...a):je(a),l.$$.on_mount=[]}),o.forEach(He)}function ce(l,e){const t=l.$$;t.fragment!==null&&(je(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function as(l,e){l.$$.dirty[0]===-1&&(dt.push(l),jn(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function ve(l,e,t,n,i,s,r,o=[-1]){const a=mt;_t(l);const f=l.$$={fragment:null,ctx:null,props:s,update:ue,not_equal:i,bound:ol(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ol(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};r&&r(f.root);let c=!1;if(f.ctx=t?t(l,e.props||{},(u,m,..._)=>{const d=_.length?_[0]:m;return f.ctx&&i(f.ctx[u],f.ctx[u]=d)&&(!f.skip_bound&&f.bound[u]&&f.bound[u](d),c&&as(l,u)),m}):[],f.update(),c=!0,je(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const u=Qn(e.target);f.fragment&&f.fragment.l(u),u.forEach(R)}else f.fragment&&f.fragment.c();e.intro&&O(l.$$.fragment),fe(l,e.target,e.anchor,e.customElement),Rn()}_t(a)}class we{$destroy(){ce(this,1),this.$destroy=ue}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Xn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function fs(l){const e=l-1;return e*e*e+1}function Ee(l,{delay:e=0,duration:t=400,easing:n=Xt}={}){const i=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:s=>`opacity: ${s*i}`}}function At(l,{delay:e=0,duration:t=400,easing:n=fs}={}){const i=getComputedStyle(l),s=+i.opacity,r=parseFloat(i.height),o=parseFloat(i.paddingTop),a=parseFloat(i.paddingBottom),f=parseFloat(i.marginTop),c=parseFloat(i.marginBottom),u=parseFloat(i.borderTopWidth),m=parseFloat(i.borderBottomWidth);return{delay:e,duration:t,easing:n,css:_=>`overflow: hidden;opacity: ${Math.min(_*20,1)*s};height: ${_*r}px;padding-top: ${_*o}px;padding-bottom: ${_*a}px;margin-top: ${_*f}px;margin-bottom: ${_*c}px;border-top-width: ${_*u}px;border-bottom-width: ${_*m}px;`}}const nt=[];function Fe(l,e=ue){let t;const n=new Set;function i(o){if(_e(l,o)&&(l=o,t)){const a=!nt.length;for(const f of n)f[1](),nt.push(f,l);if(a){for(let f=0;f<nt.length;f+=2)nt[f][0](nt[f+1]);nt.length=0}}}function s(o){i(o(l))}function r(o,a=ue){const f=[o,a];return n.add(f),n.size===1&&(t=e(i)||ue),o(l),()=>{n.delete(f),n.size===0&&(t(),t=null)}}return{set:i,update:s,subscribe:r}}const gt=new Map,jt=l=>gt.set(l,(gt.get(l)|0)+1),Rt=l=>gt.set(l,(gt.get(l)|0)-1),cs=()=>gt,Wt=new Map,us=(l,e)=>{var n;const t=(n=Wt.get(l))!=null?n:{};Object.assign(t,{key:l,duration:e,timeUpdate:Date.now()}),Wt.set(l,t)},ds=(l,e)=>Wt,st=()=>{},at=l=>new Promise(e=>setTimeout(e,l)),Oe=(l,e,t)=>Math.min(t,Math.max(l,e)),Ut=(l={})=>(Object.assign(l,{promise:new Promise((e,t)=>Object.assign(l,{resolve:e,reject:t}))}),l),Yt=(l,e)=>{try{if(l===e)return!0;const t=typeof l;if(t!==typeof e)return!1;switch(t){case"undefined":case"boolean":case"bigint":case"symbol":case"string":return l===e;case"number":return isNaN(l)&&isNaN(e)?!0:l===e}if(l===null||e===null)return l===e;if(t!=="object")return!1;if(Array.isArray(l)&&Array.isArray(e))return l.length!==e.length?!1:l.every((o,a)=>Yt(o,e[a]));const i=Object.entries(l),s=Object.entries(e);if(i.length!==s.length)return!1;const r=new Map(s);return i.every(([o,a])=>!(!r.has(o)||!Yt(a,r.get(o))))}catch{}return!1},_s=l=>{let e=!1,t=[];const n=async i=>{e=!0;let s,r,o;try{s=await l()}catch(a){o=!0,r=a}if(i.map(a=>{o&&a.reject(r),a.resolve(s)}),t.length){const a=t;return t=[],n(a)}e=!1};return()=>{const i=Ut();return e?t.push(i):(e=!0,n([i])),i.promise}},ms=l=>{const e=Ut();return setTimeout(e.resolve,l),e},gs=Symbol("RangeLoadList_ItemLastUpdateTime"),ps=l=>{var W,F,G,V;const e=Oe(1,((W=l.updateInterval)!=null?W:1e3)|0,36e5),t=Oe(1,((F=l.maxLimit)!=null?F:50)|0,1e3);let n=l.fLoad;const i=(G=l.onUpdateItem)!=null?G:st,s=(V=l.onUpdateItemList)!=null?V:st,r=!!l.isLoadEnd,o=gs,a={},f=Fe(null),c={subscribe:f.subscribe};let u=0,m=t,_=null;const d=q=>n=q,p=async(q,S)=>{try{const U=await n({offset:q,limit:S});if(typeof U.count=="number"&&Array.isArray(U.results))return U}catch{}return null},v=async(q,S)=>{const U=await p(q,S);if(U){const J=U.results,me=Math.max(0,U.count|0),ie=_!==me,le=Date.now();_=me;const K=[];for(let Z=0,ne=q;Z<J.length&&ne<_;Z++,ne++){const Me=J[Z];a[ne]!==void 0&&Yt(a[ne],Me)||(Me[o]=le,a[ne]=Me,i(Me),K.push(Me))}K.length&&s(K),(ie||K.length)&&f.set({total:_,list:a})}},y=async q=>{const S=[];S.push(v(u,m)),_!==null&&u+m<_&&r&&S.push(v(_,t)),await Promise.all(S),_!==null&&u+m<_&&r&&q&&await v(_,t)};let b=!1,M=!0,L,T=1;return(async()=>{let q=0;for(;M;){for(;M&&!b;){const S=T;if(await y(q++===0),S===T)break}L=ms(e),await L.promise}})(),{setFLoad:d,update:()=>{T++,L&&L.resolve()},setRange:(q,S)=>{u=Math.max(0,q|0),m=Oe(0,S|0,t)},destroy:()=>M=!1,getData_r:()=>c,symbolUpdateTime:o,pause:()=>b=!0,resume:()=>b=!1}},hs=async l=>{const e=t=>{const n=document.createElement("textarea");n.value=t,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();let i=!1;try{i=!!document.execCommand("copy")}catch(s){console.error("Fallback: Oops, unable to copy",s)}return document.body.removeChild(n),i};try{return navigator.clipboard?(await navigator.clipboard.writeText(l),!0):e(l)}catch(t){console.error(t)}return!1},lt=(l,e,t=!0)=>{let n=!0;return(async()=>{for(jt("setIntervalAwait"),t&&await at(l);n;){try{await e()}catch(i){console.error("setIntervalAwait error",i)}await at(l)}Rt("setIntervalAwait")})(),()=>n=!1},vs=(l,e=!0)=>{let t=!0;const n=()=>{!t||(l(),requestAnimationFrame(n))};return e?requestAnimationFrame(n):n(),jt("requestAnimationFrameLoop"),()=>{t=!1,Rt("requestAnimationFrameLoop")}},ws=()=>{let l=1;return(e,t)=>{const n=++l;setTimeout(()=>{n===l&&t()},e)}},Nt=(l,e)=>{const t=ws();return()=>t(l,e)},It=()=>{let l=new Map;try{l=new Map([...new URLSearchParams(location.hash.replace(/^\#/,""))])}catch{}return l},tl=()=>{const l={};return{on:(n,i)=>{var o;const s={event:n,cb:i},r=l[n]=(o=l[n])!=null?o:[];return r.push(s),()=>{const a=r.findIndex(f=>f===s);a!==-1&&r.splice(a,1)}},emit:(n,...i)=>{var s;return((s=l[n])!=null?s:[]).map(r=>r.cb(...i))}}},bs=()=>{const l={};return l.addModule=(e,t)=>l[e]=t,l},Nn=(l,e="file-")=>{const t=document.createElement("a");t.href=l;const n=e+t.pathname.split(/[^a-zA-Z0-9\.\-_]/).pop();t.download=n,t.target="blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},Ft=l=>Nn(l,"image-"),ys=(l,e)=>{const t=document.createElement("a");t.href=l,t.download=e.replace(/[^a-zA-Z0-9\.\-\+_\x20\x09]/,""),t.target="blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},ks=l=>{try{if(typeof l.message=="string")return l.message}catch{}return""},cl=typeof performance=="object"&&typeof performance.now=="function"?performance.now.bind(performance):Date.now,Hn=(...l)=>{var t,n;const e=new Date(...l);return[e.toLocaleDateString(),e.toLocaleTimeString(),(n=(t=String(e).match(/GMT[^\s]+/))==null?void 0:t[0])!=null?n:""].filter(Boolean).join(" ")};window.formatFullTimeText=Hn;const Vt=l=>new Promise((e,t)=>{l.oncomplete=l.onsuccess=()=>e(l.result),l.onabort=l.onerror=()=>t(l.error)}),Ss=async l=>{const e="storage",t=indexedDB.open(l);t.onupgradeneeded=()=>t.result.createObjectStore(e);const n=await Vt(t);return i=>n.transaction(e,i).objectStore(e)},Ls=async l=>{try{const e=await Ss(l);return{get:(i,s)=>Vt(e("readonly").get(i)),set:async(i,s)=>{const r=e("readwrite");return await r.put(s,i),await Vt(r.transaction),!0}}}catch{}return null},ul=l=>{const e=Ls(l);return{get:async i=>{try{if(await e)return(await e).get(i)}catch{}},set:async(i,s)=>{try{const r=await e;return r&&await r.set(i,s),!0}catch{}return!1}}};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */const ct={};ct.version="1.2.2";function Ms(){for(var l=0,e=new Array(256),t=0;t!=256;++t)l=t,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,e[t]=l;return typeof Int32Array<"u"?new Int32Array(e):e}var qe=Ms();function Cs(l){var e=0,t=0,n=0,i=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(n=0;n!=256;++n)i[n]=l[n];for(n=0;n!=256;++n)for(t=l[n],e=256+n;e<4096;e+=256)t=i[e]=t>>>8^l[t&255];var s=[];for(n=1;n!=16;++n)s[n-1]=typeof Int32Array<"u"?i.subarray(n*256,n*256+256):i.slice(n*256,n*256+256);return s}var Ge=Cs(qe),Ts=Ge[0],Is=Ge[1],Ds=Ge[2],Os=Ge[3],As=Ge[4],Fs=Ge[5],Es=Ge[6],zs=Ge[7],js=Ge[8],Rs=Ge[9],Us=Ge[10],Ns=Ge[11],Hs=Ge[12],Ps=Ge[13],qs=Ge[14];function Bs(l,e){for(var t=e^-1,n=0,i=l.length;n<i;)t=t>>>8^qe[(t^l.charCodeAt(n++))&255];return~t}function Gs(l,e){for(var t=e^-1,n=l.length-15,i=0;i<n;)t=qs[l[i++]^t&255]^Ps[l[i++]^t>>8&255]^Hs[l[i++]^t>>16&255]^Ns[l[i++]^t>>>24]^Us[l[i++]]^Rs[l[i++]]^js[l[i++]]^zs[l[i++]]^Es[l[i++]]^Fs[l[i++]]^As[l[i++]]^Os[l[i++]]^Ds[l[i++]]^Is[l[i++]]^Ts[l[i++]]^qe[l[i++]];for(n+=15;i<n;)t=t>>>8^qe[(t^l[i++])&255];return~t}function xs(l,e){for(var t=e^-1,n=0,i=l.length,s=0,r=0;n<i;)s=l.charCodeAt(n++),s<128?t=t>>>8^qe[(t^s)&255]:s<2048?(t=t>>>8^qe[(t^(192|s>>6&31))&255],t=t>>>8^qe[(t^(128|s&63))&255]):s>=55296&&s<57344?(s=(s&1023)+64,r=l.charCodeAt(n++)&1023,t=t>>>8^qe[(t^(240|s>>8&7))&255],t=t>>>8^qe[(t^(128|s>>2&63))&255],t=t>>>8^qe[(t^(128|r>>6&15|(s&3)<<4))&255],t=t>>>8^qe[(t^(128|r&63))&255]):(t=t>>>8^qe[(t^(224|s>>12&15))&255],t=t>>>8^qe[(t^(128|s>>6&63))&255],t=t>>>8^qe[(t^(128|s&63))&255]);return~t}ct.table=qe;ct.bstr=Bs;ct.buf=Gs;ct.str=xs;const Ws=async l=>{try{const e=new Uint8Array(await l.arrayBuffer()),t=i=>[...i].slice(0,8).map(s=>s.toString(16).toUpperCase().padStart(2,"0")).join("");try{const i=await crypto.subtle.digest("SHA-256",e);return t(new Uint8Array(i))}catch{}const n=ct.buf(e)|0;return t(Array(4).fill().map((i,s)=>n>>s*8&255))}catch{}},Ys=l=>{const e=ul(l+"-url-hash"),t=ul(l+"-hash-blob");return{get:async r=>{r=String(r);const o=await e.get(r);if(!!o)return await t.get(o)},set:async(r,o)=>{r=String(r);const a=await Ws(o);return a?!!(await t.set(a,o)&&await e.set(r,a)):!1},getHash:async r=>{r=String(r);const o=await e.get(r);if(!!o)return o}}},Vs=l=>{const e=Ys("global-blob-storage-y2s2trok"),t=new Map,n=async(s,r)=>{const o=await e.getHash(s);if(!o)return null;let a=t.get(o);return a||(r||(r=await e.get(s)),r?(a=URL.createObjectURL(r),t.set(o,a),a):null)};return{getOrLoad:async(s,r=!0)=>{if(s.startsWith("blob:"))return s;let o=await n(s);if(o)return o;if(!r)return s;const a=await(await fetch(s)).blob();return await e.set(s,a),o=await n(s,a),o!=null?o:s}}},Pn=Vs();let Js=1;function Xs(l){var B;const e=Js++,t=l.url,n=(B=l.cache)!=null?B:!0;let s=(({url:E,name:x})=>{if(x)return x;try{return E.split(/[\/\\]/).pop()}catch{}return""})(l),r=null,o=null,a=1,f="loading",c=null,u=null,m=null;const _=()=>({state_wr:Fe(f),currentTime_wr:Fe(c),duration_wr:Fe(u),currentTimeRate_wr:Fe(m),name_wr:Fe(s)}),d=E=>Object.fromEntries(Object.entries(E).map(x=>[x[0].replace(/_wr$/,"_r"),{subscribe:x[1].subscribe}])),p=_(),v=d(p),y=()=>{p.state_wr.set(f),p.currentTime_wr.set(c),p.duration_wr.set(u),p.currentTimeRate_wr.set(m)},b=()=>{!o||(o.volume=a)},M=()=>{try{o.pause()}catch{}},L=()=>{if(f==="pause")try{o.play()}catch{}},T=E=>{try{o.currentTime=E}catch{}y()},k=E=>{a=Oe(0,E,1),b()},I=E=>{f="error",M(),y()},C=async E=>{try{const x=new Audio,W=()=>{c=x.currentTime,u=x.duration,m=c/u,y()},F=G=>V=>{f!=="error"&&(f=G,y())};x.addEventListener("loadedmetadata",W),x.addEventListener("timeupdate",W),x.addEventListener("play",F("play")),x.addEventListener("pause",F("pause")),x.addEventListener("canplaythrough",()=>{f==="loading"&&F("pause")()}),x.addEventListener("error",I),x.src=E,o=x,b()}catch{I()}};return(async(E,x)=>{r=await Pn.getOrLoad(E,x),await C(r!=null?r:t)})(t,n),{id:e,play:L,pause:M,setCurrentTime:T,setVolume:k,info_r:v}}function Ks(){const l=new Map,e=Fe(null),t={subscribe:e.subscribe},n=Fe(1),i=()=>{const a=Ht(t);a&&a.setVolume(Ht(n))};n.subscribe(i);const s=a=>{const f=Ht(t);f!==a&&(f&&f.pause(),e.set(a),i())},r=a=>{let f=l.get(a.url);return f||(f=Xs(a),l.set(a.url,f)),f};return{getOrCreateAudioItem:r,getControlAudio:a=>{const f=r(a);return{info_r:f.info_r,play:()=>{s(f),f.play()},pause:()=>f.pause()}},audioActive_r:t,audioActive_Set:s,volume_wr:n}}const Zs=l=>{const e=l;let t=null,n=null,i=null,s="loading",r=null;const o=()=>({state_wr:Fe(s),url_wr:Fe(r),width_wr:Fe(n),height_wr:Fe(i)}),a=p=>{const v=y=>({subscribe:y.subscribe});return{state_r:v(p.state_wr),url_r:v(p.url_wr),width_r:v(p.width_wr),height_r:v(p.height_wr)}},f=o(),c=a(f),u=()=>{f.state_wr.set(s),f.url_wr.set(r),f.width_wr.set(n),f.height_wr.set(i)},m=p=>{s="error",u()},_=async p=>{const v=new Image;v.addEventListener("load",()=>{n=v.width,i=v.height,r=p,s="load",u()}),v.addEventListener("error",m),v.src=p};return(async p=>{t=await Pn.getOrLoad(p,!0),await _(t!=null?t:p)})(e),{info_r:c}},Qs=()=>{const l=new Map;return{getOrCreateImageItem:t=>{let n=l.get(t);return n||(n=Zs(t),l.set(t,n)),n}}},Et=Fe(null),qn=Et.set,kt=(l,e)=>{const{subscribe:t,set:n,update:i}=Fe(l);return[{subscribe:t},s=>{n(s),e&&e(s)}]},$s=(l,e)=>{const{subscribe:t,set:n,update:i}=Fe(l);return[{subscribe:t},i]},ei=l=>parseInt(l.id),ti=Ks(),li=Qs();function ni(l,e,t,n){var ie,le;const i={},s={...e};Object.assign(i,{appConfig:s}),Object.assign(i,{api:t}),Object.assign(i,{moduleMgr:n});const r=tl();Object.assign(i,{events:r});const o=[],a=K=>o.push(K);Object.assign(i,{destroy:()=>o.map(K=>K())});const c=l,[u]=kt(c),[m,_]=kt(null);let d=0;const[p,v]=kt(d),y=_s(t.operatorSelf_GetOnlineInfo),b=async()=>{v(++d);const K=await y();return K&&_(K),v(--d),K};Object.assign(i,{operatorSelf_r:u,operatorSelfLastOnlineInfo_r:m,operatorSelfLastOnlineInfo_Update:b,operatorSelfLastOnline_SetOnlineFlag:async K=>{v(++d);const Z=await t.operatorSelf_SetOnlineFlag(K);return Z&&_(Z),v(--d),Z},operatorSelfLastOnlineInfoLoading_r:p});const L=Object.create(null),[T,k]=$s(L),I=K=>{!K.length||k(Z=>{for(const ne of K)Z[ei(ne)]=ne;return Z})},C=K=>I([K]),[P,B]=kt(null);Object.assign(i,{dialogMap_r:T,dialogMap_SetDialogList:I,dialogMap_SetDialog:C,dialogActiveID_r:P,dialogActiveID_Set:B});const E=new Map(((ie=s==null?void 0:s.lead_StatusList)!=null?ie:[]).map(K=>[K.id,K])),x=Object.entries((le=s==null?void 0:s.lead_StatusJumpMap)!=null?le:{}).reduce((K,[Z,ne])=>(ne.map(Me=>{var De;return(K[Me]=(De=K[Me])!=null?De:[]).push(Z)}),K),{}),W=K=>{var Z;return(Z=E.get(K))!=null?Z:null},F=K=>{var Z;try{return(Z=s.lead_StatusGetID(K))!=null?Z:null}catch{}return null},G=K=>{var ne,Me,De;const Z=W(K);return{id:K,title:(ne=Z==null?void 0:Z.title)!=null?ne:Z!=null&&Z.id?`#${Z==null?void 0:Z.id}`:"*UNK*",bgColor:(Me=Z==null?void 0:Z.bgColor)!=null?Me:"#000",color:(De=Z==null?void 0:Z.color)!=null?De:"#fff"}},V=K=>G(F(K)),q=(K,Z)=>{var ne;try{return(ne=s.lead_StatusPrevIDResolve(K,Z))!=null?ne:null}catch{}return null},S=(K,Z)=>{try{const ne=x==null?void 0:x[K],Me=(ne==null?void 0:ne.length)===1?ne==null?void 0:ne[0]:(ne==null?void 0:ne.length)>1?q(K,Z):null,De=W(Me);return De&&!(De!=null&&De.stopPrevSearch)?Me:null}catch{}return null};return Object.assign(i,{lead_GetStatusOrDefault:V,lead_GetStatusByID:W,lead_GetStatusTitle:K=>{var Z,ne;return(ne=(Z=W(K))==null?void 0:Z.title)!=null?ne:K},lead_GetStatusList:K=>{var Z;return((Z=e==null?void 0:e.lead_StatusList)!=null?Z:[]).filter(ne=>ne.access==="user").filter(ne=>ne.id!==K).filter(ne=>ne.id!=="DL")},lead_GetStatusID:F,lead_StatusPrevIDResolve:q,lead_GetStatusPrevID:S,lead_GetStatusHistory:K=>{let Z=F(K);const ne=[Z];for(;Z=S(Z,K),K=null,!!Z;)ne.unshift(Z);return ne.map(G).filter(Boolean)}}),a(lt(e.updateIntervals.sync_online_info,b,!1)),Object.assign(i,{audioMgr:ti,imageMgr:li}),Object.freeze(i),i}function dl(l){let e,t,n;return{c(){e=w("div"),e.textContent="Operators",h(e,"class","item cursor_ptr svelte-vbcb9r"),Y(e,"active",l[0]==="operators"),Y(e,"disabled",l[1].has("operators"))},m(i,s){N(i,e,s),t||(n=$(e,"click",l[3]("operators")),t=!0)},p(i,s){s&1&&Y(e,"active",i[0]==="operators"),s&2&&Y(e,"disabled",i[1].has("operators"))},d(i){i&&R(e),t=!1,n()}}}function _l(l){let e,t=l[2].username+"",n,i,s;return{c(){e=w("div"),n=ae(t),h(e,"class","item cursor_ptr notHover nowrap textOverEllipsis svelte-vbcb9r"),j(e,"max-width","200px")},m(r,o){N(r,e,o),g(e,n),s=!0},p(r,o){(!s||o&4)&&t!==(t=r[2].username+"")&&be(n,t)},i(r){s||(He(()=>{i||(i=Ae(e,Ee,{},!0)),i.run(1)}),s=!0)},o(r){i||(i=Ae(e,Ee,{},!1)),i.run(0),s=!1},d(r){r&&R(e),r&&i&&i.end()}}}function si(l){let e,t,n,i,s,r,o=!l[2]&&dl(l),a=l[2]&&0,f=l[2]&&_l(l);return{c(){e=w("div"),o&&o.c(),t=D(),a&&a.c(),n=D(),i=w("div"),s=D(),f&&f.c(),h(i,"class","flex flex_grow_1"),h(e,"class","flex flex_cy w100 list unselect svelte-vbcb9r")},m(c,u){N(c,e,u),o&&o.m(e,null),g(e,t),a&&a.m(e,null),g(e,n),g(e,i),g(e,s),f&&f.m(e,null),r=!0},p(c,[u]){c[2]?o&&(o.d(1),o=null):o?o.p(c,u):(o=dl(c),o.c(),o.m(e,t)),c[2],a&&(a.d(1),a=null),c[2]?f?(f.p(c,u),u&4&&O(f,1)):(f=_l(c),f.c(),O(f,1),f.m(e,null)):f&&(ke(),H(f,1,1,()=>{f=null}),Se())},i(c){r||(O(f),r=!0)},o(c){H(f),r=!1},d(c){c&&R(e),o&&o.d(),a&&a.d(),f&&f.d()}}}function ii(l,e,t){let n;he(l,Et,o=>t(2,n=o));let{select:i=""}=e,{disabled:s=new Set}=e;s.add("newLeads"),s.add("myLeads");const r=o=>a=>{s.has(o)||t(0,i=o)};return l.$$set=o=>{"select"in o&&t(0,i=o.select),"disabled"in o&&t(1,s=o.disabled)},[i,s,n,r]}class ri extends we{constructor(e){super(),ve(this,e,ii,si,_e,{select:0,disabled:1})}}function ml(l,e,t){const n=l.slice();return n[4]=e[t],n}function gl(l,e,t){const n=l.slice();return n[7]=e[t],n}function pl(l){let e,t=l[7].text+"",n,i;return{c(){e=w("div"),n=ae(t),i=ae("\xA0"),h(e,"class","text svelte-13s1vua"),j(e,"color",l[7].color)},m(s,r){N(s,e,r),g(e,n),N(s,i,r)},p(s,r){r&2&&t!==(t=s[7].text+"")&&be(n,t),r&2&&j(e,"color",s[7].color)},d(s){s&&R(e),s&&R(i)}}}function hl(l){let e,t,n=l[4].chunks,i=[];for(let s=0;s<n.length;s+=1)i[s]=pl(gl(l,n,s));return{c(){e=w("div");for(let s=0;s<i.length;s+=1)i[s].c();t=D(),h(e,"class","flex flex_cy line svelte-13s1vua"),Y(e,"mini",l[4].type==="mini")},m(s,r){N(s,e,r);for(let o=0;o<i.length;o+=1)i[o].m(e,null);g(e,t)},p(s,r){if(r&2){n=s[4].chunks;let o;for(o=0;o<n.length;o+=1){const a=gl(s,n,o);i[o]?i[o].p(a,r):(i[o]=pl(a),i[o].c(),i[o].m(e,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}r&2&&Y(e,"mini",s[4].type==="mini")},d(s){s&&R(e),Zt(i,s)}}}function oi(l){let e,t,n,i=l[1],s=[];for(let r=0;r<i.length;r+=1)s[r]=hl(ml(l,i,r));return{c(){e=w("div");for(let r=0;r<s.length;r+=1)s[r].c();h(e,"class","flex flex_clm notify svelte-13s1vua"),Y(e,"normal",l[0]==="normal"),Y(e,"error",l[0]==="error"),Y(e,"debug",l[0]==="debug")},m(r,o){N(r,e,o);for(let a=0;a<s.length;a+=1)s[a].m(e,null);n=!0},p(r,[o]){if(o&2){i=r[1];let a;for(a=0;a<i.length;a+=1){const f=ml(r,i,a);s[a]?s[a].p(f,o):(s[a]=hl(f),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=i.length}(!n||o&1)&&Y(e,"normal",r[0]==="normal"),(!n||o&1)&&Y(e,"error",r[0]==="error"),(!n||o&1)&&Y(e,"debug",r[0]==="debug")},i(r){n||(r&&He(()=>{t||(t=Ae(e,At,{},!0)),t.run(1)}),n=!0)},o(r){r&&(t||(t=Ae(e,At,{},!1)),t.run(0)),n=!1},d(r){r&&R(e),Zt(s,r),r&&t&&t.end()}}}function ai(l,e,t){let{notify:n}=e,i="normal",s=[];const r=()=>{t(0,i=n==null?void 0:n.type),t(1,s=[]),Array.isArray(n==null?void 0:n.data)&&t(1,s=n.data.filter(Boolean).map(o=>{let a="normal",f=[];return typeof o=="string"?f.push({color:"#fff",text:o}):(a=o.type,f=o.chunks?o.chunks:[{color:"#fff",text:o.text}]),f=f.filter(c=>c.text),{type:a,chunks:f}}).filter(o=>o.chunks.length))};return l.$$set=o=>{"notify"in o&&t(2,n=o.notify)},l.$$.update=()=>{l.$$.dirty&4&&r()},[i,s,n]}class fi extends we{constructor(e){super(),ve(this,e,ai,oi,_e,{notify:2})}}function vl(l,e,t){const n=l.slice();return n[4]=e[t],n}function wl(l,e){let t,n,i;return n=new fi({props:{notify:e[4]}}),{key:l,first:null,c(){t=Ue(),de(n.$$.fragment),this.first=t},m(s,r){N(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&1&&(o.notify=e[4]),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&R(t),ce(n,s)}}}function ci(l){let e,t=[],n=new Map,i,s=l[0];const r=o=>o[4].id;for(let o=0;o<s.length;o+=1){let a=vl(l,s,o),f=r(a);n.set(f,t[o]=wl(f,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();h(e,"class","pos_abs notify_list svelte-11tn2wf")},m(o,a){N(o,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);i=!0},p(o,[a]){a&1&&(s=o[0],ke(),t=Ke(t,a,r,1,o,s,n,e,tt,wl,null,vl),Se())},i(o){if(!i){for(let a=0;a<s.length;a+=1)O(t[a]);i=!0}},o(o){for(let a=0;a<t.length;a+=1)H(t[a]);i=!1},d(o){o&&R(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}const ui=5e3;function di(l,e,t){let{events:n=tl()}=e,i=1,s=[];const r=o=>a=>{s.push({id:i++,time:Date.now(),type:o,data:a}),t(0,s)};return Be(lt(1e3,()=>{const o=Date.now(),a=s.filter(f=>f.time+ui>=o);a.length!==s.length&&t(0,s=a)})),Be(n.on("error",r("error"))),It().has("debug")&&Be(n.on("debug",r("debug"))),l.$$set=o=>{"events"in o&&t(1,n=o.events)},[s,n]}class _i extends we{constructor(e){super(),ve(this,e,di,ci,_e,{events:1})}}function bl(l){return Object.prototype.toString.call(l)==="[object Date]"}function Jt(l,e){if(l===e||l!==l)return()=>l;const t=typeof l;if(t!==typeof e||Array.isArray(l)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(l)){const n=e.map((i,s)=>Jt(l[s],i));return i=>n.map(s=>s(i))}if(t==="object"){if(!l||!e)throw new Error("Object cannot be null");if(bl(l)&&bl(e)){l=l.getTime(),e=e.getTime();const s=e-l;return r=>new Date(l+r*s)}const n=Object.keys(e),i={};return n.forEach(s=>{i[s]=Jt(l[s],e[s])}),s=>{const r={};return n.forEach(o=>{r[o]=i[o](s)}),r}}if(t==="number"){const n=e-l;return i=>l+i*n}throw new Error(`Cannot interpolate ${t} values`)}function xe(l,e={}){const t=Fe(l);let n,i=l;function s(r,o){if(l==null)return t.set(l=r),Promise.resolve();i=r;let a=n,f=!1,{delay:c=0,duration:u=400,easing:m=Xt,interpolate:_=Jt}=rl(rl({},e),o);if(u===0)return a&&(a.abort(),a=null),t.set(l=i),Promise.resolve();const d=On()+c;let p;return n=Fn(v=>{if(v<d)return!0;f||(p=_(l,r),typeof u=="function"&&(u=u(l,r)),f=!0),a&&(a.abort(),a=null);const y=v-d;return y>u?(t.set(l=r),!1):(t.set(l=p(m(y/u))),!0)}),n.promise}return{set:s,update:(r,o)=>s(r(i,l),o),subscribe:t.subscribe}}function mi(l){let e,t,n,i,s;var r=l[0].svelteComponent;function o(a){return{props:{options:a[0].options,abort_wr:a[0].abort_wr,result:a[0].result,close:a[7]}}}return r&&(n=new r(o(l))),{c(){e=w("div"),t=w("div"),n&&de(n.$$.fragment),h(t,"class","flex pos_abs wrapper2 svelte-1c0izo5"),j(t,"max-width",l[2]+"px"),h(e,"class","flex flex_cx wrapper svelte-1c0izo5"),h(e,"style",i=""+(l[6]("left",l[3])+l[6]("top",l[4]))),Y(e,"show",l[5])},m(a,f){N(a,e,f),g(e,t),n&&fe(n,t,null),l[8](t),s=!0},p(a,[f]){const c={};if(f&1&&(c.options=a[0].options),f&1&&(c.abort_wr=a[0].abort_wr),f&1&&(c.result=a[0].result),r!==(r=a[0].svelteComponent)){if(n){ke();const u=n;H(u.$$.fragment,1,0,()=>{ce(u,1)}),Se()}r?(n=new r(o(a)),de(n.$$.fragment),O(n.$$.fragment,1),fe(n,t,null)):n=null}else r&&n.$set(c);(!s||f&4)&&j(t,"max-width",a[2]+"px"),(!s||f&24&&i!==(i=""+(a[6]("left",a[3])+a[6]("top",a[4]))))&&h(e,"style",i),(!s||f&32)&&Y(e,"show",a[5])},i(a){s||(n&&O(n.$$.fragment,a),s=!0)},o(a){n&&H(n.$$.fragment,a),s=!1},d(a){a&&R(e),n&&ce(n),l[8](null)}}}const Bt=10,yl=10,kl=4;function gi(l,e,t){let{modalContext:n={}}=e,i,s=2e4,r=null,o=null,a=!1,f=!1;const c=(d,p,v=y=>y)=>p===null?"":`${d}: ${v(p)};`,u=(d,p)=>c(d,p,v=>`${v}px`),m=async()=>{a||(a=!0,t(5,f=!1),await at(1e3),t(3,r=null),t(4,o=null),t(0,n._needDestroy=!0,n))};pt(async()=>{await ns(),await at(10),t(5,f=!a)}),Be(vs(()=>{var k,I,C,P;if(!i)return;const d=window.innerWidth,p=window.innerHeight;t(2,s=d-Bt*2);const v=i.offsetWidth,y=i.offsetHeight,b=v/2,M=y/2;let L=d/2,T=50+M;try{const B=(k=n==null?void 0:n.options)!=null?k:{};if(B!=null&&B.position&&(I=B.position)!=null&&I.target){const E=B.position.target.getBoundingClientRect();((C=B.position)==null?void 0:C.stick)==="bottom"&&(T=E.bottom+kl),((P=B.position)==null?void 0:P.stick)==="top"&&(T=E.top-kl-y),L=E.width/2+E.left}}catch{}L=Oe(b+Bt,L,d-b-Bt),T=Oe(yl,T,p-y-yl),t(3,r=Math.round(L)),t(4,o=Math.round(T))}));function _(d){Ne[d?"unshift":"push"](()=>{i=d,t(1,i)})}return l.$$set=d=>{"modalContext"in d&&t(0,n=d.modalContext)},[n,i,s,r,o,f,u,m,_]}class pi extends we{constructor(e){super(),ve(this,e,gi,mi,_e,{modalContext:0})}}function hi(l){var d,p;let e,t,n=((p=(d=l[0])==null?void 0:d.text)!=null?p:"")+"",i,s,r,o,a,f,c,u,m,_;return{c(){e=w("div"),t=w("div"),i=ae(n),s=D(),r=w("div"),o=w("button"),o.textContent="cancel",a=D(),f=w("div"),c=D(),u=w("button"),u.textContent="continue",h(t,"class","flex text"),h(o,"class","flex nowrap cursor_ptr unselect btn cancel svelte-1dvmulk"),j(f,"width","4px"),h(u,"class","flex nowrap cursor_ptr unselect btn continue svelte-1dvmulk"),h(r,"class","flex btnGroup svelte-1dvmulk"),h(e,"class","flex flex_clm modal svelte-1dvmulk")},m(v,y){N(v,e,y),g(e,t),g(t,i),g(e,s),g(e,r),g(r,o),l[8](o),g(r,a),g(r,f),g(r,c),g(r,u),m||(_=[$(o,"click",l[3]),$(u,"click",l[4])],m=!0)},p(v,[y]){var b,M;y&1&&n!==(n=((M=(b=v[0])==null?void 0:b.text)!=null?M:"")+"")&&be(i,n)},i:ue,o:ue,d(v){v&&R(e),l[8](null),m=!1,je(_)}}}function vi(l,e,t){let n,i=ue,s=()=>(i(),i=zt(o,d=>t(7,n=d)),o);l.$$.on_destroy.push(()=>i());let{options:r={}}=e,{abort_wr:o}=e;s();let{result:a}=e,{close:f}=e,c;const u=()=>{a.resolve(!1),f()},m=()=>{a.resolve(!0),f()};pt(()=>c.focus());function _(d){Ne[d?"unshift":"push"](()=>{c=d,t(2,c)})}return l.$$set=d=>{"options"in d&&t(0,r=d.options),"abort_wr"in d&&s(t(1,o=d.abort_wr)),"result"in d&&t(5,a=d.result),"close"in d&&t(6,f=d.close)},l.$$.update=()=>{l.$$.dirty&128&&n&&u()},[r,o,c,u,m,a,f,n,_]}class wi extends we{constructor(e){super(),ve(this,e,vi,hi,_e,{options:0,abort_wr:1,result:5,close:6})}}function Sl(l,e,t){const n=l.slice();return n[5]=e[t],n}function Ll(l,e){let t,n,i;return n=new pi({props:{modalContext:e[5]}}),{key:l,first:null,c(){t=Ue(),de(n.$$.fragment),this.first=t},m(s,r){N(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&1&&(o.modalContext=e[5]),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&R(t),ce(n,s)}}}function bi(l){let e=[],t=new Map,n,i,s=l[0];const r=o=>o[5].id;for(let o=0;o<s.length;o+=1){let a=Sl(l,s,o),f=r(a);t.set(f,e[o]=Ll(f,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=Ue()},m(o,a){for(let f=0;f<e.length;f+=1)e[f].m(o,a);N(o,n,a),i=!0},p(o,[a]){a&1&&(s=o[0],ke(),e=Ke(e,a,r,1,o,s,t,n.parentNode,tt,Ll,n,Sl),Se())},i(o){if(!i){for(let a=0;a<s.length;a+=1)O(e[a]);i=!0}},o(o){for(let a=0;a<e.length;a+=1)H(e[a]);i=!1},d(o){for(let a=0;a<e.length;a+=1)e[a].d(o);o&&R(n)}}}function yi(l,e,t){let{modules:n}=e,i=[],s=1;const r=a=>{i.push(a),t(0,i)},o=(a,f)=>{const c={type:a,options:f,id:s++,result:Ut(),abort_wr:Fe(!1)};switch(a){case"cancel/continue":c.svelteComponent=wi;break}return c.svelteComponent?(r(c),{abort:()=>c.abort_wr.set(!0),result:c.result.promise}):null};return Be(lt(1e3,()=>{const a=i.filter(f=>!f._needDestroy);a.length!==i.length&&t(0,i=a)})),n.addModule("modal",{createModal:o}),l.$$set=a=>{"modules"in a&&t(1,n=a.modules)},[i,n]}class ki extends we{constructor(e){super(),ve(this,e,yi,bi,_e,{modules:1})}}function Si(l){let e,t,n,i,s,r,o,a=l[5](l[1])+"",f,c,u,m,_;return{c(){e=w("div"),t=w("div"),n=ae(l[0]),i=D(),s=w("div"),r=D(),o=w("div"),f=ae(a),c=D(),u=w("div"),h(t,"class","flex nowrap lcKey svelte-6huedz"),j(s,"width","8px"),h(o,"class","flex nowrap lcVal svelte-6huedz"),h(u,"class","flex pos_abs liveRate svelte-6huedz"),j(u,"width",l[2]+"%"),h(e,"class","flex flex_grow_1 pos_rel item svelte-6huedz")},m(d,p){N(d,e,p),g(e,t),g(t,n),g(e,i),g(e,s),g(e,r),g(e,o),g(o,f),g(e,c),g(e,u),_=!0},p(d,[p]){(!_||p&1)&&be(n,d[0]),(!_||p&2)&&a!==(a=d[5](d[1])+"")&&be(f,a),(!_||p&4)&&j(u,"width",d[2]+"%")},i(d){_||(d&&He(()=>{m||(m=Ae(e,At,{},!0)),m.run(1)}),_=!0)},o(d){d&&(m||(m=Ae(e,At,{},!1)),m.run(0)),_=!1},d(d){d&&R(e),d&&m&&m.end()}}}function Li(l,e,t){let n,i,{key:s}=e,{duration:r}=e,{liveRate:o}=e;const a=xe(r);he(l,a,u=>t(1,n=u));const f=xe(o);he(l,f,u=>t(2,i=u));const c=u=>u<1e3?Math.round(u)+"ms":(u/1e3).toFixed(2)+"s";return l.$$set=u=>{"key"in u&&t(0,s=u.key),"duration"in u&&t(6,r=u.duration),"liveRate"in u&&t(7,o=u.liveRate)},l.$$.update=()=>{l.$$.dirty&64&&a.set(r),l.$$.dirty&128&&f.set(o)},[s,n,i,a,f,c,r,o]}class Mi extends we{constructor(e){super(),ve(this,e,Li,Si,_e,{key:0,duration:6,liveRate:7})}}function Ml(l,e,t){const n=l.slice();return n[3]=e[t],n}function Cl(l,e,t){const n=l.slice();return n[6]=e[t],n}function Tl(l){let e,t=[],n=new Map,i,s=[],r=new Map,o,a=l[1];const f=m=>m[6][0];for(let m=0;m<a.length;m+=1){let _=Cl(l,a,m),d=f(_);n.set(d,t[m]=Il(d,_))}let c=l[2];const u=m=>m[3].key;for(let m=0;m<c.length;m+=1){let _=Ml(l,c,m),d=u(_);r.set(d,s[m]=Dl(d,_))}return{c(){e=w("div");for(let m=0;m<t.length;m+=1)t[m].c();i=D();for(let m=0;m<s.length;m+=1)s[m].c();h(e,"class","pos_abs flex flex_clm unselect cnt svelte-1qapcdn")},m(m,_){N(m,e,_);for(let d=0;d<t.length;d+=1)t[d].m(e,null);g(e,i);for(let d=0;d<s.length;d+=1)s[d].m(e,null);o=!0},p(m,_){_&2&&(a=m[1],t=Ke(t,_,f,1,m,a,n,e,Un,Il,i,Cl)),_&4&&(c=m[2],ke(),s=Ke(s,_,u,1,m,c,r,e,tt,Dl,null,Ml),Se())},i(m){if(!o){for(let _=0;_<c.length;_+=1)O(s[_]);o=!0}},o(m){for(let _=0;_<s.length;_+=1)H(s[_]);o=!1},d(m){m&&R(e);for(let _=0;_<t.length;_+=1)t[_].d();for(let _=0;_<s.length;_+=1)s[_].d()}}}function Il(l,e){let t,n,i=e[6][0]+"",s,r,o,a,f,c=e[6][1]+"",u;return{key:l,first:null,c(){t=w("div"),n=w("div"),s=ae(i),r=D(),o=w("div"),a=D(),f=w("div"),u=ae(c),h(n,"class","flex nowrap lcKey svelte-1qapcdn"),j(o,"width","8px"),h(f,"class","flex nowrap lcVal svelte-1qapcdn"),h(t,"class","flex"),this.first=t},m(m,_){N(m,t,_),g(t,n),g(n,s),g(t,r),g(t,o),g(t,a),g(t,f),g(f,u)},p(m,_){e=m,_&2&&i!==(i=e[6][0]+"")&&be(s,i),_&2&&c!==(c=e[6][1]+"")&&be(u,c)},d(m){m&&R(t)}}}function Dl(l,e){let t,n,i;return n=new Mi({props:{key:e[3].key,duration:e[3].duration,liveRate:e[3].liveRate}}),{key:l,first:null,c(){t=Ue(),de(n.$$.fragment),this.first=t},m(s,r){N(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&4&&(o.key=e[3].key),r&4&&(o.duration=e[3].duration),r&4&&(o.liveRate=e[3].liveRate),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&R(t),ce(n,s)}}}function Ci(l){let e,t,n=l[0]&&Tl(l);return{c(){n&&n.c(),e=Ue()},m(i,s){n&&n.m(i,s),N(i,e,s),t=!0},p(i,[s]){i[0]?n?(n.p(i,s),s&1&&O(n,1)):(n=Tl(i),n.c(),O(n,1),n.m(e.parentNode,e)):n&&(ke(),H(n,1,1,()=>{n=null}),Se())},i(i){t||(O(n),t=!0)},o(i){H(n),t=!1},d(i){n&&n.d(i),i&&R(e)}}}const Ol=2e4;function Ti(l,e,t){let n=!1,i=[],s=[];return Be(lt(200,()=>{if(t(0,n=location.hash.indexOf("dev_stat")!==-1),n){t(1,i=[...cs()].filter(c=>c[1]));const r=ds(),o=Date.now(),a=[],f=[];for(const c of r.values()){const u=Oe(0,(c.timeUpdate+Ol-o)/Ol,1)*100;u||a.push(c.key),f.push({key:c.key,duration:c.duration,liveRate:u})}a.map(c=>r.delete(c)),t(2,s=f)}})),[n,i,s]}class Ii extends we{constructor(e){super(),ve(this,e,Ti,Ci,_e,{})}}function Di(l){let e,t,n,i,s,r,o,a,f;return{c(){e=w("div"),t=w("div"),n=w("div"),i=D(),s=w("div"),r=D(),o=w("div"),a=D(),f=w("div"),h(n,"class","pos_abs s1 svelte-fxby3d"),h(s,"class","pos_abs s2 svelte-fxby3d"),h(o,"class","pos_abs s3 svelte-fxby3d"),h(f,"class","pos_abs s4 svelte-fxby3d"),h(t,"class","flex pos_rel ellipsis svelte-fxby3d"),j(t,"transform","scale("+l[1]+")"),h(e,"class","flex"),j(e,"height",l[0]+"px"),j(e,"width",l[2]+"px")},m(c,u){N(c,e,u),g(e,t),g(t,n),g(t,i),g(t,s),g(t,r),g(t,o),g(t,a),g(t,f)},p(c,[u]){u&2&&j(t,"transform","scale("+c[1]+")"),u&1&&j(e,"height",c[0]+"px"),u&4&&j(e,"width",c[2]+"px")},i:ue,o:ue,d(c){c&&R(e)}}}function Oi(l,e,t){let n,i,{height:s=5}=e;return l.$$set=r=>{"height"in r&&t(0,s=r.height)},l.$$.update=()=>{l.$$.dirty&1&&t(2,n=s/.1625),l.$$.dirty&1&&t(1,i=s/13)},[s,i,n]}class ll extends we{constructor(e){super(),ve(this,e,Oi,Di,_e,{height:0})}}function Al(l){let e,t,n,i;return t=new ll({props:{height:6}}),{c(){e=w("div"),de(t.$$.fragment),h(e,"class","flex pos_abs loading svelte-15wz55f")},m(s,r){N(s,e,r),fe(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&He(()=>{n||(n=Ae(e,Ee,{},!0)),n.run(1)}),i=!0)},o(s){H(t.$$.fragment,s),s&&(n||(n=Ae(e,Ee,{},!1)),n.run(0)),i=!1},d(s){s&&R(e),ce(t),s&&n&&n.end()}}}function Ai(l){let e,t,n,i,s,r,o,a,f,c,u,m,_,d=l[0]&&Al();return{c(){e=w("div"),t=w("div"),n=D(),i=w("div"),i.textContent="offline",s=D(),r=w("div"),o=ae(`online\r
		`),a=w("div"),f=ae(l[2]),c=D(),d&&d.c(),h(t,"class","pos_abs h100 onlineProgressTrumb svelte-15wz55f"),j(t,"width",l[1]+"%"),h(i,"class","flex flex_cx flex_cy pos_abs w100 h100 onlineProgressTrackLabel label2 svelte-15wz55f"),Y(i,"hideR",l[1]>=1),h(a,"class","pos_abs onlineProgressTrumbLastTime svelte-15wz55f"),h(r,"class","flex flex_cx flex_cy pos_abs w100 h100 onlineProgressTrackLabel  svelte-15wz55f"),Y(r,"hideL",l[1]<1),h(e,"class","flex flex_cx flex_cy flex_grow_1 onlineProgressTrack pos_rel overhide unselect cursor_ptr svelte-15wz55f")},m(p,v){N(p,e,v),g(e,t),g(e,n),g(e,i),g(e,s),g(e,r),g(r,o),g(r,a),g(a,f),g(e,c),d&&d.m(e,null),u=!0,m||(_=$(e,"click",l[8]),m=!0)},p(p,[v]){(!u||v&2)&&j(t,"width",p[1]+"%"),(!u||v&2)&&Y(i,"hideR",p[1]>=1),(!u||v&4)&&be(f,p[2]),(!u||v&2)&&Y(r,"hideL",p[1]<1),p[0]?d?v&1&&O(d,1):(d=Al(),d.c(),O(d,1),d.m(e,null)):d&&(ke(),H(d,1,1,()=>{d=null}),Se())},i(p){u||(O(d),u=!0)},o(p){H(d),u=!1},d(p){p&&R(e),d&&d.d(),m=!1,_()}}}function Fi(l,e,t){let n,i,s,{endTime:r=0}=e,{intervalTime:o=1}=e,{loading:a=!1}=e;const f=xe(0);he(l,f,d=>t(7,s=d));let c=0;function u(){const d=Math.max(0,r-Date.now());t(1,c=Math.floor(Oe(0,d/o,1)*100)),Qe(f,s=Math.ceil(d/1e3),s)}Be(lt(1e3,u));const m=d=>{const p=Math.floor(d%60);d/=60;const v=Math.floor(d%60);d/=60;const y=Math.floor(d),b=[];return(b.length||y)&&b.push(`${String(y).padStart(b.length?2:1,"0")}h`),(b.length||v)&&b.push(`${String(v).padStart(b.length?2:1,"0")}m`),(b.length||p)&&b.push(`${String(p).padStart(b.length?2:1,"0")}s`),b.join(" ")};function _(d){el.call(this,l,d)}return l.$$set=d=>{"endTime"in d&&t(4,r=d.endTime),"intervalTime"in d&&t(5,o=d.intervalTime),"loading"in d&&t(0,a=d.loading)},l.$$.update=()=>{l.$$.dirty&128&&t(6,n=Math.ceil(s)),l.$$.dirty&64&&t(2,i=m(n))},[a,c,i,f,r,o,n,s,_]}class Ei extends we{constructor(e){super(),ve(this,e,Fi,Ai,_e,{endTime:4,intervalTime:5,loading:0})}}function zi(l){let e;return{c(){e=ae("\xA0")},m(t,n){N(t,e,n)},p:ue,d(t){t&&R(e)}}}function ji(l){let e,t=l[2].username+"",n;return{c(){e=ae("@"),n=ae(t)},m(i,s){N(i,e,s),N(i,n,s)},p(i,s){s&4&&t!==(t=i[2].username+"")&&be(n,t)},d(i){i&&R(e),i&&R(n)}}}function Ri(l){var F,G;let e,t,n,i,s=((F=l[2].first_name)!=null?F:"")+"",r,o,a,f,c,u=((G=l[2].last_name)!=null?G:"")+"",m,_,d,p,v,y,b,M,L,T,k,I,C,P,B;function E(V,q){return V[2].username?ji:zi}let x=E(l),W=x(l);return T=new Ei({props:{intervalTime:l[1],endTime:l[0],loading:l[3]}}),T.$on("click",l[8]),{c(){e=w("div"),t=w("div"),n=w("div"),i=w("div"),r=ae(s),o=D(),a=w("div"),f=D(),c=w("div"),m=ae(u),_=ae("\xA0"),d=D(),p=w("div"),W.c(),v=D(),y=w("div"),y.innerHTML='<img src="assets/icons/logout.png" draggable="false" class="pos_abs w100 h100 svelte-1qt21qp"/>',b=D(),M=w("div"),L=D(),de(T.$$.fragment),k=D(),I=w("div"),j(a,"width","8px"),h(n,"class","flex nowrap textOverEllipsis name svelte-1qt21qp"),h(p,"class","nowrap textOverEllipsis username svelte-1qt21qp"),h(y,"class","pos_abs btnLogout svelte-1qt21qp"),h(t,"class","flex flex_clm cursor_ptr pos_rel unselect operator svelte-1qt21qp"),j(M,"height","8px"),j(I,"height","8px"),h(e,"class","flex flex_clm cnt svelte-1qt21qp")},m(V,q){N(V,e,q),g(e,t),g(t,n),g(n,i),g(i,r),g(n,o),g(n,a),g(n,f),g(n,c),g(c,m),g(c,_),g(t,d),g(t,p),W.m(p,null),g(t,v),g(t,y),g(e,b),g(e,M),g(e,L),fe(T,e,null),g(e,k),g(e,I),C=!0,P||(B=$(y,"click",l[7]),P=!0)},p(V,[q]){var U,J;(!C||q&4)&&s!==(s=((U=V[2].first_name)!=null?U:"")+"")&&be(r,s),(!C||q&4)&&u!==(u=((J=V[2].last_name)!=null?J:"")+"")&&be(m,u),x===(x=E(V))&&W?W.p(V,q):(W.d(1),W=x(V),W&&(W.c(),W.m(p,null)));const S={};q&2&&(S.intervalTime=V[1]),q&1&&(S.endTime=V[0]),q&8&&(S.loading=V[3]),T.$set(S)},i(V){C||(O(T.$$.fragment,V),C=!0)},o(V){H(T.$$.fragment,V),C=!1},d(V){V&&R(e),W.d(),ce(T),P=!1,B()}}}function Ui(l,e,t){let n,i,s,{app:r}=e;const{operatorSelf_r:o,operatorSelfLastOnlineInfo_r:a,operatorSelfLastOnlineInfoLoading_r:f,operatorSelfLastOnline_SetOnlineFlag:c}=r;he(l,o,y=>t(2,i=y)),he(l,a,y=>t(10,n=y)),he(l,f,y=>t(3,s=y));const u=()=>qn(null);let m=0,_=1;const d=y=>{if(!y){t(0,m=0),t(1,_=1);return}t(0,m=+new Date(y.offline_at)),t(1,_=Oe(1,(y.interval|0)*1e3,1e9))};let p=!1;const v=async()=>{var y;!((y=r.appConfig)!=null&&y.operatorSelf_CanSetOnline)||p||(p=!0,await c(!0),p=!1)};return l.$$set=y=>{"app"in y&&t(9,r=y.app)},l.$$.update=()=>{l.$$.dirty&1024&&d(n)},[m,_,i,s,o,a,f,u,v,r,n]}class Ni extends we{constructor(e){super(),ve(this,e,Ui,Ri,_e,{app:9})}}const ht=(l,e)=>{let t=null,n=null,i=!0;const s=()=>{if(!i)return;const o=l.parentNode;if(o){const a=o.getBoundingClientRect();(t!==a.width||n!==a.height)&&(t=a.width,n=a.height,l.style.width=`${t}px`,l.style.height=`${n}px`,e&&e.set(a))}setTimeout(s,10)};return s(),jt("useAbsSizeFromParent"),{destroy:()=>{i=!1,Rt("useAbsSizeFromParent")}}},Hi=(l,e)=>{let t=null,n=null,i=null,s=null,r=!0;const o=()=>{if(!r)return;const f=l.getBoundingClientRect();(t!==f.width||n!==f.height||i!==f.x||s!==f.y)&&(t=f.width,n=f.height,i=f.x,s=f.y,e&&e.set(f)),setTimeout(o,10)};return o(),jt("useWatchNodeBBox"),{destroy:()=>{r=!1,Rt("useWatchNodeBBox")}}};function Pi(l){let e,t,n,i,s,r,o,a,f,c,u,m,_,d,p,v,y;return{c(){e=w("div"),t=w("div"),n=w("div"),i=D(),s=w("div"),r=D(),o=w("div"),a=D(),f=w("div"),c=D(),u=w("div"),m=D(),_=w("div"),d=D(),p=w("div"),v=D(),y=w("div"),h(n,"class","svelte-1lltvmx"),h(s,"class","svelte-1lltvmx"),h(o,"class","svelte-1lltvmx"),h(f,"class","svelte-1lltvmx"),h(u,"class","svelte-1lltvmx"),h(_,"class","svelte-1lltvmx"),h(p,"class","svelte-1lltvmx"),h(y,"class","svelte-1lltvmx"),h(t,"class","lds-roller svelte-1lltvmx"),j(t,"transform","scale("+l[2]+")"),j(t,"--loadingItemColor",l[1]),h(e,"class","flex"),j(e,"height",l[0]+"px"),j(e,"width",l[0]+"px")},m(b,M){N(b,e,M),g(e,t),g(t,n),g(t,i),g(t,s),g(t,r),g(t,o),g(t,a),g(t,f),g(t,c),g(t,u),g(t,m),g(t,_),g(t,d),g(t,p),g(t,v),g(t,y)},p(b,[M]){M&4&&j(t,"transform","scale("+b[2]+")"),M&2&&j(t,"--loadingItemColor",b[1]),M&1&&j(e,"height",b[0]+"px"),M&1&&j(e,"width",b[0]+"px")},i:ue,o:ue,d(b){b&&R(e)}}}function qi(l,e,t){let n,{size:i=80}=e,{color:s="#000"}=e;return l.$$set=r=>{"size"in r&&t(0,i=r.size),"color"in r&&t(1,s=r.color)},l.$$.update=()=>{l.$$.dirty&1&&t(2,n=i/80)},[i,s,n]}class vt extends we{constructor(e){super(),ve(this,e,qi,Pi,_e,{size:0,color:1})}}function Fl(l){let e,t,n,i;return t=new vt({props:{color:"#fff",size:"32"}}),{c(){e=w("div"),de(t.$$.fragment),h(e,"class","pos_abs loading svelte-9eoyjy")},m(s,r){N(s,e,r),fe(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&He(()=>{n||(n=Ae(e,Ee,{},!0)),n.run(1)}),i=!0)},o(s){H(t.$$.fragment,s),s&&(n||(n=Ae(e,Ee,{},!1)),n.run(0)),i=!1},d(s){s&&R(e),ce(t),s&&n&&n.end()}}}function El(l){let e,t,n,i;return t=new vt({props:{color:"#fff",size:"24"}}),{c(){e=w("div"),de(t.$$.fragment),h(e,"class","pos_abs flex flex_cy h100 loading svelte-9eoyjy")},m(s,r){N(s,e,r),fe(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&He(()=>{n||(n=Ae(e,Ee,{},!0)),n.run(1)}),i=!0)},o(s){H(t.$$.fragment,s),s&&(n||(n=Ae(e,Ee,{},!1)),n.run(0)),i=!1},d(s){s&&R(e),ce(t),s&&n&&n.end()}}}function Bi(l){var L;let e,t,n,i,s,r,o,a=((L=l[0])!=null?L:0)+"",f,c,u,m,_,d,p,v,y,b=l[1]&&Fl(),M=l[2]&&El();return{c(){e=w("div"),t=w("div"),n=w("div"),n.textContent="New leads",i=D(),b&&b.c(),s=D(),r=w("div"),o=w("div"),f=ae(a),c=D(),u=w("div"),m=D(),_=w("div"),M&&M.c(),d=ae(`\r
		Get one`),h(n,"class","flex mainLabel svelte-9eoyjy"),h(o,"class","flex labelCountNum svelte-9eoyjy"),h(r,"class","flex flex_cx flex_cy labelCount svelte-9eoyjy"),h(t,"class","flex flex_cx flex_cy flex_clm header pos_rel w100 svelte-9eoyjy"),j(u,"height","4px"),h(_,"class","flex flex_cx flex_cy cursor_ptr noselect pos_rel bntMain svelte-9eoyjy"),Y(_,"disabled",!l[0]&&!l[2]&&!l[3]),Y(_,"btnLoading",l[2]),Y(_,"animationDone",l[3]==="done"),Y(_,"animationFail",l[3]==="fail"),h(e,"class","flex flex_clm wrapMain flex_grow_1 w100 unselect svelte-9eoyjy")},m(T,k){N(T,e,k),g(e,t),g(t,n),g(t,i),b&&b.m(t,null),g(t,s),g(t,r),g(r,o),g(o,f),g(e,c),g(e,u),g(e,m),g(e,_),M&&M.m(_,null),g(_,d),p=!0,v||(y=$(_,"click",l[4]),v=!0)},p(T,[k]){var I;T[1]?b?k&2&&O(b,1):(b=Fl(),b.c(),O(b,1),b.m(t,s)):b&&(ke(),H(b,1,1,()=>{b=null}),Se()),(!p||k&1)&&a!==(a=((I=T[0])!=null?I:0)+"")&&be(f,a),T[2]?M?k&4&&O(M,1):(M=El(),M.c(),O(M,1),M.m(_,d)):M&&(ke(),H(M,1,1,()=>{M=null}),Se()),(!p||k&13)&&Y(_,"disabled",!T[0]&&!T[2]&&!T[3]),(!p||k&4)&&Y(_,"btnLoading",T[2]),(!p||k&8)&&Y(_,"animationDone",T[3]==="done"),(!p||k&8)&&Y(_,"animationFail",T[3]==="fail")},i(T){p||(O(b),O(M),p=!0)},o(T){H(b),H(M),p=!1},d(T){T&&R(e),b&&b.d(),M&&M.d(),v=!1,y()}}}function Gi(l,e,t){var c,u;let{app:n}=e,i=0,s=!0,r=!1,o=null;const a=Nt(1e3,()=>t(3,o=null)),f=async()=>{if(r||!i)return;t(2,r=!0);const m=await n.api.lead_AssignOneLead();t(3,o=m?"done":"fail"),a(),t(2,r=!1)};return Be(lt(Oe(100,((u=(c=n==null?void 0:n.appConfig)==null?void 0:c.updateIntervals)==null?void 0:u.new_leads_count)|0,36e5),async()=>{var m;t(0,i=((m=await n.api.lead_GetUnassignedLeadCount())==null?void 0:m.count)|0),t(1,s=!1)},!1)),l.$$set=m=>{"app"in m&&t(5,n=m.app)},[i,s,r,o,f,n]}class xi extends we{constructor(e){super(),ve(this,e,Gi,Bi,_e,{app:5})}}function Wi(l){let e,t,n,i,s,r,o,a,f,c,u,m,_,d,p,v,y,b;return{c(){e=w("label"),t=w("input"),n=D(),i=Ye("svg"),s=Ye("symbol"),r=Ye("path"),o=Ye("defs"),a=Ye("mask"),f=Ye("use"),c=Ye("use"),u=Ye("path"),m=D(),_=Ye("svg"),d=Ye("path"),p=Ye("path"),v=Ye("path"),h(t,"type","checkbox"),h(t,"class","svelte-13drl8w"),h(r,"d","M5.22003 7.26C5.72003 7.76 7.57 9.7 8.67 11.45C12.2 6.05 15.65 3.5 19.19 1.69"),h(r,"fill","none"),h(r,"stroke-width","2.25"),h(r,"stroke-linecap","round"),h(r,"stroke-linejoin","round"),h(s,"id","tick-path"),h(s,"viewBox","0 0 21 18"),h(s,"xmlns","http://www.w3.org/2000/svg"),h(f,"class","tick mask svelte-13drl8w"),h(f,"href","#tick-path"),h(a,"id","tick"),h(c,"class","tick svelte-13drl8w"),h(c,"href","#tick-path"),h(c,"stroke","currentColor"),h(u,"fill","white"),h(u,"mask","url(#tick)"),h(u,"d","M18 9C18 10.4464 17.9036 11.8929 17.7589 13.1464C17.5179 15.6054 15.6054 17.5179 13.1625 17.7589C11.8929 17.9036 10.4464 18 9 18C7.55357 18 6.10714 17.9036 4.85357 17.7589C2.39464 17.5179 0.498214 15.6054 0.241071 13.1464C0.0964286 11.8929 0 10.4464 0 9C0 7.55357 0.0964286 6.10714 0.241071 4.8375C0.498214 2.39464 2.39464 0.482143 4.85357 0.241071C6.10714 0.0964286 7.55357 0 9 0C10.4464 0 11.8929 0.0964286 13.1625 0.241071C15.6054 0.482143 17.5179 2.39464 17.7589 4.8375C17.9036 6.10714 18 7.55357 18 9Z"),h(i,"viewBox","0 0 21 18"),h(i,"class","svelte-13drl8w"),h(d,"d","M5.88086 5.89441L9.53504 4.26746"),h(p,"d","M5.5274 8.78838L9.45391 9.55161"),h(v,"d","M3.49371 4.22065L5.55387 0.79198"),h(_,"class","lines svelte-13drl8w"),h(_,"viewBox","0 0 11 11"),h(e,"class","checkbox svelte-13drl8w")},m(M,L){N(M,e,L),g(e,t),t.checked=l[0],g(e,n),g(e,i),g(i,s),g(s,r),g(i,o),g(o,a),g(a,f),g(i,c),g(i,u),g(e,m),g(e,_),g(_,d),g(_,p),g(_,v),y||(b=$(t,"change",l[1]),y=!0)},p(M,[L]){L&1&&(t.checked=M[0])},i:ue,o:ue,d(M){M&&R(e),y=!1,b()}}}function Yi(l,e,t){let{checked:n=!1}=e;function i(){n=this.checked,t(0,n)}return l.$$set=s=>{"checked"in s&&t(0,n=s.checked)},[n,i]}class Vi extends we{constructor(e){super(),ve(this,e,Yi,Wi,_e,{checked:0})}}function zl(l){let e,t=l[13](l[4])+"",n;return{c(){e=w("div"),n=ae(t),h(e,"class","pos_abs flex flex_cx flex_cy lastTime svelte-n8zo8q")},m(i,s){N(i,e,s),g(e,n)},p(i,s){s&16&&t!==(t=i[13](i[4])+"")&&be(n,t)},d(i){i&&R(e)}}}function jl(l){var i;let e,t=((i=l[3])==null?void 0:i.unread_messages_count)+"",n;return{c(){e=w("div"),n=ae(t),h(e,"class","pos_abs flex flex_cx flex_cy unreadMsgs svelte-n8zo8q")},m(s,r){N(s,e,r),g(e,n)},p(s,r){var o;r&8&&t!==(t=((o=s[3])==null?void 0:o.unread_messages_count)+"")&&be(n,t)},d(s){s&&R(e)}}}function Ji(l){var me,ie,le,K,Z,ne,Me,De,Ve,ee,Te;let e,t,n,i,s,r,o=((le=(ie=(me=l[3])==null?void 0:me.lead)==null?void 0:ie.first_name)!=null?le:"")+"",a,f,c,u,m,_=((ne=(Z=(K=l[3])==null?void 0:K.lead)==null?void 0:Z.last_name)!=null?ne:"")+"",d,p,v,y,b=((Ve=(De=(Me=l[3])==null?void 0:Me.last_message)==null?void 0:De.text)!=null?Ve:"")+"",M,L,T,k,I,C,P,B,E=((ee=l[5])==null?void 0:ee.title)+"",x,W,F,G,V,q,S,U=l[4]&&zl(l),J=((Te=l[3])==null?void 0:Te.unread_messages_count)&&jl(l);return{c(){e=w("div"),t=w("div"),n=w("div"),i=w("div"),s=D(),r=w("div"),a=ae(o),f=D(),c=w("div"),u=D(),m=w("div"),d=ae(_),p=ae("\xA0"),v=D(),y=w("div"),M=ae(b),L=ae("\xA0"),T=D(),k=w("div"),I=w("div"),C=w("img"),B=D(),x=ae(E),W=D(),F=w("div"),G=D(),U&&U.c(),V=D(),J&&J.c(),j(i,"width","8px"),j(c,"width","8px"),h(n,"class","flex nowrap textOverEllipsis userFirstLastName pos_rel svelte-n8zo8q"),h(y,"class","nowrap textOverEllipsis lastMessage pos_rel svelte-n8zo8q"),Re(C.src,P="assets/icons/status1.png")||h(C,"src",P),h(C,"draggable","false"),h(C,"class","pos_abs statusIcon svelte-n8zo8q"),h(I,"class","flex flex_cy leadStatus pos_rel svelte-n8zo8q"),j(I,"background",l[5].bgColor),j(I,"color",l[5].color),j(F,"width","4px"),h(k,"class","flex"),h(t,"class","flex flex_clm cursor_ptr item flex_cx unselect pos_rel svelte-n8zo8q"),j(t,"height",l[0]+"px"),Y(t,"active",l[1]===l[7]),Y(t,"disabled",l[12](l[3])),h(e,"class","pos_abs w100 cntWrapper svelte-n8zo8q"),j(e,"transform","translate3d(0px, "+(l[6]+l[2])+"px, 0px)")},m(pe,Le){N(pe,e,Le),g(e,t),g(t,n),g(n,i),g(n,s),g(n,r),g(r,a),g(n,f),g(n,c),g(n,u),g(n,m),g(m,d),g(m,p),g(t,v),g(t,y),g(y,M),g(y,L),g(t,T),g(t,k),g(k,I),g(I,C),g(I,B),g(I,x),g(k,W),g(k,F),g(t,G),U&&U.m(t,null),g(t,V),J&&J.m(t,null),q||(S=$(t,"click",l[11]),q=!0)},p(pe,[Le]){var ze,A,z,X,re,oe,se,Q,ge,ye,te;Le&8&&o!==(o=((z=(A=(ze=pe[3])==null?void 0:ze.lead)==null?void 0:A.first_name)!=null?z:"")+"")&&be(a,o),Le&8&&_!==(_=((oe=(re=(X=pe[3])==null?void 0:X.lead)==null?void 0:re.last_name)!=null?oe:"")+"")&&be(d,_),Le&8&&b!==(b=((ge=(Q=(se=pe[3])==null?void 0:se.last_message)==null?void 0:Q.text)!=null?ge:"")+"")&&be(M,b),Le&32&&E!==(E=((ye=pe[5])==null?void 0:ye.title)+"")&&be(x,E),Le&32&&j(I,"background",pe[5].bgColor),Le&32&&j(I,"color",pe[5].color),pe[4]?U?U.p(pe,Le):(U=zl(pe),U.c(),U.m(t,V)):U&&(U.d(1),U=null),(te=pe[3])!=null&&te.unread_messages_count?J?J.p(pe,Le):(J=jl(pe),J.c(),J.m(t,null)):J&&(J.d(1),J=null),Le&1&&j(t,"height",pe[0]+"px"),Le&130&&Y(t,"active",pe[1]===pe[7]),Le&4104&&Y(t,"disabled",pe[12](pe[3])),Le&68&&j(e,"transform","translate3d(0px, "+(pe[6]+pe[2])+"px, 0px)")},i:ue,o:ue,d(pe){pe&&R(e),U&&U.d(),J&&J.d(),q=!1,S()}}}function Xi(l,e,t){let n,i,s,r,o,a,{app:f}=e;const{dialogMap_r:c,dialogActiveID_r:u,dialogActiveID_Set:m}=f;he(l,c,k=>t(16,r=k)),he(l,u,k=>t(7,a=k));let{height:_=54}=e,{dialog_id:d}=e,{y:p=0}=e,{scrollY:v=0}=e;const y=xe(p);he(l,y,k=>t(6,o=k));const b=k=>{n&&!M(n)&&m(n.id)},M=k=>{var I;return((I=k==null?void 0:k.lead)==null?void 0:I.status)==="DL"},L=k=>{if(!k)return"";const I=P=>String(P).padStart(2,"0"),C=new Date;return k=new Date(k),k.getYear()===C.getYear()&&k.getMonth()===C.getMonth()?k.getDate()===C.getDate()?`${I(k.getHours())}:${I(k.getMinutes())}`:`${I(k.getDate())}d ${I(k.getHours())}:${I(k.getMinutes())}`:`${I(k.getDate())}.${I(k.getMonth())}.${k.getFullYear()}`},T=k=>{var I,C,P;return(P=(I=k==null?void 0:k.last_message)==null?void 0:I.received_at)!=null?P:(C=k==null?void 0:k.lead)==null?void 0:C.date_joined};return l.$$set=k=>{"app"in k&&t(14,f=k.app),"height"in k&&t(0,_=k.height),"dialog_id"in k&&t(1,d=k.dialog_id),"y"in k&&t(15,p=k.y),"scrollY"in k&&t(2,v=k.scrollY)},l.$$.update=()=>{l.$$.dirty&32768&&Qe(y,o=p,o),l.$$.dirty&65538&&t(3,n=r[d]),l.$$.dirty&16392&&t(5,i=f.lead_GetStatusOrDefault(n==null?void 0:n.lead)),l.$$.dirty&8&&t(4,s=T(n))},[_,d,v,n,s,i,o,a,c,u,y,b,M,L,f,p,r]}class Ki extends we{constructor(e){super(),ve(this,e,Xi,Ji,_e,{app:14,height:0,dialog_id:1,y:15,scrollY:2})}}function Zi(l){let e,t,n,i;return{c(){e=w("div"),t=w("div"),h(t,"class","pos_abs thumb w100 svelte-5ca5ia"),j(t,"height",l[1]+"px"),j(t,"transform","translate(0px, "+l[5](l[0],l[2],l[1])+"px)"),Y(t,"active",l[3]),h(e,"class","pos_rel h100 unselect line svelte-5ca5ia"),Y(e,"active",l[3])},m(s,r){N(s,e,r),g(e,t),n||(i=[$(window,"mousemove",l[7]),$(window,"mouseup",l[8]),$(window,"blur",l[8]),$(t,"mousedown",l[6]),ft(Hi.call(null,e,l[4])),$(e,"mousedown",l[9])],n=!0)},p(s,[r]){r&2&&j(t,"height",s[1]+"px"),r&7&&j(t,"transform","translate(0px, "+s[5](s[0],s[2],s[1])+"px)"),r&8&&Y(t,"active",s[3]),r&8&&Y(e,"active",s[3])},i:ue,o:ue,d(s){s&&R(e),n=!1,je(i)}}}function Qi(l,e,t){let n;const i=M=>Oe(0,Array.isArray(M)?M[0]:M,1);let{value_in:s=0}=e,{value_out:r=i(s)}=e,{thumb_Height:o=20}=e,{thumb_HeightRate:a=null}=e;const f=Fe(null);he(l,f,M=>t(2,n=M));const c=()=>n?n.height-o:1,u=M=>n?M*c():0,m=()=>{if(!n)return 1;if(a===null)return o;t(1,o=Oe(.1,a,1)*n.height)};let _=null;const d=M=>{!n||t(3,_={y:M.clientY,value_out:r})},p=M=>{if(!n||!_)return;const L=M.clientY-_.y;if(n.height){const T=L/c();t(0,r=Oe(0,_.value_out+T,1))}},v=M=>{t(3,_=null)},y=M=>{!n||_||(t(0,r=Oe(0,(M.clientY-n.y-o/2)/c(),1)),t(3,_={y:M.clientY,value_out:r}))},b=()=>{if(!n)return 0;_||t(0,r=i(s))};return l.$$set=M=>{"value_in"in M&&t(10,s=M.value_in),"value_out"in M&&t(0,r=M.value_out),"thumb_Height"in M&&t(1,o=M.thumb_Height),"thumb_HeightRate"in M&&t(11,a=M.thumb_HeightRate)},l.$$.update=()=>{l.$$.dirty&2052&&m(),l.$$.dirty&1024&&b()},[r,o,n,_,f,u,d,p,v,y,s,a]}class Bn extends we{constructor(e){super(),ve(this,e,Qi,Zi,_e,{value_in:10,value_out:0,thumb_Height:1,thumb_HeightRate:11})}}const{Map:$i}=os;function Rl(l,e,t){const n=l.slice();return n[24]=e[t],n}function Ul(l,e){let t,n,i;return n=new Ki({props:{app:e[0],dialog_id:e[24].dialog_id,scrollY:-e[2],y:e[24].y}}),{key:l,first:null,c(){t=Ue(),de(n.$$.fragment),this.first=t},m(s,r){N(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&1&&(o.app=e[0]),r&16&&(o.dialog_id=e[24].dialog_id),r&4&&(o.scrollY=-e[2]),r&16&&(o.y=e[24].y),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&R(t),ce(n,s)}}}function Nl(l){let e,t,n,i;function s(o){l[14](o)}let r={value_in:l[5],thumb_HeightRate:l[6]};return l[1]!==void 0&&(r.value_out=l[1]),t=new Bn({props:r}),Ne.push(()=>ot(t,"value_out",s)),{c(){e=w("div"),de(t.$$.fragment),h(e,"class","pos_abs h100 dialogScroll svelte-1l0pdn")},m(o,a){N(o,e,a),fe(t,e,null),i=!0},p(o,a){const f={};a&32&&(f.value_in=o[5]),a&64&&(f.thumb_HeightRate=o[6]),!n&&a&2&&(n=!0,f.value_out=o[1],rt(()=>n=!1)),t.$set(f)},i(o){i||(O(t.$$.fragment,o),i=!0)},o(o){H(t.$$.fragment,o),i=!1},d(o){o&&R(e),ce(t)}}}function Hl(l){let e,t,n,i,s;return{c(){e=w("div"),e.innerHTML='<img class="flex" draggable="false" style="filter: invert(1);" src="assets/icons/arrow-up.png"/>',h(e,"class","flex pos_abs cursor_ptr btnScrollUp svelte-1l0pdn")},m(r,o){N(r,e,o),n=!0,i||(s=$(e,"click",l[15]),i=!0)},p:ue,i(r){n||(r&&He(()=>{t||(t=Ae(e,Ee,{},!0)),t.run(1)}),n=!0)},o(r){r&&(t||(t=Ae(e,Ee,{},!1)),t.run(0)),n=!1},d(r){r&&R(e),r&&t&&t.end(),i=!1,s()}}}function er(l){let e,t,n=[],i=new $i,s,r,o,a,f,c=l[4];const u=d=>d[24].dialog_id;for(let d=0;d<c.length;d+=1){let p=Rl(l,c,d),v=u(p);i.set(v,n[d]=Ul(v,p))}let m=l[6]<1&&Nl(l),_=l[6]<1&&l[7]&&Hl(l);return{c(){e=w("div"),t=w("div");for(let d=0;d<n.length;d+=1)n[d].c();s=D(),m&&m.c(),r=D(),_&&_.c(),h(t,"class","flex overhide pos_rel"),h(e,"class","flex flex_grow_1 pos_rel"),j(e,"--itemHeight",et+"px")},m(d,p){N(d,e,p),g(e,t);for(let v=0;v<n.length;v+=1)n[v].m(t,null);g(e,s),m&&m.m(e,null),g(e,r),_&&_.m(e,null),o=!0,a||(f=[ft(ht.call(null,t,l[8])),$(e,"wheel",l[10],{passive:!0})],a=!0)},p(d,[p]){p&21&&(c=d[4],ke(),n=Ke(n,p,u,1,d,c,i,t,tt,Ul,null,Rl),Se()),d[6]<1?m?(m.p(d,p),p&64&&O(m,1)):(m=Nl(d),m.c(),O(m,1),m.m(e,r)):m&&(ke(),H(m,1,1,()=>{m=null}),Se()),d[6]<1&&d[7]?_?(_.p(d,p),p&192&&O(_,1)):(_=Hl(d),_.c(),O(_,1),_.m(e,null)):_&&(ke(),H(_,1,1,()=>{_=null}),Se())},i(d){if(!o){for(let p=0;p<c.length;p+=1)O(n[p]);O(m),O(_),o=!0}},o(d){for(let p=0;p<n.length;p+=1)H(n[p]);H(m),H(_),o=!1},d(d){d&&R(e);for(let p=0;p<n.length;p+=1)n[p].d();m&&m.d(),_&&_.d(),a=!1,je(f)}}}const et=54;function tr(l,e,t){let n,i,s=ue,r=()=>(s(),s=zt(d,W=>t(13,i=W)),d),o;l.$$.on_destroy.push(()=>s());let{app:a}=e;const{dialogMap_SetDialogList:f}=a;let{filter:c={}}=e;const u=W=>{var F,G;return[c.filterUnreadFirst?1:0,(F=c.filterTag)!=null?F:"",(G=c.filterStatus)!=null?G:""].join("/")};let m={},_=null,d=Fe(null);r();function p(){const W={...c},F=u();m[F]||(m[F]=ps({fLoad:G=>(G={unread_first:W.filterUnreadFirst?1:0,...G},W.filterTag&&(G.tag=W.filterTag),W.filterStatus&&(G.status=W.filterStatus),a.api.dialog_GetList(G)),updateInterval:500,isLoadEnd:!1,onUpdateItemList:f})),_!==m[F]&&([...Object.values(m)].map(G=>G.pause()),_=m[F],_.resume(),console.log({filterHash:F}),r(t(3,d=_.getData_r())))}Be(()=>[...Object.values(m)].map(W=>W.destroy()));let v=[];const y=Fe(null);he(l,y,W=>t(12,n=W));let b=0,M=0,L=1,T=0,k=xe(T,{duration:200});he(l,k,W=>t(2,o=W));function I(){if(!n||!i)return;const W=Math.max(1,Math.floor(n.height)),F=i.total*et,G=F-W;t(6,L=F?Oe(0,W/F,1):1),G<0?T=0:T=M*G,Qe(k,o=T,o)}let C=!1;function P(){if(!n||!i)return;const W=i,F=Math.max(1,Math.floor(n.height)),G=Math.ceil(F/et);i.total*et;let q=Math.max(0,Math.floor(o/et)-1);const S=G+2;q>W.total&&(q=Math.max(0,W.total-S)),_&&_.setRange(q,S);const U=[];for(let J=q,me=0;me<S&&J<W.total;me++,J++){const ie=W.list[J];U.push({index:J,item:ie,y:J*et})}t(4,v=[...new Map(U.filter(J=>J.item).map(J=>[J.item.id,J]))].map(([J,me])=>({dialog_id:me.item.id,y:me.y}))),t(7,C=q>1)}const B=W=>{if(!n||!i)return;const F=i,G=Math.max(1,Math.floor(n.height)),q=F.total*et-G;if(q<0)return;const S=W.deltaY>0?1:-1;t(5,b=[M+et/q*S])};function E(W){M=W,t(1,M)}const x=()=>t(5,b=[0]);return l.$$set=W=>{"app"in W&&t(0,a=W.app),"filter"in W&&t(11,c=W.filter)},l.$$.update=()=>{l.$$.dirty&2048&&p(),l.$$.dirty&12290&&I(),l.$$.dirty&12292&&P()},[a,M,o,d,v,b,L,C,y,k,B,c,n,i,E,x]}class lr extends we{constructor(e){super(),ve(this,e,tr,er,_e,{app:0,filter:11})}}function Pl(l,e,t){const n=l.slice();return n[6]=e[t],n}function ql(l){let e,t,n,i,s=[],r=new Map,o=l[0];const a=f=>f[6].id;for(let f=0;f<o.length;f+=1){let c=Pl(l,o,f),u=a(c);r.set(u,s[f]=Bl(u,c))}return{c(){e=w("div"),t=w("div"),t.textContent="Filter status",n=D(),i=w("div");for(let f=0;f<s.length;f+=1)s[f].c();h(t,"class","flex label svelte-1ovi0to"),h(i,"class","flex unselect"),h(e,"class","flex flex_clm unselect")},m(f,c){N(f,e,c),g(e,t),g(e,n),g(e,i);for(let u=0;u<s.length;u+=1)s[u].m(i,null)},p(f,c){c&3&&(o=f[0],s=Ke(s,c,a,1,f,o,r,i,Un,Bl,null,Pl))},d(f){f&&R(e);for(let c=0;c<s.length;c+=1)s[c].d()}}}function Bl(l,e){let t,n=e[6].title+"",i,s,r;return{key:l,first:null,c(){var o,a,f,c;t=w("div"),i=ae(n),h(t,"class","flex flex_cx flex_cy nowrap cursor_ptr statusItem svelte-1ovi0to"),j(t,"background",(a=(o=e[6])==null?void 0:o.bgColor)!=null?a:"#000"),j(t,"color",(c=(f=e[6])==null?void 0:f.color)!=null?c:"#fff"),Y(t,"select",e[6]._select),this.first=t},m(o,a){N(o,t,a),g(t,i),s||(r=$(t,"click",function(){Xe(e[1](e[6]))&&e[1](e[6]).apply(this,arguments)}),s=!0)},p(o,a){var f,c,u,m;e=o,a&1&&n!==(n=e[6].title+"")&&be(i,n),a&1&&j(t,"background",(c=(f=e[6])==null?void 0:f.bgColor)!=null?c:"#000"),a&1&&j(t,"color",(m=(u=e[6])==null?void 0:u.color)!=null?m:"#fff"),a&1&&Y(t,"select",e[6]._select)},d(o){o&&R(t),s=!1,r()}}}function nr(l){let e,t=l[0].length>1&&ql(l);return{c(){t&&t.c(),e=Ue()},m(n,i){t&&t.m(n,i),N(n,e,i)},p(n,[i]){n[0].length>1?t?t.p(n,i):(t=ql(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ue,o:ue,d(n){t&&t.d(n),n&&R(e)}}}const Gl="__ALL__";function sr(l,e,t){var a,f;let{app:n}=e,{filterStatus:i=null}=e,s=[{title:"ALL",id:Gl,color:"#000",bgColor:"#fff",_select:!0},...((f=(a=n==null?void 0:n.appConfig)==null?void 0:a.lead_StatusFilterList)!=null?f:[]).map(n.lead_GetStatusByID).map(c=>({...c,_select:!1}))];const r=()=>{var c,u;t(0,s),t(2,i=s.length?s[0]._select?null:(u=(c=s.find(m=>m._select))==null?void 0:c.id)!=null?u:null:null)},o=c=>{const u=!c._select;return u?(s.map(m=>m._select=!1),c._select=u,r()):c.id===Gl?void 0:(t(0,s[0]._select=!0,s),c._select=u,r())};return r(),l.$$set=c=>{"app"in c&&t(3,n=c.app),"filterStatus"in c&&t(2,i=c.filterStatus)},[s,o,i,n]}class ir extends we{constructor(e){super(),ve(this,e,sr,nr,_e,{app:3,filterStatus:2})}}function xl(l){let e,t,n;return t=new vt({props:{size:"32",color:"#fff"}}),{c(){e=w("div"),de(t.$$.fragment),h(e,"class","flex flex_cy flex_cx pos_abs wh100 audioControl_Item svelte-os3u6s"),Y(e,"lhide",l[0]!=="loading")},m(i,s){N(i,e,s),fe(t,e,null),n=!0},p(i,s){(!n||s&1)&&Y(e,"lhide",i[0]!=="loading")},i(i){n||(O(t.$$.fragment,i),n=!0)},o(i){H(t.$$.fragment,i),n=!1},d(i){i&&R(e),ce(t)}}}function rr(l){let e,t,n,i,s,r,o,a,f,c,u=l[0]==="loading"&&xl(l);return{c(){e=w("div"),u&&u.c(),t=D(),n=w("img"),s=D(),r=w("img"),h(n,"class","pos_abs overhide wh100 audioControl_Item svelte-os3u6s"),Re(n.src,i="assets/icons/play.png")||h(n,"src",i),h(n,"draggable","false"),j(n,"filter","invert(1)"),Y(n,"lhide",l[0]==="play"),Y(n,"rhide",l[0]==="loading"),h(r,"class","pos_abs overhide wh100 audioControl_Item svelte-os3u6s"),Re(r.src,o="assets/icons/pause.png")||h(r,"src",o),h(r,"draggable","false"),j(r,"filter","invert(1)"),Y(r,"rhide",l[0]==="pause"||l[0]==="loading"),h(e,"class","flex audioControl cursor_ptr unselect pos_rel flex_cx flex_cy overhide svelte-os3u6s")},m(m,_){N(m,e,_),u&&u.m(e,null),g(e,t),g(e,n),g(e,s),g(e,r),a=!0,f||(c=$(e,"click",l[2]),f=!0)},p(m,[_]){m[0]==="loading"?u?(u.p(m,_),_&1&&O(u,1)):(u=xl(m),u.c(),O(u,1),u.m(e,t)):u&&(ke(),H(u,1,1,()=>{u=null}),Se()),(!a||_&1)&&Y(n,"lhide",m[0]==="play"),(!a||_&1)&&Y(n,"rhide",m[0]==="loading"),(!a||_&1)&&Y(r,"rhide",m[0]==="pause"||m[0]==="loading")},i(m){a||(O(u),a=!0)},o(m){H(u),a=!1},d(m){m&&R(e),u&&u.d(),f=!1,c()}}}function or(l,e,t){let n,{app:i}=e,{url:s}=e;const r=i.audioMgr.getControlAudio({url:s,cache:!0}),{state_r:o}=r.info_r;he(l,o,f=>t(0,n=f));const a=f=>{!r||(n==="pause"&&r.play(),n==="play"&&r.pause())};return l.$$set=f=>{"app"in f&&t(3,i=f.app),"url"in f&&t(4,s=f.url)},[n,o,a,i,s]}class ar extends we{constructor(e){super(),ve(this,e,or,rr,_e,{app:3,url:4})}}function Wl(l){let e,t;return{c(){e=w("img"),h(e,"class","a_img"),Re(e.src,t=l[1])||h(e,"src",t),h(e,"draggable","false"),j(e,"max-height",l[0]+"px")},m(n,i){N(n,e,i)},p(n,i){i&2&&!Re(e.src,t=n[1])&&h(e,"src",t),i&1&&j(e,"max-height",n[0]+"px")},d(n){n&&R(e)}}}function fr(l){let e,t,n,i,s,r,o,a=l[1]&&Wl(l);return{c(){a&&a.c(),e=D(),t=w("div"),n=w("div"),n.innerHTML='<img class="w100 h100 svelte-75x929" draggable="false" src="assets/icons/download.png"/>',i=D(),s=w("div"),s.innerHTML='<img class="w100 h100 svelte-75x929" draggable="false" src="assets/icons/fullscreen.png"/>',h(n,"class","flex cursor_ptr imgCtrlBtn svelte-75x929"),h(s,"class","flex cursor_ptr imgCtrlBtn svelte-75x929"),h(t,"class","flex pos_abs imgCtrlBtnGroup svelte-75x929")},m(f,c){a&&a.m(f,c),N(f,e,c),N(f,t,c),g(t,n),g(t,i),g(t,s),r||(o=[$(n,"click",l[3]),$(s,"click",l[4])],r=!0)},p(f,[c]){f[1]?a?a.p(f,c):(a=Wl(f),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},i:ue,o:ue,d(f){a&&a.d(f),f&&R(e),f&&R(t),r=!1,je(o)}}}function cr(l,e,t){let n,{app:i}=e,{imgHeight:s}=e,{url:r}=e;const{state_r:o,url_r:a}=i.imageMgr.getOrCreateImageItem(r).info_r;he(l,a,u=>t(1,n=u));const f=u=>{Ft(r)},c=u=>{n&&i.events.emit("openOverlayImageView",n)};return l.$$set=u=>{"app"in u&&t(5,i=u.app),"imgHeight"in u&&t(0,s=u.imgHeight),"url"in u&&t(6,r=u.url)},[s,n,a,f,c,i,r]}class ur extends we{constructor(e){super(),ve(this,e,cr,fr,_e,{app:5,imgHeight:0,url:6})}}function dr(l){let e,t,n,i,s,r,o,a,f;return{c(){e=w("img"),n=D(),i=w("div"),s=w("div"),s.innerHTML='<img class="w100 h100 svelte-1m8yuzj" draggable="false" src="assets/icons/download.png"/>',r=D(),o=w("div"),o.innerHTML='<img class="w100 h100 svelte-1m8yuzj" draggable="false" src="assets/icons/fullscreen.png"/>',h(e,"class","a_img svelte-1m8yuzj"),Re(e.src,t=l[3].url)||h(e,"src",t),h(e,"draggable","false"),j(e,"max-height",l[6]+"px"),h(s,"class","flex cursor_ptr imgCtrlBtn svelte-1m8yuzj"),h(o,"class","flex cursor_ptr imgCtrlBtn svelte-1m8yuzj"),h(i,"class","flex pos_abs imgCtrlBtnGroup svelte-1m8yuzj")},m(c,u){N(c,e,u),N(c,n,u),N(c,i,u),g(i,s),g(i,r),g(i,o),a||(f=[$(s,"click",function(){Xe(l[7](l[3]))&&l[7](l[3]).apply(this,arguments)}),$(o,"click",function(){Xe(l[8](l[3]))&&l[8](l[3]).apply(this,arguments)})],a=!0)},p(c,u){l=c,u&8&&!Re(e.src,t=l[3].url)&&h(e,"src",t),u&64&&j(e,"max-height",l[6]+"px")},i:ue,o:ue,d(c){c&&R(e),c&&R(n),c&&R(i),a=!1,je(f)}}}function _r(l){let e,t,n=l[3]&&Yl(l);return{c(){n&&n.c(),e=Ue()},m(i,s){n&&n.m(i,s),N(i,e,s),t=!0},p(i,s){i[3]?n?(n.p(i,s),s&8&&O(n,1)):(n=Yl(i),n.c(),O(n,1),n.m(e.parentNode,e)):n&&(ke(),H(n,1,1,()=>{n=null}),Se())},i(i){t||(O(n),t=!0)},o(i){H(n),t=!1},d(i){n&&n.d(i),i&&R(e)}}}function Yl(l){let e=l[3].url,t,n,i=Vl(l);return{c(){i.c(),t=Ue()},m(s,r){i.m(s,r),N(s,t,r),n=!0},p(s,r){r&8&&_e(e,e=s[3].url)?(ke(),H(i,1,1,ue),Se(),i=Vl(s),i.c(),O(i,1),i.m(t.parentNode,t)):i.p(s,r)},i(s){n||(O(i),n=!0)},o(s){H(i),n=!1},d(s){s&&R(t),i.d(s)}}}function Vl(l){let e,t;return e=new ur({props:{app:l[0],imgHeight:l[6],url:l[3].url}}),{c(){de(e.$$.fragment)},m(n,i){fe(e,n,i),t=!0},p(n,i){const s={};i&1&&(s.app=n[0]),i&64&&(s.imgHeight=n[6]),i&8&&(s.url=n[3].url),e.$set(s)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Jl(l){let e,t,n,i,s,r,o;return{c(){e=w("img"),n=D(),i=w("div"),s=w("div"),s.innerHTML='<img class="w100 h100 svelte-1m8yuzj" draggable="false" src="assets/icons/download.png"/>',h(e,"class","a_img fileIcon svelte-1m8yuzj"),Re(e.src,t="assets/icons/folder.png")||h(e,"src",t),h(e,"draggable","false"),j(e,"max-height",l[6]+"px"),h(s,"class","flex cursor_ptr imgCtrlBtn svelte-1m8yuzj"),h(i,"class","flex pos_abs imgCtrlBtnGroup svelte-1m8yuzj")},m(a,f){N(a,e,f),N(a,n,f),N(a,i,f),g(i,s),r||(o=$(s,"click",l[14]),r=!0)},p(a,f){f&64&&j(e,"max-height",a[6]+"px")},d(a){a&&R(e),a&&R(n),a&&R(i),r=!1,o()}}}function Xl(l){let e=l[5].url,t,n,i=Kl(l);return{c(){i.c(),t=Ue()},m(s,r){i.m(s,r),N(s,t,r),n=!0},p(s,r){r&32&&_e(e,e=s[5].url)?(ke(),H(i,1,1,ue),Se(),i=Kl(s),i.c(),O(i,1),i.m(t.parentNode,t)):i.p(s,r)},i(s){n||(O(i),n=!0)},o(s){H(i),n=!1},d(s){s&&R(t),i.d(s)}}}function Kl(l){let e,t;return e=new ar({props:{app:l[0],url:l[5].url}}),{c(){de(e.$$.fragment)},m(n,i){fe(e,n,i),t=!0},p(n,i){const s={};i&1&&(s.app=n[0]),i&32&&(s.url=n[5].url),e.$set(s)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Zl(l){var i;let e,t=((i=l[1])==null?void 0:i.text)+"",n;return{c(){e=w("pre"),n=ae(t),h(e,"class","w100 text textPre svelte-1m8yuzj")},m(s,r){N(s,e,r),g(e,n)},p(s,r){var o;r&2&&t!==(t=((o=s[1])==null?void 0:o.text)+"")&&be(n,t)},d(s){s&&R(e)}}}function mr(l){var b,M;let e,t,n,i,s,r,o,a,f=l[9]((b=l[1])==null?void 0:b.received_at)+"",c,u;const m=[_r,dr],_=[];function d(L,T){return 0}~(t=d())&&(n=_[t]=m[t](l));let p=l[4]&&Jl(l),v=l[5]&&Xl(l),y=((M=l[1])==null?void 0:M.text)&&Zl(l);return{c(){var L,T,k,I;e=w("div"),n&&n.c(),i=D(),p&&p.c(),s=D(),v&&v.c(),r=D(),y&&y.c(),o=D(),a=w("div"),c=ae(f),h(a,"class","flex pos_abs unselect date svelte-1m8yuzj"),Y(a,"attachment_mode",l[3]&&!((L=l[1])!=null&&L.text)),h(e,"class","flex flex_clm overhide pos_abs chat_item svelte-1m8yuzj"),Y(e,"chat_item_other",(T=l[1])==null?void 0:T.incoming),Y(e,"chat_item_self",!((k=l[1])!=null&&k.incoming)),Y(e,"has_text",(I=l[1])==null?void 0:I.text)},m(L,T){N(L,e,T),~t&&_[t].m(e,null),g(e,i),p&&p.m(e,null),g(e,s),v&&v.m(e,null),g(e,r),y&&y.m(e,null),g(e,o),g(e,a),g(a,c),l[15](e),u=!0},p(L,[T]){var I,C,P,B,E,x;let k=t;t=d(),t===k?~t&&_[t].p(L,T):(n&&(ke(),H(_[k],1,1,()=>{_[k]=null}),Se()),~t?(n=_[t],n?n.p(L,T):(n=_[t]=m[t](L),n.c()),O(n,1),n.m(e,i)):n=null),L[4]?p?p.p(L,T):(p=Jl(L),p.c(),p.m(e,s)):p&&(p.d(1),p=null),L[5]?v?(v.p(L,T),T&32&&O(v,1)):(v=Xl(L),v.c(),O(v,1),v.m(e,r)):v&&(ke(),H(v,1,1,()=>{v=null}),Se()),(I=L[1])!=null&&I.text?y?y.p(L,T):(y=Zl(L),y.c(),y.m(e,o)):y&&(y.d(1),y=null),(!u||T&2)&&f!==(f=L[9]((C=L[1])==null?void 0:C.received_at)+"")&&be(c,f),(!u||T&10)&&Y(a,"attachment_mode",L[3]&&!((P=L[1])!=null&&P.text)),(!u||T&2)&&Y(e,"chat_item_other",(B=L[1])==null?void 0:B.incoming),(!u||T&2)&&Y(e,"chat_item_self",!((E=L[1])!=null&&E.incoming)),(!u||T&2)&&Y(e,"has_text",(x=L[1])==null?void 0:x.text)},i(L){u||(O(n),O(v),u=!0)},o(L){H(n),H(v),u=!1},d(L){L&&R(e),~t&&_[t].d(),p&&p.d(),v&&v.d(),y&&y.d(),l[15](null)}}}function gr(l,e,t){let{app:n}=e,{bbox:i=null}=e,{message:s=null}=e,{render_Width:r=1}=e,{render_X:o=-r*2}=e,a=null,f=null,c=null,u=null,m=null,_=[],d=[],p=[],v=1;function y(C){var B;_=[],d=[],C&&(B=C.attachments)!=null&&B.length&&(_=C.attachments.filter(E=>E.file_type==="IM").map(E=>({url:E.url})),d=C.attachments.filter(E=>E.file_type==="DC").map(E=>({url:E.url})),p=C.attachments.filter(E=>E.file_type==="VC").map(E=>({url:E.url})));const P=i.height*.7;i.width,t(6,v=P),t(3,c=_==null?void 0:_[0]),t(4,u=c?null:d==null?void 0:d[0]),t(5,m=!c&&!u?p==null?void 0:p[0]:null)}function b(C){if(!C||!Array.isArray(C.attachments)){t(1,f=null);return}if(!f){t(1,f=C);return}if(f.text!==C.text||f.incoming!==C.incoming||f.received_at!==C.received_at||f.attachments.length!==C.attachments.length){t(1,f=C);return}if(!f.attachments.map((P,B)=>[P,C.attachments[B]]).every(([P,B])=>P.file_type===B.file_type&&P.url===B.url)){t(1,f=C);return}}const M=C=>P=>{C&&C.url&&Ft(C.url)},L=C=>P=>{C&&C.url&&n.events.emit("openOverlayImageView",C.url)},T=C=>{if(C===null)return"";const P=E=>String(E).padStart(2,"0"),B=new Date;return C=new Date(C),C.getYear()===B.getYear()&&C.getMonth()===B.getMonth()&&C.getDate()===B.getDate()?`${P(C.getHours())}:${P(C.getMinutes())}`:`${P(C.getDate())}.${P(C.getMonth())}.${C.getFullYear()} ${P(C.getHours())}:${P(C.getMinutes())}`},k=()=>Nn(u.url);function I(C){Ne[C?"unshift":"push"](()=>{a=C,t(2,a)})}return l.$$set=C=>{"app"in C&&t(0,n=C.app),"bbox"in C&&t(10,i=C.bbox),"message"in C&&t(11,s=C.message),"render_Width"in C&&t(12,r=C.render_Width),"render_X"in C&&t(13,o=C.render_X)},l.$$.update=()=>{l.$$.dirty&2048&&b(s),l.$$.dirty&2&&y(f)},[n,f,a,c,u,m,v,M,L,T,i,s,r,o,k,I]}class pr extends we{constructor(e){super(),ve(this,e,gr,mr,_e,{app:0,bbox:10,message:11,render_Width:12,render_X:13})}}function hr(l){let e;return{c(){e=w("div"),e.innerHTML=`<div class="svelte-j15bjw"></div> 
	<div class="svelte-j15bjw"></div> 
	<div class="svelte-j15bjw"></div>`,h(e,"class","lds-roller svelte-j15bjw")},m(t,n){N(t,e,n)},p:ue,i:ue,o:ue,d(t){t&&R(e)}}}class Gn extends we{constructor(e){super(),ve(this,e,null,hr,_e,{})}}function Ql(l){let e,t=l[0]===">"?">":"",n;return{c(){e=w("div"),n=ae(t),h(e,"class","flex flex_cx flex_cy statusItemDlm svelte-1h7gd9r")},m(i,s){N(i,e,s),g(e,n)},p(i,s){s&1&&t!==(t=i[0]===">"?">":"")&&be(n,t)},d(i){i&&R(e)}}}function vr(l){var c,u,m,_;let e,t,n,i,s=((_=(c=l[1])==null?void 0:c.title)!=null?_:(u=l[1])!=null&&u.id?`#${(m=l[1])==null?void 0:m.id}`:"*UNK*")+"",r,o,a,f=l[0]&&Ql(l);return{c(){var d,p,v,y,b;e=w("div"),t=w("div"),f&&f.c(),n=D(),i=w("div"),r=ae(s),h(i,"class","flex flex_cx flex_cy nowrap statusItem svelte-1h7gd9r"),j(i,"background",(p=(d=l[1])==null?void 0:d.bgColor)!=null?p:"#000"),j(i,"color",(y=(v=l[1])==null?void 0:v.color)!=null?y:"#fff"),Y(i,"select",l[1].canSelect),h(t,"class","flex"),h(e,"class","flex flex_cy h100 overhide itemWrapper svelte-1h7gd9r"),j(e,"width",l[5]+"px"),Y(e,"overhide",l[5]<l[4]&&l[4]>0),Y(e,"cursor_ptr",(b=l[1])==null?void 0:b.canSelect)},m(d,p){N(d,e,p),g(e,t),f&&f.m(t,null),g(t,n),g(t,i),g(i,r),l[10](t),l[11](e),o||(a=$(i,"click",l[9]),o=!0)},p(d,[p]){var v,y,b,M,L,T,k,I,C;d[0]?f?f.p(d,p):(f=Ql(d),f.c(),f.m(t,n)):f&&(f.d(1),f=null),p&2&&s!==(s=((M=(v=d[1])==null?void 0:v.title)!=null?M:(y=d[1])!=null&&y.id?`#${(b=d[1])==null?void 0:b.id}`:"*UNK*")+"")&&be(r,s),p&2&&j(i,"background",(T=(L=d[1])==null?void 0:L.bgColor)!=null?T:"#000"),p&2&&j(i,"color",(I=(k=d[1])==null?void 0:k.color)!=null?I:"#fff"),p&2&&Y(i,"select",d[1].canSelect),p&32&&j(e,"width",d[5]+"px"),p&48&&Y(e,"overhide",d[5]<d[4]&&d[4]>0),p&2&&Y(e,"cursor_ptr",(C=d[1])==null?void 0:C.canSelect)},i:ue,o:ue,d(d){d&&R(e),f&&f.d(),l[10](null),l[11](null),o=!1,a()}}}function wr(l,e,t){let n,{beforeDlm:i=!1}=e,{hide:s=!1}=e,{status:r={}}=e;const o=$t();let a,f,c=0;const u=xe(0,{duration:200});he(l,u,v=>t(5,n=v));const m=()=>{a&&f&&u.set(s?0:c)};pt(()=>{a&&f&&(t(4,c=f.offsetWidth),m())});const _=()=>r.canSelect&&o("click",r);function d(v){Ne[v?"unshift":"push"](()=>{f=v,t(3,f)})}function p(v){Ne[v?"unshift":"push"](()=>{a=v,t(2,a)})}return l.$$set=v=>{"beforeDlm"in v&&t(0,i=v.beforeDlm),"hide"in v&&t(8,s=v.hide),"status"in v&&t(1,r=v.status)},l.$$.update=()=>{l.$$.dirty&256&&m()},[i,r,a,f,c,n,o,u,s,_,d,p]}class br extends we{constructor(e){super(),ve(this,e,wr,vr,_e,{beforeDlm:0,hide:8,status:1})}}function $l(l,e,t){const n=l.slice();return n[8]=e[t],n[10]=t,n}function en(l,e){var s;let t,n,i;return n=new br({props:{beforeDlm:(s=e[8].status)==null?void 0:s.beforeDlm,status:e[8].status,hide:e[8].hide}}),n.$on("click",e[3]),{key:l,first:null,c(){t=Ue(),de(n.$$.fragment),this.first=t},m(r,o){N(r,t,o),fe(n,r,o),i=!0},p(r,o){var f;e=r;const a={};o&1&&(a.beforeDlm=(f=e[8].status)==null?void 0:f.beforeDlm),o&1&&(a.status=e[8].status),o&1&&(a.hide=e[8].hide),n.$set(a)},i(r){i||(O(n.$$.fragment,r),i=!0)},o(r){H(n.$$.fragment,r),i=!1},d(r){r&&R(t),ce(n,r)}}}function yr(l){let e,t=[],n=new Map,i,s=l[0];const r=o=>o[8].rID;for(let o=0;o<s.length;o+=1){let a=$l(l,s,o),f=r(a);n.set(f,t[o]=en(f,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();h(e,"class","flex h100")},m(o,a){N(o,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);i=!0},p(o,[a]){a&1&&(s=o[0],ke(),t=Ke(t,a,r,1,o,s,n,e,tt,en,null,$l),Se())},i(o){if(!i){for(let a=0;a<s.length;a+=1)O(t[a]);i=!0}},o(o){for(let a=0;a<t.length;a+=1)H(t[a]);i=!1},d(o){o&&R(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function kr(l,e,t){let{statusList:n=[]}=e,{statusSelectList:i=[]}=e,s=[],r=1;Be(lt(1e3,()=>{const f=Date.now();t(0,s=s.filter(c=>!c.hide||c.hide<=f))}));const o=()=>{const f=[...n];let c=-1;const u=r++;for(;f.length;){const m=f.shift(),_=s.findIndex(d=>{var p,v;return((p=d==null?void 0:d.status)==null?void 0:p.id)===(m==null?void 0:m.id)&&((v=d==null?void 0:d.status)==null?void 0:v.beforeDlm)===(m==null?void 0:m.beforeDlm)});if(_>c)c=_,t(0,s[_].seq=u,s),t(0,s[_].status=m,s);else{const d={rID:r++,seq:u,status:m,hide:!1};s.splice(c+1,0,d),c++}}s.filter(m=>m.seq===u).map(m=>m.hide=!1),s.filter(m=>m.seq!==u).map(m=>m.hide=Date.now()+1e3),t(0,s)};function a(f){el.call(this,l,f)}return l.$$set=f=>{"statusList"in f&&t(1,n=f.statusList),"statusSelectList"in f&&t(2,i=f.statusSelectList)},l.$$.update=()=>{l.$$.dirty&2&&o()},[s,n,i,a]}class Sr extends we{constructor(e){super(),ve(this,e,kr,yr,_e,{statusList:1,statusSelectList:2})}}function tn(l){var _;let e,t,n,i,s,r,o,a,f,c,u;o=new Sr({props:{statusList:l[7]((_=l[0])==null?void 0:_.lead,l[2])}}),o.$on("click",l[12]);let m=l[1]&&ln();return{c(){e=w("div"),t=w("div"),n=D(),i=w("img"),r=D(),de(o.$$.fragment),a=D(),m&&m.c(),h(t,"class","pos_abs w100 h100 overhide bg svelte-socr2e"),Re(i.src,s="assets/icons/status1.png")||h(i,"src",s),h(i,"draggable","false"),h(i,"class","pos_abs statusIcon svelte-socr2e"),h(e,"class","flex flex_cx flex_cy unselect statusCnt pos_rel svelte-socr2e"),Y(e,"loading",l[1])},m(d,p){N(d,e,p),g(e,t),g(e,n),g(e,i),g(e,r),fe(o,e,null),g(e,a),m&&m.m(e,null),l[13](e),f=!0,c||(u=[$(e,"mouseenter",l[14]),$(e,"mouseleave",l[15]),$(e,"click",l[16])],c=!0)},p(d,p){var y;const v={};p&5&&(v.statusList=d[7]((y=d[0])==null?void 0:y.lead,d[2])),o.$set(v),d[1]?m?p&2&&O(m,1):(m=ln(),m.c(),O(m,1),m.m(e,null)):m&&(ke(),H(m,1,1,()=>{m=null}),Se()),(!f||p&2)&&Y(e,"loading",d[1])},i(d){f||(O(o.$$.fragment,d),O(m),f=!0)},o(d){H(o.$$.fragment,d),H(m),f=!1},d(d){d&&R(e),ce(o),m&&m.d(),l[13](null),c=!1,je(u)}}}function ln(l){let e,t,n,i;return t=new ll({props:{height:"6"}}),{c(){e=w("div"),de(t.$$.fragment),h(e,"class","flex pos_abs flex_cy h100 loadingInd svelte-socr2e"),j(e,"filter","invert(0)")},m(s,r){N(s,e,r),fe(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&He(()=>{n||(n=Ae(e,Ee,{},!0)),n.run(1)}),i=!0)},o(s){H(t.$$.fragment,s),s&&(n||(n=Ae(e,Ee,{},!1)),n.run(0)),i=!1},d(s){s&&R(e),ce(t),s&&n&&n.end()}}}function Lr(l){let e,t,n,i,s=l[0]&&l[0].lead&&tn(l);return{c(){s&&s.c(),e=Ue()},m(r,o){s&&s.m(r,o),N(r,e,o),t=!0,n||(i=[$(window,"mousedown",l[5]),$(window,"blur",l[5])],n=!0)},p(r,[o]){r[0]&&r[0].lead?s?(s.p(r,o),o&1&&O(s,1)):(s=tn(r),s.c(),O(s,1),s.m(e.parentNode,e)):s&&(ke(),H(s,1,1,()=>{s=null}),Se())},i(r){t||(O(s),t=!0)},o(r){H(s),t=!1},d(r){s&&s.d(r),r&&R(e),n=!1,je(i)}}}function Mr(l,e,t){let n,i,s,{app:r}=e;const{dialogMap_r:o,dialogMap_SetDialog:a}=r;he(l,o,E=>t(11,s=E));let{dialog_id:f}=e,c=!1,u=!1,m=!1,_;const d=()=>!(!n||!(n!=null&&n.lead)||c||m);let p;const v=E=>{if(E!=null&&E.target){let x=E.target;for(;x;){if(x===p)return;x=x.parentNode}}m||t(2,u=!1)},y=()=>{_&&_(),t(2,u=!1),m=!1},b=(E,x)=>async W=>{var G,V;if(!d())return;m=!0;const F=x.id;if(x.protectionModal){const q=(V=(G=r.moduleMgr)==null?void 0:G.modal)==null?void 0:V.createModal("cancel/continue",{...x.protectionModal,position:{target:p,stick:"bottom"}});if(q&&(_=q.abort,!await q.result))return y()}if(t(1,c=!0),E){const q=await r.api.lead_SetStatus(E.lead.tg_id,F);q&&E&&E.lead&&E.lead.tg_id===q.tg_id&&(E.lead=q,a(E))}t(1,c=!1),y()},M=E=>{var x,W,F,G;try{const V=r.lead_GetStatusID(E);return(r.lead_GetStatusByID(V)?(W=(x=r==null?void 0:r.appConfig)==null?void 0:x.lead_StatusJumpMap)==null?void 0:W[V]:(G=(F=r==null?void 0:r.appConfig)==null?void 0:F.lead_StatusNextListForUnkStatus)!=null?G:[]).map(r==null?void 0:r.lead_GetStatusByID).filter(Boolean)}catch{}return[]},L=E=>r.lead_GetStatusHistory(E).map((x,W)=>({...x,beforeDlm:W!==0})),T=(E,x=!1)=>{const W=L(E).map((G,V)=>({...G,beforeDlm:V!==0?">":!1})),F=x?M(E).map((G,V)=>({...G,beforeDlm:V===0?">":!0,canSelect:!0})):[];return[...W,...F]};Be(y);const k=E=>b(n,E.detail)();function I(E){Ne[E?"unshift":"push"](()=>{p=E,t(3,p)})}const C=()=>t(2,u=!0),P=()=>v(),B=()=>t(2,u=!0);return l.$$set=E=>{"app"in E&&t(8,r=E.app),"dialog_id"in E&&t(9,f=E.dialog_id)},l.$$.update=()=>{var E;l.$$.dirty&2560&&t(0,n=s[f]),l.$$.dirty&1&&t(10,i=(E=n==null?void 0:n.lead)==null?void 0:E.status),l.$$.dirty&1&&T(n==null?void 0:n.lead),l.$$.dirty&1536&&y()},[n,c,u,p,o,v,b,T,r,f,i,s,k,I,C,P,B]}class Cr extends we{constructor(e){super(),ve(this,e,Mr,Lr,_e,{app:8,dialog_id:9})}}function nn(l){let e,t,n;return t=new vt({props:{size:l[0]-4,color:"#fff"}}),{c(){e=w("div"),de(t.$$.fragment),h(e,"class","flex flex_cy flex_cx pos_abs wh100 audioControl_Item svelte-ty5gfm"),Y(e,"lhide",l[1]!=="loading")},m(i,s){N(i,e,s),fe(t,e,null),n=!0},p(i,s){const r={};s&1&&(r.size=i[0]-4),t.$set(r),(!n||s&2)&&Y(e,"lhide",i[1]!=="loading")},i(i){n||(O(t.$$.fragment,i),n=!0)},o(i){H(t.$$.fragment,i),n=!1},d(i){i&&R(e),ce(t)}}}function Tr(l){let e,t,n,i,s,r,o,a,f,c,u=l[1]==="loading"&&nn(l);return{c(){e=w("div"),u&&u.c(),t=D(),n=w("img"),s=D(),r=w("img"),h(n,"class","pos_abs overhide wh100 audioControl_Item svelte-ty5gfm"),Re(n.src,i="assets/icons/play.png")||h(n,"src",i),h(n,"draggable","false"),j(n,"filter","invert(1)"),Y(n,"lhide",l[1]==="play"),Y(n,"rhide",l[1]==="loading"),h(r,"class","pos_abs overhide wh100 audioControl_Item svelte-ty5gfm"),Re(r.src,o="assets/icons/pause.png")||h(r,"src",o),h(r,"draggable","false"),j(r,"filter","invert(1)"),Y(r,"rhide",l[1]!=="play"),h(e,"class","flex cursor_ptr unselect pos_rel flex_cx flex_cy overhide audioControl svelte-ty5gfm"),j(e,"--size",l[0]+"px")},m(m,_){N(m,e,_),u&&u.m(e,null),g(e,t),g(e,n),g(e,s),g(e,r),a=!0,f||(c=$(e,"click",l[2]),f=!0)},p(m,[_]){m[1]==="loading"?u?(u.p(m,_),_&2&&O(u,1)):(u=nn(m),u.c(),O(u,1),u.m(e,t)):u&&(ke(),H(u,1,1,()=>{u=null}),Se()),(!a||_&2)&&Y(n,"lhide",m[1]==="play"),(!a||_&2)&&Y(n,"rhide",m[1]==="loading"),(!a||_&2)&&Y(r,"rhide",m[1]!=="play"),(!a||_&1)&&j(e,"--size",m[0]+"px")},i(m){a||(O(u),a=!0)},o(m){H(u),a=!1},d(m){m&&R(e),u&&u.d(),f=!1,c()}}}function Ir(l,e,t){let{size:n=24}=e,{state:i="loading"}=e;function s(r){el.call(this,l,r)}return l.$$set=r=>{"size"in r&&t(0,n=r.size),"state"in r&&t(1,i=r.state)},[n,i,s]}class xn extends we{constructor(e){super(),ve(this,e,Ir,Tr,_e,{size:0,state:1})}}function Dr(l){let e,t,n,i,s,r,o,a,f,c,u,m=Math.round(Oe(0,l[0],1)*100)+"",_,d,p,v,y,b,M,L,T;return{c(){e=w("div"),t=w("div"),n=w("div"),i=w("div"),s=D(),r=w("div"),o=D(),a=w("div"),f=D(),c=w("div"),u=w("div"),_=ae(m),d=ae("%"),p=D(),v=w("div"),y=D(),b=w("img"),h(i,"class","flex flex_grow_1 track_line svelte-16ax252"),h(r,"class","flex pos_abs track_thumb svelte-16ax252"),j(r,"left",Oe(0,l[0],1)*100+"%"),h(n,"class","flex flex_grow_1 pos_rel h100 flex_cy track"),j(a,"width","8px"),h(t,"class","flex h100 overhide"),j(t,"width",l[4]+"px"),h(u,"class","flex label svelte-16ax252"),j(v,"width","4px"),h(b,"class","overhide wh100 icon svelte-16ax252"),Re(b.src,M=l[3])||h(b,"src",M),h(b,"draggable","false"),j(b,"filter","invert(1)"),h(c,"class","flex flex_cx flex_cy"),h(e,"class","flex cursor_ptr unselect pos_rel flex_cx flex_cy overhide cnt svelte-16ax252"),j(e,"--size",l[1]+"px")},m(k,I){N(k,e,I),g(e,t),g(t,n),g(n,i),g(n,s),g(n,r),l[12](n),g(t,o),g(t,a),g(e,f),g(e,c),g(c,u),g(u,_),g(u,d),g(c,p),g(c,v),g(c,y),g(c,b),L||(T=[$(window,"mousemove",l[9]),$(window,"mouseup",l[10]),$(window,"blur",l[10]),$(n,"click",l[7]),$(n,"mousedown",l[8]),$(c,"click",l[6]),$(e,"wheel",l[11])],L=!0)},p(k,[I]){I&1&&j(r,"left",Oe(0,k[0],1)*100+"%"),I&16&&j(t,"width",k[4]+"px"),I&1&&m!==(m=Math.round(Oe(0,k[0],1)*100)+"")&&be(_,m),I&8&&!Re(b.src,M=k[3])&&h(b,"src",M),I&2&&j(e,"--size",k[1]+"px")},i:ue,o:ue,d(k){k&&R(e),l[12](null),L=!1,je(T)}}}function Or(l,e,t){let n,i,{size:s=24}=e,{volume:r=1}=e;const o=xe(0);he(l,o,k=>t(4,i=k));const a=k=>t(0,r=Oe(0,k,1));let f=null;const c=Nt(3e3,()=>{f||(u=!1,o.set(0))});let u=!1;const m=k=>{if(!u){u=!0,o.set(100),c();return}t(0,r=-r),c()};let _=null;const d=k=>{if(!_||!u)return;const I=_.getBoundingClientRect();a((k.clientX-I.x)/(I.width-4)),c()},p=d,v=k=>{!_||(f=!0)},y=k=>{!_||!f||d(k)},b=k=>{f&&(f=null,c())},M=k=>{!_||(b(),a(r+Math.sign(k.deltaY)*-.1),c())},L=["assets/icons/volume0.png","assets/icons/volume1.png","assets/icons/volume2.png","assets/icons/volume3.png"];function T(k){Ne[k?"unshift":"push"](()=>{_=k,t(2,_)})}return l.$$set=k=>{"size"in k&&t(1,s=k.size),"volume"in k&&t(0,r=k.volume)},l.$$.update=()=>{l.$$.dirty&1&&t(3,n=L[Math.round(Oe(0,r,1)*(L.length-1))])},[r,s,_,n,i,o,m,p,v,y,b,M,T]}class Ar extends we{constructor(e){super(),ve(this,e,Or,Dr,_e,{size:1,volume:0})}}function sn(l){let e,t=l[23](l[4])+"",n,i,s=l[23](l[2])+"",r;return{c(){e=w("div"),n=ae(t),i=ae(" / "),r=ae(s),h(e,"class","flex audioControl_Time svelte-1if1xsl")},m(o,a){N(o,e,a),g(e,n),g(e,i),g(e,r)},p(o,a){a[0]&16&&t!==(t=o[23](o[4])+"")&&be(n,t),a[0]&4&&s!==(s=o[23](o[2])+"")&&be(r,s)},d(o){o&&R(e)}}}function rn(l){let e,t,n,i;return{c(){e=w("div"),t=w("div"),h(t,"class","flex audioProgressThumb svelte-1if1xsl"),j(t,"width",l[3]*100+"%"),Y(t,"activeMouse",l[1]),h(e,"class","flex w100 cursor_ptr pos_abs audioProgress svelte-1if1xsl")},m(s,r){N(s,e,r),g(e,t),l[28](e),n||(i=[$(e,"click",l[18]),$(e,"mousedown",l[19])],n=!0)},p(s,r){r[0]&8&&j(t,"width",s[3]*100+"%"),r[0]&2&&Y(t,"activeMouse",s[1])},d(s){s&&R(e),l[28](null),n=!1,je(i)}}}function Fr(l){let e,t,n,i,s,r,o,a,f,c,u,m="R".repeat(0)+"",_,d,p,v,y,b,M=l[22](l[4])&&l[22](l[2]),L,T,k,I,C,P,B,E,x,W,F=l[22](l[3]),G,V,q;r=new xn({props:{state:l[5]}}),r.$on("click",l[16]);let S=M&&sn(l);function U(ie){l[27](ie)}let J={size:"24"};l[8]!==void 0&&(J.volume=l[8]),I=new Ar({props:J}),Ne.push(()=>ot(I,"volume",U));let me=F&&rn(l);return{c(){e=w("div"),t=w("div"),n=w("div"),i=D(),s=w("div"),de(r.$$.fragment),o=D(),a=w("div"),f=D(),c=w("div"),u=w("div"),_=ae(m),d=ae(l[7]),p=D(),v=w("div"),y=D(),b=w("div"),S&&S.c(),L=D(),T=w("div"),k=D(),de(I.$$.fragment),P=D(),B=w("div"),B.innerHTML='<img class="overhide wh100 btnIconImg svelte-1if1xsl" src="assets/icons/close.png" draggable="false" style="filter: invert(1);"/>',E=D(),x=w("div"),W=D(),me&&me.c(),j(n,"height","4px"),j(a,"min-width","8px"),h(u,"class","nowrap textOverEllipsis"),h(c,"class","flex nowrap textOverEllipsis audioControl_Name svelte-1if1xsl"),h(v,"class","flex flex_grow_1"),j(T,"min-width","8px"),h(B,"class","flex btnIcon cursor_ptr unselect pos_rel flex_cx flex_cy overhide svelte-1if1xsl"),h(b,"class","flex flex_cy nowrap"),h(s,"class","flex flex_cy w100"),j(x,"height","4px"),h(t,"class","flex flex_clm pos_abs wh100 cnt svelte-1if1xsl"),j(t,"top",l[6]+"px"),h(e,"class","flex wh100 pos_abs"),Y(e,"overhide",l[6]!==0)},m(ie,le){N(ie,e,le),g(e,t),g(t,n),g(t,i),g(t,s),fe(r,s,null),g(s,o),g(s,a),g(s,f),g(s,c),g(c,u),g(u,_),g(u,d),g(s,p),g(s,v),g(s,y),g(s,b),S&&S.m(b,null),g(b,L),g(b,T),g(b,k),fe(I,b,null),g(b,P),g(b,B),g(t,E),g(t,x),g(t,W),me&&me.m(t,null),G=!0,V||(q=[$(window,"mousemove",l[20]),$(window,"mouseup",l[21]),$(window,"blur",l[21]),$(B,"click",l[17])],V=!0)},p(ie,le){const K={};le[0]&32&&(K.state=ie[5]),r.$set(K),(!G||le[0]&128)&&be(d,ie[7]),le[0]&20&&(M=ie[22](ie[4])&&ie[22](ie[2])),M?S?S.p(ie,le):(S=sn(ie),S.c(),S.m(b,L)):S&&(S.d(1),S=null);const Z={};!C&&le[0]&256&&(C=!0,Z.volume=ie[8],rt(()=>C=!1)),I.$set(Z),le[0]&8&&(F=ie[22](ie[3])),F?me?me.p(ie,le):(me=rn(ie),me.c(),me.m(t,null)):me&&(me.d(1),me=null),(!G||le[0]&64)&&j(t,"top",ie[6]+"px"),(!G||le[0]&64)&&Y(e,"overhide",ie[6]!==0)},i(ie){G||(O(r.$$.fragment,ie),O(I.$$.fragment,ie),G=!0)},o(ie){H(r.$$.fragment,ie),H(I.$$.fragment,ie),G=!1},d(ie){ie&&R(e),ce(r),S&&S.d(),ce(I),me&&me.d(),V=!1,je(q)}}}function Er(l,e,t){let n,i,s,r,o,a,f,{app:c}=e,{audio:u}=e,{destroy:m=!1}=e;const _=xe(-50);he(l,_,S=>t(6,o=S)),pt(()=>_.set(0));const{duration_r:d,currentTime_r:p,currentTimeRate_r:v,state_r:y,name_r:b}=u.info_r;he(l,d,S=>t(2,n=S)),he(l,p,S=>t(4,s=S)),he(l,v,S=>t(3,i=S)),he(l,y,S=>t(5,r=S)),he(l,b,S=>t(7,a=S));const{volume_wr:M}=c.audioMgr;he(l,M,S=>t(8,f=S));const L=S=>{m||(r==="pause"&&u.play(),r==="play"&&u.pause())},T=S=>{c.audioMgr.audioActive_Set(null)};let k=null,I=null;const C=()=>!m&&F(n)&&F(s)&&F(i)&&k?!0:(t(1,I=null),!1),P=S=>{if(!C())return 0;const U=k.getBoundingClientRect();return Oe(0,(S.clientX-U.x)/U.width,1)*n},B=S=>{!C()||u.setCurrentTime(P(S))},E=S=>{!C()||(t(1,I=[S.clientX]),u.setCurrentTime(P(S)),u.play())},x=S=>{!I||!C()||S.clientX!==I[0]&&(t(1,I=[S.clientX]),u.setCurrentTime(P(S)),u.play())},W=S=>{t(1,I=null)},F=S=>!(S==null||isNaN(S)),G=S=>{if(!F(S))return"";const U=S/60,J=S%60;return`${String(Math.floor(U)).padStart(2,"0")}:${String(Math.floor(J)).padStart(2,"0")}`};function V(S){f=S,M.set(f)}function q(S){Ne[S?"unshift":"push"](()=>{k=S,t(0,k)})}return l.$$set=S=>{"app"in S&&t(24,c=S.app),"audio"in S&&t(25,u=S.audio),"destroy"in S&&t(26,m=S.destroy)},l.$$.update=()=>{l.$$.dirty[0]&67108864&&m&&_.set(50)},[k,I,n,i,s,r,o,a,f,_,d,p,v,y,b,M,L,T,B,E,x,W,F,G,c,u,m,V,q]}class zr extends we{constructor(e){super(),ve(this,e,Er,Fr,_e,{app:24,audio:25,destroy:26},null,[-1,-1])}}function on(l,e,t){const n=l.slice();return n[11]=e[t],n}function an(l,e){let t,n,i;return n=new zr({props:{app:e[0],audio:e[11].audio,destroy:e[11]._destroy}}),{key:l,first:null,c(){t=Ue(),de(n.$$.fragment),this.first=t},m(s,r){N(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&1&&(o.app=e[0]),r&2&&(o.audio=e[11].audio),r&2&&(o.destroy=e[11]._destroy),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&R(t),ce(n,s)}}}function jr(l){let e,t,n=[],i=new Map,s,r,o,a=l[1];const f=c=>c[11].id;for(let c=0;c<a.length;c+=1){let u=on(l,a,c),m=f(u);i.set(m,n[c]=an(m,u))}return{c(){e=w("div"),t=w("div");for(let c=0;c<n.length;c+=1)n[c].c();h(t,"class","flex flex_clm pos_abs"),h(e,"class","flex flex_grow_1 pos_rel nowrap unselect cnt_wrapper svelte-91fe42"),j(e,"height",l[3]+"px"),Y(e,"overhide",!l[2])},m(c,u){N(c,e,u),g(e,t);for(let m=0;m<n.length;m+=1)n[m].m(t,null);s=!0,r||(o=ft(ht.call(null,t)),r=!0)},p(c,[u]){u&3&&(a=c[1],ke(),n=Ke(n,u,f,1,c,a,i,t,tt,an,null,on),Se()),(!s||u&8)&&j(e,"height",c[3]+"px"),(!s||u&4)&&Y(e,"overhide",!c[2])},i(c){if(!s){for(let u=0;u<a.length;u+=1)O(n[u]);s=!0}},o(c){for(let u=0;u<n.length;u+=1)H(n[u]);s=!1},d(c){c&&R(e);for(let u=0;u<n.length;u+=1)n[u].d();r=!1,o()}}}const Rr=36;function Ur(l,e,t){let n,i,{app:s}=e;const r=xe(0);he(l,r,d=>t(3,i=d));const{audioActive_r:o,audioActive_Set:a}=s.audioMgr;he(l,o,d=>t(6,n=d));let f=[],c=null,u=1;const m=()=>{setTimeout(()=>{const d=Date.now(),p=f.filter(v=>!v._destroy||v._destroy+1e3>d);f.length!==p.length&&t(1,f=p)},1e3)},_=()=>{!c&&!n||(c==null?void 0:c.audio)!==n&&(c&&(t(2,c._destroy=Date.now(),c),n||t(2,c=null),m()),n&&(t(2,c={id:u++,audio:n,_destroy:!1}),f.push(c)),t(1,f),r.set(c?Rr:0))};return l.$$set=d=>{"app"in d&&t(0,s=d.app)},l.$$.update=()=>{l.$$.dirty&64&&_()},[s,f,c,i,r,o,n]}class Nr extends we{constructor(e){super(),ve(this,e,Ur,jr,_e,{app:0})}}function fn(l){var P,B,E,x,W,F,G,V,q,S;let e,t,n,i,s=((E=(B=(P=l[2])==null?void 0:P.lead)==null?void 0:B.first_name)!=null?E:"")+"",r,o,a,f,c,u=((F=(W=(x=l[2])==null?void 0:x.lead)==null?void 0:W.last_name)!=null?F:"")+"",m,_,d,p,v,y,b,M,L,T,k,I=((V=(G=l[2])==null?void 0:G.lead)==null?void 0:V.username)&&cn(l),C=((S=(q=l[2])==null?void 0:q.lead)==null?void 0:S.ref_link)&&un(l);return M=new Cr({props:{app:l[0],dialog_id:l[2].id}}),{c(){e=w("div"),t=w("div"),n=D(),i=w("div"),r=ae(s),o=D(),a=w("div"),f=D(),c=w("div"),m=ae(u),_=ae("\xA0"),d=D(),p=w("div"),I&&I.c(),v=D(),C&&C.c(),y=D(),b=w("div"),de(M.$$.fragment),L=D(),T=w("div"),j(t,"width","8px"),j(a,"width","8px"),h(e,"class","flex nowrap textOverEllipsis userFirstLastName pos_rel svelte-qywc37"),h(p,"class","nowrap textOverEllipsis username svelte-qywc37"),h(b,"class","flex"),j(T,"height","4px")},m(U,J){N(U,e,J),g(e,t),g(e,n),g(e,i),g(i,r),g(e,o),g(e,a),g(e,f),g(e,c),g(c,m),g(c,_),N(U,d,J),N(U,p,J),I&&I.m(p,null),N(U,v,J),C&&C.m(U,J),N(U,y,J),N(U,b,J),fe(M,b,null),N(U,L,J),N(U,T,J),k=!0},p(U,J){var ie,le,K,Z,ne,Me,De,Ve,ee,Te;(!k||J&4)&&s!==(s=((K=(le=(ie=U[2])==null?void 0:ie.lead)==null?void 0:le.first_name)!=null?K:"")+"")&&be(r,s),(!k||J&4)&&u!==(u=((Me=(ne=(Z=U[2])==null?void 0:Z.lead)==null?void 0:ne.last_name)!=null?Me:"")+"")&&be(m,u),(Ve=(De=U[2])==null?void 0:De.lead)!=null&&Ve.username?I?I.p(U,J):(I=cn(U),I.c(),I.m(p,null)):I&&(I.d(1),I=null),(Te=(ee=U[2])==null?void 0:ee.lead)!=null&&Te.ref_link?C?C.p(U,J):(C=un(U),C.c(),C.m(y.parentNode,y)):C&&(C.d(1),C=null);const me={};J&1&&(me.app=U[0]),J&4&&(me.dialog_id=U[2].id),M.$set(me)},i(U){k||(O(M.$$.fragment,U),k=!0)},o(U){H(M.$$.fragment,U),k=!1},d(U){U&&R(e),U&&R(d),U&&R(p),I&&I.d(),U&&R(v),C&&C.d(U),U&&R(y),U&&R(b),ce(M),U&&R(L),U&&R(T)}}}function cn(l){let e,t=l[2].lead.username+"",n;return{c(){e=ae("@"),n=ae(t)},m(i,s){N(i,e,s),N(i,n,s)},p(i,s){s&4&&t!==(t=i[2].lead.username+"")&&be(n,t)},d(i){i&&R(e),i&&R(n)}}}function un(l){var u,m;let e,t,n,i,s=((m=(u=l[2])==null?void 0:u.lead)==null?void 0:m.ref_link)+"",r,o,a,f,c;return{c(){e=w("div"),t=w("div"),t.innerHTML=`Ref link
						<img src="assets/icons/copy-clipboard.png" class="refLinkIcon svelte-qywc37" style="width: 14px; height: 14px; filter: invert(1);"/>`,n=D(),i=w("div"),r=ae(s),o=D(),a=w("div"),h(t,"class","flex flex_cy h100 refLinkLabel svelte-qywc37"),h(i,"class","flex flex_cy h100 overhide textOverEllipsis nowrap refLinkContent svelte-qywc37"),h(e,"class","flex flex_cy nowrap refLink overhide textOverEllipsis cursor_ptr unselect svelte-qywc37"),j(a,"height","4px")},m(_,d){N(_,e,d),g(e,t),g(e,n),g(e,i),g(i,r),N(_,o,d),N(_,a,d),f||(c=$(e,"click",l[6]),f=!0)},p(_,d){var p,v;d&4&&s!==(s=((v=(p=_[2])==null?void 0:p.lead)==null?void 0:v.ref_link)+"")&&be(r,s)},d(_){_&&R(e),_&&R(o),_&&R(a),f=!1,c()}}}function dn(l){let e,t,n,i;return t=new Gn({}),{c(){e=w("div"),de(t.$$.fragment),h(e,"class","pos_abs loading svelte-qywc37")},m(s,r){N(s,e,r),fe(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&He(()=>{n||(n=Ae(e,Ee,{},!0)),n.run(1)}),i=!0)},o(s){H(t.$$.fragment,s),s&&(n||(n=Ae(e,Ee,{},!1)),n.run(0)),i=!1},d(s){s&&R(e),ce(t),s&&n&&n.end()}}}function Hr(l){let e,t,n,i,s,r,o=l[2]&&fn(l);i=new Nr({props:{app:l[0]}});let a=l[1]&&dn();return{c(){e=w("div"),t=w("div"),o&&o.c(),n=D(),de(i.$$.fragment),s=D(),a&&a.c(),h(t,"class","flex flex_clm flex_cx flex_grow_1"),h(e,"class","flex flex_cy header pos_rel svelte-qywc37")},m(f,c){N(f,e,c),g(e,t),o&&o.m(t,null),g(t,n),fe(i,t,null),g(e,s),a&&a.m(e,null),r=!0},p(f,[c]){f[2]?o?(o.p(f,c),c&4&&O(o,1)):(o=fn(f),o.c(),O(o,1),o.m(t,n)):o&&(ke(),H(o,1,1,()=>{o=null}),Se());const u={};c&1&&(u.app=f[0]),i.$set(u),f[1]?a?c&2&&O(a,1):(a=dn(),a.c(),O(a,1),a.m(e,null)):a&&(ke(),H(a,1,1,()=>{a=null}),Se())},i(f){r||(O(o),O(i.$$.fragment,f),O(a),r=!0)},o(f){H(o),H(i.$$.fragment,f),H(a),r=!1},d(f){f&&R(e),o&&o.d(),ce(i),a&&a.d()}}}function Pr(l,e,t){let n,i,{app:s}=e;const{dialogMap_r:r}=s;he(l,r,c=>t(5,i=c));let{dialog_id:o=null}=e,{loading:a=!1}=e;const f=()=>{var c;return hs((c=n==null?void 0:n.lead)==null?void 0:c.ref_link)};return l.$$set=c=>{"app"in c&&t(0,s=c.app),"dialog_id"in c&&t(4,o=c.dialog_id),"loading"in c&&t(1,a=c.loading)},l.$$.update=()=>{l.$$.dirty&48&&t(2,n=i[o])},[s,a,n,r,o,i,f]}class qr extends we{constructor(e){super(),ve(this,e,Pr,Hr,_e,{app:0,dialog_id:4,loading:1})}}function Br(l){let e,t;return{c(){e=w("img"),h(e,"class","fileImg overhide svelte-n30zkz"),Re(e.src,t="assets/icons/folder.png")||h(e,"src",t),h(e,"draggable","false")},m(n,i){N(n,e,i)},p:ue,i:ue,o:ue,d(n){n&&R(e)}}}function Gr(l){let e,t,n,i;return n=new xn({props:{size:"40",state:l[11]}}),n.$on("click",l[18]),{c(){e=w("div"),t=D(),de(n.$$.fragment),j(e,"width","4px")},m(s,r){N(s,e,r),N(s,t,r),fe(n,s,r),i=!0},p(s,r){const o={};r&2048&&(o.state=s[11]),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&R(e),s&&R(t),ce(n,s)}}}function xr(l){let e,t;return{c(){e=w("img"),h(e,"class","fileImg overhide svelte-n30zkz"),Re(e.src,t=l[2])||h(e,"src",t),h(e,"draggable","false")},m(n,i){N(n,e,i)},p(n,i){i&4&&!Re(e.src,t=n[2])&&h(e,"src",t)},i:ue,o:ue,d(n){n&&R(e)}}}function _n(l){let e,t,n;return{c(){e=w("div"),e.innerHTML='<img class="w100 h100 svelte-n30zkz" draggable="false" src="assets/icons/fullscreen.png"/>',h(e,"class","flex cursor_ptr imgCtrlBtn svelte-n30zkz")},m(i,s){N(i,e,s),t||(n=$(e,"click",l[14]),t=!0)},p:ue,d(i){i&&R(e),t=!1,n()}}}function Wr(l){let e,t,n,i,s,r,o,a,f,c,u,m,_,d,p=l[16](l[4])+"",v,y,b,M,L,T,k,I,C,P,B,E,x;const W=[xr,Gr,Br],F=[];function G(q,S){return q[1]==="IM"?0:q[1]==="VC"?1:2}s=G(l),r=F[s]=W[s](l);let V=l[1]==="IM"&&_n(l);return P=new vt({props:{size:"32",color:"#fff"}}),{c(){e=w("div"),t=w("div"),n=w("div"),i=w("div"),r.c(),o=D(),a=w("div"),f=D(),c=w("div"),u=w("div"),m=ae(l[3]),_=D(),d=w("div"),v=ae(p),y=D(),b=w("div"),V&&V.c(),M=D(),L=w("div"),L.innerHTML='<img class="w100 h100 svelte-n30zkz" draggable="false" src="assets/icons/close.png"/>',T=D(),k=w("div"),k.innerHTML='<img class="w100 h100 svelte-n30zkz" draggable="false" src="assets/icons/send.png"/>',I=D(),C=w("div"),de(P.$$.fragment),h(i,"class","flex flex_cy"),j(a,"width","4px"),h(u,"class","flex nowrap textOverEllipsis fileNameLabel svelte-n30zkz"),h(d,"class","flex fileSizeLabel svelte-n30zkz"),h(c,"class","flex flex_clm"),h(L,"class","flex cursor_ptr imgCtrlBtn svelte-n30zkz"),h(k,"class","flex cursor_ptr imgCtrlBtn svelte-n30zkz"),Y(k,"disabled",l[0]===null||l[0]===void 0),h(b,"class","flex pos_abs imgCtrlBtnGroup svelte-n30zkz"),Y(b,"hide",l[7]||l[6]||l[5]),h(C,"class","flex flex_cy pos_abs loading svelte-n30zkz"),Y(C,"hide",!l[7]),h(n,"class","flex itemc svelte-n30zkz"),h(t,"class","flex overhide pos_rel flex_grow_1 item svelte-n30zkz"),Y(t,"doneAni",l[9]),Y(t,"failAni",l[8]),Y(t,"destroy",l[6]),h(e,"class","flex overhide pos_rel unselect cnt svelte-n30zkz"),j(e,"height",l[10]+"px")},m(q,S){N(q,e,S),g(e,t),g(t,n),g(n,i),F[s].m(i,null),g(n,o),g(n,a),g(n,f),g(n,c),g(c,u),g(u,m),g(c,_),g(c,d),g(d,v),g(n,y),g(n,b),V&&V.m(b,null),g(b,M),g(b,L),g(b,T),g(b,k),g(n,I),g(n,C),fe(P,C,null),B=!0,E||(x=[$(L,"click",l[13]),$(k,"click",l[15])],E=!0)},p(q,[S]){let U=s;s=G(q),s===U?F[s].p(q,S):(ke(),H(F[U],1,1,()=>{F[U]=null}),Se(),r=F[s],r?r.p(q,S):(r=F[s]=W[s](q),r.c()),O(r,1),r.m(i,null)),(!B||S&8)&&be(m,q[3]),(!B||S&16)&&p!==(p=q[16](q[4])+"")&&be(v,p),q[1]==="IM"?V?V.p(q,S):(V=_n(q),V.c(),V.m(b,M)):V&&(V.d(1),V=null),(!B||S&1)&&Y(k,"disabled",q[0]===null||q[0]===void 0),(!B||S&224)&&Y(b,"hide",q[7]||q[6]||q[5]),(!B||S&128)&&Y(C,"hide",!q[7]),(!B||S&512)&&Y(t,"doneAni",q[9]),(!B||S&256)&&Y(t,"failAni",q[8]),(!B||S&64)&&Y(t,"destroy",q[6]),(!B||S&1024)&&j(e,"height",q[10]+"px")},i(q){B||(O(r),O(P.$$.fragment,q),B=!0)},o(q){H(r),H(P.$$.fragment,q),B=!1},d(q){q&&R(e),F[s].d(),V&&V.d(),ce(P),E=!1,je(x)}}}function Yr(l,e,t){let n,i;const s=$t();let{app:r}=e,{dialog_id:o}=e,{file_type:a=""}=e,{fileImgUrl:f=""}=e,{name:c=""}=e,{size:u=0}=e,{close:m=!1}=e,{destroy:_=!1}=e,{loading:d=!1}=e,{failSeq:p=0}=e,{doneSeq:v=0}=e;const y=xe(0);he(l,y,F=>t(10,n=F));const b=F=>!m&&!_&&!d&&s("cancel"),M=F=>!m&&!_&&!d&&r.events.emit("openOverlayImageView",f),L=F=>!m&&!_&&!d&&s("send"),T=F=>{const G=["b","kb","mb","gb"];let V=0;for(;V<G.length-1&&!(F<1024);)F/=1024,V++;return F.toFixed(2)+G[V]};let k=!1;const I=F=>{if(!F)return;t(8,k=!0);const G=F;setTimeout(()=>G===F&&t(8,k=!1),1e3)};let C=!1;const P=F=>{if(!F)return;t(9,C=!0);const G=F;setTimeout(()=>G===F&&t(9,C=!1),1e3)},B=F=>{!F||Qe(y,n=0,n)},E=r.audioMgr.getControlAudio({url:f,cache:!0,name:c}),{state_r:x}=E.info_r;he(l,x,F=>t(11,i=F));const W=()=>{!E||(i==="pause"&&E.play(),i==="play"&&E.pause())};return pt(()=>Qe(y,n=48+4,n)),l.$$set=F=>{"app"in F&&t(19,r=F.app),"dialog_id"in F&&t(0,o=F.dialog_id),"file_type"in F&&t(1,a=F.file_type),"fileImgUrl"in F&&t(2,f=F.fileImgUrl),"name"in F&&t(3,c=F.name),"size"in F&&t(4,u=F.size),"close"in F&&t(5,m=F.close),"destroy"in F&&t(6,_=F.destroy),"loading"in F&&t(7,d=F.loading),"failSeq"in F&&t(20,p=F.failSeq),"doneSeq"in F&&t(21,v=F.doneSeq)},l.$$.update=()=>{l.$$.dirty&1048576&&I(p),l.$$.dirty&2097152&&P(v),l.$$.dirty&32&&B(m)},[o,a,f,c,u,m,_,d,k,C,n,i,y,b,M,L,T,x,W,r,p,v]}class Vr extends we{constructor(e){super(),ve(this,e,Yr,Wr,_e,{app:19,dialog_id:0,file_type:1,fileImgUrl:2,name:3,size:4,close:5,destroy:6,loading:7,failSeq:20,doneSeq:21})}}function mn(l,e,t){const n=l.slice();return n[11]=e[t],n}function gn(l,e){let t,n,i;return n=new Vr({props:{app:e[0],name:e[11].name,size:e[11].size,fileImgUrl:e[11].fileImgUrl,file_type:e[11].file_type,dialog_id:e[1],close:e[11]._close,destroy:e[11]._destroy,loading:e[11]._loading,failSeq:e[11]._failSeq,doneSeq:e[11]._doneSeq}}),n.$on("send",function(){Xe(e[4](e[11]))&&e[4](e[11]).apply(this,arguments)}),n.$on("cancel",function(){Xe(e[3](e[11]))&&e[3](e[11]).apply(this,arguments)}),{key:l,first:null,c(){t=Ue(),de(n.$$.fragment),this.first=t},m(s,r){N(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&1&&(o.app=e[0]),r&4&&(o.name=e[11].name),r&4&&(o.size=e[11].size),r&4&&(o.fileImgUrl=e[11].fileImgUrl),r&4&&(o.file_type=e[11].file_type),r&2&&(o.dialog_id=e[1]),r&4&&(o.close=e[11]._close),r&4&&(o.destroy=e[11]._destroy),r&4&&(o.loading=e[11]._loading),r&4&&(o.failSeq=e[11]._failSeq),r&4&&(o.doneSeq=e[11]._doneSeq),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&R(t),ce(n,s)}}}function Jr(l){let e,t=[],n=new Map,i,s=l[2];const r=o=>o[11].id;for(let o=0;o<s.length;o+=1){let a=mn(l,s,o),f=r(a);n.set(f,t[o]=gn(f,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();h(e,"class","flex flex_clm pos_rel unselect list svelte-112l8o6")},m(o,a){N(o,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);i=!0},p(o,[a]){a&31&&(s=o[2],ke(),t=Ke(t,a,r,1,o,s,n,e,tt,gn,null,mn),Se())},i(o){if(!i){for(let a=0;a<s.length;a+=1)O(t[a]);i=!0}},o(o){for(let a=0;a<t.length;a+=1)H(t[a]);i=!1},d(o){o&&R(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Xr(l,e,t){let{app:n}=e,{dialog_id:i}=e,s=[],r=1;const o=_=>{const d={id:r++,file:_,name:_.name,type:_.type,size:_.size,fileImgUrl:"assets/icons/folder.png",file_type:"DC",_close:!1,_destroy:!1,_loading:!1,_failSeq:0,_doneSeq:0};_.type.startsWith("image/")&&(d.file_type="IM",d.fileImgUrl=URL.createObjectURL(_)),_.type.startsWith("audio/")&&(d.file_type="VC",d.fileImgUrl=URL.createObjectURL(_)),console.log("addfile",d),s.push(d),t(2,s)},a=_=>d=>{_._close=Date.now(),t(2,s),setTimeout(()=>{const p=Date.now();t(2,s=s.filter(v=>!v._close||v._close+1e3>p))},2e3)},f=[];let c=!1;const u=async()=>{if(!c){for(c=!0;f.length;){const _=f.shift();for(;!_.destroy;){if(!_.attachment){await at(10);continue}const d=await n.api.message_Create(_.dialog_id,"",[{file:_.attachment.id,file_type:_.file.file_type}]);_.file._loading=!1,d?(_.file._doneSeq++,_.file._destroy=Date.now(),setTimeout(()=>{a(_.file)()},2e3)):_.file._failSeq++,t(2,s);break}}c=!1}},m=_=>async d=>{const p=i;if(p==null||_._loading)return;_._loading=!0,t(2,s);const v={dialog_id:p,file:_,attachment:null,destroy:!1};f.push(v),u();const y=()=>{v.destroy=!0,_._failSeq++,_._loading=!1,t(2,s)},b=await n.api.file_Upload(_.file);if(!b)return y();v.attachment=b};return l.$$set=_=>{"app"in _&&t(0,n=_.app),"dialog_id"in _&&t(1,i=_.dialog_id)},[n,i,s,a,m,o]}class Kr extends we{constructor(e){super(),ve(this,e,Xr,Jr,_e,{app:0,dialog_id:1,addFile:5})}get addFile(){return this.$$.ctx[5]}}function pn(l,e,t){const n=l.slice();return n[46]=e[t],n}function hn(l,e){let t,n,i;return n=new pr({props:{app:e[0],bbox:e[11],message:e[46],render_Width:e[8]}}),{key:l,first:null,c(){t=Ue(),de(n.$$.fragment),this.first=t},m(s,r){N(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r[0]&1&&(o.app=e[0]),r[0]&2048&&(o.bbox=e[11]),r[0]&4&&(o.message=e[46]),r[0]&256&&(o.render_Width=e[8]),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&R(t),ce(n,s)}}}function vn(l){let e,t,n;return{c(){e=w("div"),e.innerHTML='<img src="assets/icons/upload.png" draggable="false" class="svelte-18v90rq"/>',h(e,"class","flex flex_cx flex_cy pos_abs dropZone svelte-18v90rq")},m(i,s){N(i,e,s),n=!0},i(i){n||(i&&He(()=>{t||(t=Ae(e,Ee,{},!0)),t.run(1)}),n=!0)},o(i){i&&(t||(t=Ae(e,Ee,{},!1)),t.run(0)),n=!1},d(i){i&&R(e),i&&t&&t.end()}}}function Zr(l){let e,t,n,i,s,r,o,a=[],f=new Map,c,u,m,_,d,p,v,y,b,M,L,T,k,I,C,P,B;t=new qr({props:{app:l[0],dialog_id:l[1],loading:l[3]}});let E=l[2];const x=S=>S[46].index;for(let S=0;S<E.length;S+=1){let U=pn(l,E,S),J=x(U);f.set(J,a[S]=hn(J,U))}function W(S){l[23](S)}let F={value_in:l[4]};l[5]!==void 0&&(F.value_out=l[5]),m=new Bn({props:F}),Ne.push(()=>ot(m,"value_out",W));let G=l[10]&&vn();function V(S){l[24](S)}let q={app:l[0],dialog_id:l[1]};return l[9]!==void 0&&(q.addFile=l[9]),y=new Kr({props:q}),Ne.push(()=>ot(y,"addFile",V)),{c(){e=w("div"),de(t.$$.fragment),n=D(),i=w("div"),s=w("div"),r=w("div"),o=w("div");for(let S=0;S<a.length;S+=1)a[S].c();c=D(),u=w("div"),de(m.$$.fragment),d=D(),G&&G.c(),p=D(),v=w("div"),de(y.$$.fragment),M=D(),L=w("div"),T=w("textarea"),k=D(),I=w("div"),I.innerHTML='<img src="assets/icons/upload.png" draggable="false" class="svelte-18v90rq"/>',h(o,"class","pos_rel w100 h100"),h(u,"class","pos_abs h100 chatScroll svelte-18v90rq"),h(r,"class","pos_rel w100 h100"),h(s,"class","flex pos_abs overhide"),h(v,"class","flex pos_abs"),j(v,"padding","10px"),j(v,"bottom","0px"),j(v,"z-index","3"),h(i,"class","flex flex_grow_1 pos_rel overhide"),h(T,"class","flex flex_grow_1 chat_input_textarea svelte-18v90rq"),h(I,"class","flex pos_abs cursor_ptr unselect btnUpload svelte-18v90rq"),h(L,"class","flex pos_rel chat_input svelte-18v90rq"),h(e,"class","flex flex_clm flex_grow_1 overhide cnt svelte-18v90rq")},m(S,U){N(S,e,U),fe(t,e,null),g(e,n),g(e,i),g(i,s),g(s,r),g(r,o);for(let J=0;J<a.length;J+=1)a[J].m(o,null);l[22](o),g(r,c),g(r,u),fe(m,u,null),g(i,d),G&&G.m(i,null),g(i,p),g(i,v),fe(y,v,null),g(e,M),g(e,L),g(L,T),al(T,l[7]),g(L,k),g(L,I),C=!0,P||(B=[$(window,"paste",l[17]),$(r,"wheel",l[15],{passive:!0}),ft(ht.call(null,s,l[13])),$(T,"input",l[25]),$(T,"keyup",l[14]),$(T,"keydown",l[14]),$(I,"click",l[16]),$(e,"drop",l[18]),$(e,"dragover",l[19])],P=!0)},p(S,U){const J={};U[0]&1&&(J.app=S[0]),U[0]&2&&(J.dialog_id=S[1]),U[0]&8&&(J.loading=S[3]),t.$set(J),U[0]&2309&&(E=S[2],ke(),a=Ke(a,U,x,1,S,E,f,o,tt,hn,null,pn),Se());const me={};U[0]&16&&(me.value_in=S[4]),!_&&U[0]&32&&(_=!0,me.value_out=S[5],rt(()=>_=!1)),m.$set(me),S[10]?G?U[0]&1024&&O(G,1):(G=vn(),G.c(),O(G,1),G.m(i,p)):G&&(ke(),H(G,1,1,()=>{G=null}),Se());const ie={};U[0]&1&&(ie.app=S[0]),U[0]&2&&(ie.dialog_id=S[1]),!b&&U[0]&512&&(b=!0,ie.addFile=S[9],rt(()=>b=!1)),y.$set(ie),U[0]&128&&al(T,S[7])},i(S){if(!C){O(t.$$.fragment,S);for(let U=0;U<E.length;U+=1)O(a[U]);O(m.$$.fragment,S),O(G),O(y.$$.fragment,S),C=!0}},o(S){H(t.$$.fragment,S);for(let U=0;U<a.length;U+=1)H(a[U]);H(m.$$.fragment,S),H(G),H(y.$$.fragment,S),C=!1},d(S){S&&R(e),ce(t);for(let U=0;U<a.length;U+=1)a[U].d();l[22](null),ce(m),G&&G.d(),ce(y),P=!1,je(B)}}}const wn=10,St=4;function Qr(l,e,t){let n,i,s,{app:r}=e;const{dialogMap_r:o}=r;he(l,o,ee=>t(21,i=ee));let{dialog_id:a=null}=e,f=[],c=[],u=new Set,m=0,_=0,d=1,p=1,v=null;const y=Fe(null);he(l,y,ee=>t(11,s=ee)),new Date().toJSON();let b=-1;async function M(ee,Te=0,pe=20){const Le=await r.api.message_GetList({dialog_id:ee,offset:Te,limit:pe});if(!!Le&&n&&n.id===ee){for(m=Le.count;f.length<m;){const A=f.length;f.push({id:b--,index:A,_isFakeMsg:!0})}const ze=Le.results.map(A=>{var z;return(z=A==null?void 0:A.attachments)!=null&&z.length&&A.attachments.map(X=>{var re,oe,se,Q,ge,ye,te,Ie;if((oe=(re=r==null?void 0:r.appConfig)==null?void 0:re.api)!=null&&oe.attachments_OverwriteApiHostProtocol)try{const Ce=new URL(X.url);Ce.protocol=(ge=(Q=(se=r==null?void 0:r.appConfig)==null?void 0:se.api)==null?void 0:Q.protocol)!=null?ge:location.protocol,Ce.host=(Ie=(te=(ye=r==null?void 0:r.appConfig)==null?void 0:ye.api)==null?void 0:te.host)!=null?Ie:location.host,X.url=String(Ce)}catch{}}),A});ze.map((A,z)=>A.index=Te+z),ze.map(A=>f[A.index]=A)}}let L="";const T=async ee=>{if(ee.which===13&&!ee.shiftKey&&!ee.ctrlKey&&(ee.preventDefault(),t(7,L=L.trim()),L)){const Te=L;t(7,L=""),n&&await r.api.message_Create(n.id,Te)}};function k(){f=[],t(2,c=[]),u=new Set,m=0,console.log("clear all")}let I=null,C=null;async function P(ee){if(!ee){if(!I)return;I=null,k();return}C!==ee.id&&(I=ee,C=ee.id,k(),f=[],t(2,c=[]),m=0,t(3,_++,_),await M(ee.id),m&&await M(ee.id,Math.max(m-20,0),20),await r.api.dialog_SetReadFlagAllMessages(ee.id),t(3,_--,_))}let B=1,E=!0;function x(){if(E&&requestAnimationFrame(x),!s||!v||!f.length)return;s.width;const ee=s.height,Te=s.width-wn*2,pe=wn;t(8,B=Te-Math.max(120,Math.floor(Te*.1)));const Le=1+p*(f.length-1);let ze=Math.floor(Le),A=Le-ze;ze>=f.length&&(ze=f.length-1,A=1);const z=[],X=[];let re=null;t(2,c=[]);for(let se=ze-100,Q=0,ge=!0;se<ze+100;se++)se<0||se>=f.length||(f[se]._isFakeMsg&&u.add(se),c[Q]!==f[se]&&(ge&&(ge=!1,c.splice(Q,1e9)),t(2,c[Q]=f[se],c),t(2,c)),t(2,c[Q]._drawIndex=Q,c),se<ze&&z.push(c[Q]),se>ze&&X.push(c[Q]),se===ze&&(re=c[Q]),Q++);const oe=[...v.children];if(oe.length===c.length){oe.map((te,Ie)=>{const Ce=c[Ie];if(!Ce||te._remove)return;const $e=te.getBoundingClientRect();te._bbox=$e;const We=Math.floor(pe+(Ce.incoming?0:Math.max(100,s.width*.05)));te.__cacheWidth!==B&&(te.__cacheWidth=B,te.style.maxWidth=B+"px"),te.__cacheLeft!==We&&(te.__cacheLeft=We,te.style.left=We+"px")});const se=(te,Ie,Ce=1)=>(te.__cacheTop!==Ie&&(te.__cacheTop=Ie,te.style.transform=`translate3d(0px, ${Ie}px, 0px)`),Ie+(te._bbox.height+St)*Ce);let Q=0,ge=0;const ye=oe[re._drawIndex];if(ye){const te=ye;Q=ee+St-(te._bbox.height+St)*A,ge=Q,Q=se(te,Q,1)}X.map((te,Ie)=>{const Ce=oe[te._drawIndex];Q=se(Ce,Q,1)}),Q=ge,z.reverse().map((te,Ie)=>{const Ce=oe[te._drawIndex];Q-=Ce._bbox.height+St,se(Ce,Q,0)})}}requestAnimationFrame(x),Be(()=>E=!1);async function W(){if(u.size){const ee=[...u].sort((Le,ze)=>Le-ze);u.clear();const Te=[];let pe={offset:null,limit:0};for(const Le of ee){if(pe.offset!==null){if(pe.limit<=500&&pe.offset+pe.limit===Le){pe.limit++;continue}Te.push(pe)}pe={offset:Le,limit:1}}pe.offset!==null&&Te.push(pe),n&&(t(3,_++,_),await Promise.all(Te.map(Le=>M(n.id,Le.offset,Le.limit))),t(3,_--,_))}E&&setTimeout(W,500)}W();async function F(){n&&await r.api.dialog_SetReadFlagAllMessages(n.id),E&&setTimeout(F,5e3)}F();async function G(){n&&await M(n.id,m,20),E&&setTimeout(G,500)}G();const V=ee=>{t(4,d=f.length?p+Math.sign(ee.deltaY)/(f.length-1):0)};let q=[],S=()=>{};const U=ee=>{q=[...q,...ee],ee.map(S)};let J=!1;const me=Nt(200,()=>t(10,J=!1)),ie=async ee=>{const Te=document.createElement("input");Te.setAttribute("type","file"),Te.setAttribute("multiple",!0),Te.addEventListener("input",pe=>{U([...Te.files])}),Te.click()},le=async ee=>{try{U([...ee.clipboardData.files])}catch{}},K=async ee=>{ee.preventDefault(),ee.stopPropagation();try{U([...ee.dataTransfer.files])}catch{}},Z=async ee=>{ee.preventDefault(),ee.stopPropagation(),t(10,J=!0),me()};function ne(ee){Ne[ee?"unshift":"push"](()=>{v=ee,t(6,v)})}function Me(ee){p=ee,t(5,p)}function De(ee){S=ee,t(9,S)}function Ve(){L=this.value,t(7,L)}return l.$$set=ee=>{"app"in ee&&t(0,r=ee.app),"dialog_id"in ee&&t(1,a=ee.dialog_id)},l.$$.update=()=>{l.$$.dirty[0]&2097154&&t(20,n=i[a]),l.$$.dirty[0]&1048576&&P(n)},[r,a,c,_,d,p,v,L,B,S,J,s,o,y,T,V,ie,le,K,Z,n,i,ne,Me,De,Ve]}class $r extends we{constructor(e){super(),ve(this,e,Qr,Zr,_e,{app:0,dialog_id:1},null,[-1,-1])}}function bn(l){let e,t;return e=new ll({props:{height:"6"}}),{c(){de(e.$$.fragment)},m(n,i){fe(e,n,i),t=!0},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function eo(l){let e,t,n,i,s,r,o,a,f,c,u,m,_,d,p,v,y,b,M,L,T,k,I,C,P,B,E,x,W,F,G,V,q,S=l[3]&&bn();function U(le){l[9](le)}let J={};l[2]!==void 0&&(J.checked=l[2]),b=new Vi({props:J}),Ne.push(()=>ot(b,"checked",U));function me(le){l[10](le)}let ie={app:l[0]};return l[1]!==void 0&&(ie.filterStatus=l[1]),I=new ir({props:ie}),Ne.push(()=>ot(I,"filterStatus",me)),x=new lr({props:{app:l[0],filter:{filterTag:yn,filterStatus:l[1],filterUnreadFirst:l[2]}}}),F=new $r({props:{app:l[0],dialog_id:l[5]}}),{c(){e=w("div"),t=w("div"),n=w("div"),i=D(),s=w("div"),r=w("div"),o=w("div"),o.innerHTML=`Download report
					<div class="flex cursor_ptr imgCtrlBtn svelte-1xf5cbg"><img class="w100 h100 svelte-1xf5cbg" draggable="false" src="assets/icons/download.png"/></div>`,a=D(),f=w("div"),c=D(),S&&S.c(),u=D(),m=w("div"),_=D(),d=w("label"),p=ae(`First unread \r
				`),v=w("div"),y=D(),de(b.$$.fragment),L=D(),T=w("div"),k=D(),de(I.$$.fragment),P=D(),B=w("div"),E=D(),de(x.$$.fragment),W=D(),de(F.$$.fragment),j(n,"height","2px"),h(o,"class","flex flex_cy downloadReportLabel svelte-1xf5cbg"),Y(o,"downloadReportDisabled",l[3]),Y(o,"animationDone",l[4]==="done"),Y(o,"animationFail",l[4]==="fail"),j(f,"width","8px"),h(r,"class","flex flex_cy cursor_ptr unselect downloadDialogs svelte-1xf5cbg"),j(m,"height","2px"),j(v,"width","4px"),h(d,"class","flex flex_cy cursor_ptr unselect firstUnread svelte-1xf5cbg"),j(T,"height","2px"),h(s,"class","flex flex_clm flex_cx header pos_rel svelte-1xf5cbg"),j(B,"min-height","20px"),h(t,"class","flex flex_clm list svelte-1xf5cbg"),h(e,"class","flex flex_grow_1")},m(le,K){N(le,e,K),g(e,t),g(t,n),g(t,i),g(t,s),g(s,r),g(r,o),g(r,a),g(r,f),g(r,c),S&&S.m(r,null),g(s,u),g(s,m),g(s,_),g(s,d),g(d,p),g(d,v),g(d,y),fe(b,d,null),g(s,L),g(s,T),g(s,k),fe(I,s,null),g(t,P),g(t,B),g(t,E),fe(x,t,null),g(e,W),fe(F,e,null),G=!0,V||(q=$(r,"click",l[8]),V=!0)},p(le,[K]){(!G||K&8)&&Y(o,"downloadReportDisabled",le[3]),(!G||K&16)&&Y(o,"animationDone",le[4]==="done"),(!G||K&16)&&Y(o,"animationFail",le[4]==="fail"),le[3]?S?K&8&&O(S,1):(S=bn(),S.c(),O(S,1),S.m(r,null)):S&&(ke(),H(S,1,1,()=>{S=null}),Se());const Z={};!M&&K&4&&(M=!0,Z.checked=le[2],rt(()=>M=!1)),b.$set(Z);const ne={};K&1&&(ne.app=le[0]),!C&&K&2&&(C=!0,ne.filterStatus=le[1],rt(()=>C=!1)),I.$set(ne);const Me={};K&1&&(Me.app=le[0]),K&6&&(Me.filter={filterTag:yn,filterStatus:le[1],filterUnreadFirst:le[2]}),x.$set(Me);const De={};K&1&&(De.app=le[0]),K&32&&(De.dialog_id=le[5]),F.$set(De)},i(le){G||(O(S),O(b.$$.fragment,le),O(I.$$.fragment,le),O(x.$$.fragment,le),O(F.$$.fragment,le),G=!0)},o(le){H(S),H(b.$$.fragment,le),H(I.$$.fragment,le),H(x.$$.fragment,le),H(F.$$.fragment,le),G=!1},d(le){le&&R(e),S&&S.d(),ce(b),ce(I),ce(x),ce(F),V=!1,q()}}}let yn=null;function to(l,e,t){let n,i,{app:s}=e;const{dialogActiveID_r:r}=s;he(l,r,y=>t(5,i=y));let o=null,a=1,f=!1,c=null;const u=Nt(1e3,()=>t(4,c=null)),m=s.operatorSelf_r;he(l,m,y=>t(11,n=y));const _=()=>{var y;return"dialog_report "+((y=n==null?void 0:n.username)!=null?y:"UNK_USER")+"-"+Hn(new Date)+".csv"},d=async y=>{var b;if(!f){t(3,f=!0);try{const M=await s.api.dialog_DownloadReport();M?(ys(URL.createObjectURL(M.blob),(b=M.filename)!=null?b:_()),t(4,c="done")):t(4,c="fail")}catch{t(4,c="fail")}u(),t(3,f=!1)}};function p(y){a=y,t(2,a)}function v(y){o=y,t(1,o)}return l.$$set=y=>{"app"in y&&t(0,s=y.app)},[s,o,a,f,c,i,r,m,d,p,v]}class lo extends we{constructor(e){super(),ve(this,e,to,eo,_e,{app:0})}}function no(l){let e,t,n,i,s,r,o,a,f,c,u,m,_,d,p,v;return{c(){e=w("div"),t=w("div"),n=w("div"),i=w("img"),r=D(),o=w("div"),a=w("div"),a.innerHTML='<img class="w100 h100 svelte-d45see" draggable="false" src="assets/icons/rotate.png"/>',f=D(),c=w("div"),c.innerHTML='<img class="w100 h100 svelte-d45see" draggable="false" src="assets/icons/download.png"/>',u=D(),m=w("div"),m.innerHTML='<img class="w100 h100 svelte-d45see" draggable="false" src="assets/icons/close.png"/>',h(i,"class","img svelte-d45see"),h(i,"draggable","false"),Re(i.src,s=l[0])||h(i,"src",s),j(i,"transform","rotate("+l[3]+"deg)"),h(n,"class","pos_abs flex flex_cx flex_cy pad svelte-d45see"),j(n,"width",l[5]+"px"),j(n,"height",l[4]+"px"),h(t,"class","pos_abs flex flex_cx flex_cy pos_abs w100 h100 "),j(t,"transform","translate("+l[1]+"px, "+l[2]+"px)"),h(a,"class","flex cursor_ptr imgCtrlBtn svelte-d45see"),h(c,"class","flex cursor_ptr imgCtrlBtn svelte-d45see"),h(m,"class","flex cursor_ptr imgCtrlBtn svelte-d45see"),h(o,"class","flex pos_abs imgCtrlBtnGroup svelte-d45see"),h(e,"class","pos_abs w100 h100 unselect cnt layer_bg svelte-d45see")},m(y,b){N(y,e,b),g(e,t),g(t,n),g(n,i),g(e,r),g(e,o),g(o,a),g(o,f),g(o,c),g(o,u),g(o,m),d=!0,p||(v=[$(window,"mousemove",l[14]),$(window,"mouseup",l[13]),$(window,"blur",l[13]),$(window,"keydown",l[16]),$(i,"mousedown",l[12]),ft(ht.call(null,t,l[6])),$(a,"click",l[10]),$(c,"click",function(){Xe(Ft(l[0]))&&Ft(l[0]).apply(this,arguments)}),$(m,"click",l[15]),$(e,"wheel",l[11])],p=!0)},p(y,[b]){l=y,(!d||b&1&&!Re(i.src,s=l[0]))&&h(i,"src",s),(!d||b&8)&&j(i,"transform","rotate("+l[3]+"deg)"),(!d||b&32)&&j(n,"width",l[5]+"px"),(!d||b&16)&&j(n,"height",l[4]+"px"),(!d||b&6)&&j(t,"transform","translate("+l[1]+"px, "+l[2]+"px)")},i(y){d||(He(()=>{_||(_=Ae(e,Ee,{duration:100},!0)),_.run(1)}),d=!0)},o(y){_||(_=Ae(e,Ee,{duration:100},!1)),_.run(0),d=!1},d(y){y&&R(e),y&&_&&_.end(),p=!1,je(v)}}}function so(l,e,t){let n,i,s,r,{url:o=null}=e;const a=$t(),f=Fe(null);he(l,f,P=>t(18,n=P));const c=xe(0);he(l,c,P=>t(3,i=P));const u=xe(0);he(l,u,P=>t(5,r=P));const m=xe(0);he(l,m,P=>t(4,s=P));let _=0,d=0,p={rotate:0,scale:1,whInverse:!1};const v=()=>{if(!n||!p)return;const P=p.whInverse?n.height:n.width,B=p.whInverse?n.width:n.height;Qe(u,r=P*p.scale,r),Qe(m,s=B*p.scale,s),Qe(c,i=p.rotate,i)},y=()=>{!n||!p||(t(17,p.rotate+=90,p),t(17,p.whInverse=!p.whInverse,p),t(17,p))},b=P=>{t(17,p.scale=Oe(.1,p.scale+Math.sign(P.deltaY)*.1,10),p)};let M=null;const L=P=>M=[P.clientX,P.clientY,_,d],T=P=>M=null,k=P=>{!M||t(1,[_,d]=[P.clientX,P.clientY].map((B,E)=>B-M[E]+M[E+2]),_,t(2,d))},I=P=>a("close"),C=P=>P.which===27&&I();return l.$$set=P=>{"url"in P&&t(0,o=P.url)},l.$$.update=()=>{l.$$.dirty&393216&&v()},[o,_,d,i,s,r,f,c,u,m,y,b,L,T,k,I,C,p,n]}class io extends we{constructor(e){super(),ve(this,e,so,no,_e,{url:0})}}function kn(l){let e=l[0],t,n,i=Sn(l);return{c(){i.c(),t=Ue()},m(s,r){i.m(s,r),N(s,t,r),n=!0},p(s,r){r&1&&_e(e,e=s[0])?(ke(),H(i,1,1,ue),Se(),i=Sn(s),i.c(),O(i,1),i.m(t.parentNode,t)):i.p(s,r)},i(s){n||(O(i),n=!0)},o(s){H(i),n=!1},d(s){s&&R(t),i.d(s)}}}function Sn(l){let e,t;return e=new io({props:{url:l[1]}}),e.$on("close",l[3]),{c(){de(e.$$.fragment)},m(n,i){fe(e,n,i),t=!0},p(n,i){const s={};i&2&&(s.url=n[1]),e.$set(s)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function ro(l){let e,t,n=l[1]&&kn(l);return{c(){n&&n.c(),e=Ue()},m(i,s){n&&n.m(i,s),N(i,e,s),t=!0},p(i,[s]){i[1]?n?(n.p(i,s),s&2&&O(n,1)):(n=kn(i),n.c(),O(n,1),n.m(e.parentNode,e)):n&&(ke(),H(n,1,1,()=>{n=null}),Se())},i(i){t||(O(n),t=!0)},o(i){H(n),t=!1},d(i){n&&n.d(i),i&&R(e)}}}function oo(l,e,t){let n=1,i=null,{events:s}=e;Be(s.on("openOverlayImageView",o=>{t(0,n++,n),t(1,i=o)}));const r=()=>t(1,i=null);return l.$$set=o=>{"events"in o&&t(2,s=o.events)},[n,i,s,r]}class ao extends we{constructor(e){super(),ve(this,e,oo,ro,_e,{events:2})}}function fo(l){let e,t,n,i,s,r,o,a,f,c,u,m=co;return i=new Ni({props:{app:l[0]}}),r=new xi({props:{app:l[0]}}),a=new lo({props:{app:l[0]}}),c=new ao({props:{events:l[0].events}}),{c(){e=w("div"),t=D(),n=w("div"),de(i.$$.fragment),s=D(),de(r.$$.fragment),o=D(),de(a.$$.fragment),f=D(),de(c.$$.fragment),h(n,"class","flex flex_clm flex_grow_1 leftBlock svelte-ufyhtq"),h(e,"class","flex w100 h100 pos_rel")},m(_,d){N(_,e,d),g(e,t),g(e,n),fe(i,n,null),g(n,s),fe(r,n,null),g(e,o),fe(a,e,null),g(e,f),fe(c,e,null),u=!0},p(_,[d]){},i(_){u||(O(m),O(i.$$.fragment,_),O(r.$$.fragment,_),O(a.$$.fragment,_),O(c.$$.fragment,_),u=!0)},o(_){H(m),H(i.$$.fragment,_),H(r.$$.fragment,_),H(a.$$.fragment,_),H(c.$$.fragment,_),u=!1},d(_){_&&R(e),ce(i),ce(r),ce(a),ce(c)}}}const co=0;function uo(l,e,t){let{operatorSelf:n}=e,{config:i}=e,{notifyEvents:s}=e,{moduleMgr:r}=e,{createApi:o}=e;const a=o(n.username),f=ni(n,i,a,r);return Be(f.destroy),l.$$set=c=>{"operatorSelf"in c&&t(1,n=c.operatorSelf),"config"in c&&t(2,i=c.config),"notifyEvents"in c&&t(3,s=c.notifyEvents),"moduleMgr"in c&&t(4,r=c.moduleMgr),"createApi"in c&&t(5,o=c.createApi)},[f,n,i,s,r,o]}class _o extends we{constructor(e){super(),ve(this,e,uo,fo,_e,{operatorSelf:1,config:2,notifyEvents:3,moduleMgr:4,createApi:5})}}function Ln(l,e,t){const n=l.slice();return n[6]=e[t],n}function mo(l){let e,t,n=l[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=Cn(Ln(l,n,r));const s=r=>H(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Ue()},m(r,o){for(let a=0;a<i.length;a+=1)i[a].m(r,o);N(r,e,o),t=!0},p(r,o){if(o&5){n=r[0];let a;for(a=0;a<n.length;a+=1){const f=Ln(r,n,a);i[a]?(i[a].p(f,o),O(i[a],1)):(i[a]=Cn(f),i[a].c(),O(i[a],1),i[a].m(e.parentNode,e))}for(ke(),a=n.length;a<i.length;a+=1)s(a);Se()}},i(r){if(!t){for(let o=0;o<n.length;o+=1)O(i[o]);t=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)H(i[o]);t=!1},d(r){Zt(i,r),r&&R(e)}}}function go(l){let e,t,n,i,s;return i=new Gn({}),{c(){e=w("div"),t=w("div"),n=D(),de(i.$$.fragment),j(t,"height","20px"),h(e,"class","flex flex_clm flex_grow_1 flex_cy")},m(r,o){N(r,e,o),g(e,t),g(e,n),fe(i,e,null),s=!0},p:ue,i(r){s||(O(i.$$.fragment,r),s=!0)},o(r){H(i.$$.fragment,r),s=!1},d(r){r&&R(e),ce(i)}}}function Mn(l){let e,t,n=l[6].username+"",i;return{c(){e=w("div"),t=ae("@"),i=ae(n),h(e,"class","nowrap textOverEllipsis")},m(s,r){N(s,e,r),g(e,t),g(e,i)},p(s,r){r&1&&n!==(n=s[6].username+"")&&be(i,n)},d(s){s&&R(e)}}}function Cn(l){var M,L;let e,t,n,i=((M=l[6].first_name)!=null?M:"")+"",s,r,o,a,f,c=((L=l[6].last_name)!=null?L:"")+"",u,m,_,d,p,v,y,b=l[6].username&&Mn(l);return{c(){e=w("div"),t=w("div"),n=w("div"),s=ae(i),r=D(),o=w("div"),a=D(),f=w("div"),u=ae(c),m=D(),b&&b.c(),_=D(),j(o,"width","8px"),h(t,"class","flex nowrap textOverEllipsis"),h(e,"class","flex flex_clm cursor_ptr item unselect svelte-1n771m2")},m(T,k){N(T,e,k),g(e,t),g(t,n),g(n,s),g(t,r),g(t,o),g(t,a),g(t,f),g(f,u),g(e,m),b&&b.m(e,null),g(e,_),p=!0,v||(y=$(e,"click",function(){Xe(l[2](l[6]))&&l[2](l[6]).apply(this,arguments)}),v=!0)},p(T,k){var I,C;l=T,(!p||k&1)&&i!==(i=((I=l[6].first_name)!=null?I:"")+"")&&be(s,i),(!p||k&1)&&c!==(c=((C=l[6].last_name)!=null?C:"")+"")&&be(u,c),l[6].username?b?b.p(l,k):(b=Mn(l),b.c(),b.m(e,_)):b&&(b.d(1),b=null)},i(T){p||(T&&He(()=>{d||(d=Ae(e,Ee,{},!0)),d.run(1)}),p=!0)},o(T){T&&(d||(d=Ae(e,Ee,{},!1)),d.run(0)),p=!1},d(T){T&&R(e),b&&b.d(),T&&d&&d.end(),v=!1,y()}}}function po(l){let e,t,n,i;const s=[go,mo],r=[];function o(a,f){return a[1]?0:1}return t=o(l),n=r[t]=s[t](l),{c(){e=w("div"),n.c(),h(e,"class","flex list flex_grow_1 svelte-1n771m2")},m(a,f){N(a,e,f),r[t].m(e,null),i=!0},p(a,[f]){let c=t;t=o(a),t===c?r[t].p(a,f):(ke(),H(r[c],1,1,()=>{r[c]=null}),Se(),n=r[t],n?n.p(a,f):(n=r[t]=s[t](a),n.c()),O(n,1),n.m(e,null))},i(a){i||(O(n),i=!0)},o(a){H(n),i=!1},d(a){a&&R(e),r[t].d()}}}function ho(l,e,t){let{api:n}=e,i=[],s=!1;const r=async()=>{var f,c;t(1,s=!0),t(0,i=(c=(f=await n.operator_GetList())==null?void 0:f.results)!=null?c:[]),t(1,s=!1)};let o=!1;const a=f=>c=>{o||(qn(f),o=!0)};return r(),l.$$set=f=>{"api"in f&&t(3,n=f.api)},[i,s,a,n]}class vo extends we{constructor(e){super(),ve(this,e,ho,po,_e,{api:3})}}const wo=l=>typeof l=="number"&&String(l|0)===String(l);class Wn extends Error{}const Je=async(l,e=null)=>{try{return await l()}catch{}return e},nl=l=>async e=>{if(await Je(()=>e.response.status===l))return e;throw new Error(`Invalid response status, expected ${l}`)},Tn=nl(200),bo=nl(201),yo=nl(204),ko=async l=>{if(await Je(()=>wo(l.result.count)&&Array.isArray(l.result.results)))return l;throw new Error("Invalid result, expected list container")},Lt=async l=>{if(await Je(()=>l.result.detail==="Authentication credentials were not provided.")===!0)throw new Wn("Not authorized");return l},Mt=async l=>({...l,result:l.response.status===204?null:await l.response.json()}),So=(l,e)=>{var a,f,c;const t=(a=l==null?void 0:l.protocol)!=null?a:location.protocol,n=(f=l==null?void 0:l.host)!=null?f:location.host,i=(c=l==null?void 0:l.path_base)!=null?c:"/",s=`${t}//${n}/${i}`,r=new Set(["POST","PATCH","PUT"]),o={...e!=null?e:{},"content-type":"application/json"};return(u,m,_)=>{const d=u.toUpperCase().trim(),p=m!=null?m:"",v=_!=null?_:{},y=new URL(s);d==="GET"&&Object.entries(v).map(([M,L])=>y.searchParams.append(M,L)),y.pathname=[y.pathname,p].join("/").split("/").filter(Boolean).concat(" ").filter(Boolean).join("/").trim();const b=r.has(d)?JSON.stringify(v):null;return new Request(y,{method:d,headers:o,body:b})}},Lo=(l,e,t)=>{var v,y,b,M;const n=So(l,e.operator?{"x-username":e.operator}:{}),i=(v=e.onerror)!=null?v:st,s=(y=e.onnotify)!=null?y:st,r=(b=e.ontimestat)!=null?b:st,o=(M=e.onNotAuthorizedError)!=null?M:st,a=t!=null?t:(L,T)=>T(),f=async([L,T,k,I],C)=>{const P=cl();let B=null,E=null,x={},W=null,F=!1;try{I=I!=null?I:[],B=n(L,T,k);for(const S of I)B=S(B);x.request=B,x.response=E=await a({request:B,method:L,path:T,options:k},()=>fetch(B));for(const S of C)x=await S(x)}catch(S){W=S,F=!0}const V=cl()-P;await Je(()=>{W instanceof Wn&&o()});const q=[];return q.push(...await Je(async()=>{const S=new URL(B.url);return[{type:"normal",chunks:[{color:"#fff",text:B.method},{color:"#000",text:`${S.pathname}${String(S.searchParams)?"?"+S.searchParams:""}`},{color:"#f00",text:await Je(()=>E.status,"")}]},{type:"mini",text:`${S.protocol}//${S.host}`},{type:"mini",text:`Time: ${V.toFixed(2)}ms`}]},[`${L} ${T}`])),q.push(await Je(()=>B.body?"Body: "+JSON.stringify(k).slice(0,100):"")),q.push(await Je(()=>x.result.detail?`Detail: ${x.result.detail}`:"")),q.push(ks(W)),F?i(q):s(q),r({method:L,path:T},V),!F&&x.hasOwnProperty("result")?x.result:null},c=[Mt,Lt],u=[Mt,Lt,bo],m=[Mt,Lt,Tn],_=[Mt,Lt,yo],d=[...m,ko],p={};return p.message_GetList=L=>f(["GET","messages",L],d),p.message_Create=(L,T,k=[])=>f(["POST","messages",{dialog:L,text:T,is_read:!0,attachments:k}],u),p.dialog_GetList=L=>f(["GET","dialogs",L],d),p.dialog_SetTags=(L,T)=>f(["PATCH",`dialogs/${L}`,{tag:T}],m),p.dialog_SetReadFlagAllMessages=L=>f(["POST",`dialogs/${L}/read`,{}],_),p.dialog_DownloadReport=()=>f(["GET","dialogs/download_report",{}],[Tn,async L=>{const T=k=>{const I=k.split(/;(.+)/)[1].split(/=(.+)/)[1];return I.toLowerCase().startsWith("utf-8''")?decodeURIComponent(I.replace("utf-8''","")):I.replace(/['"]/g,"")};return L.result={filename:await Je(()=>T(L.response.headers.get("content-disposition"))),blob:await L.response.blob()},L}]),p.lead_GetUnassignedList=L=>f(["GET","leads/unassigned",L],d),p.lead_AssignOperatorSelft=L=>f(["POST",`leads/${L}/assign`,{}],m),p.lead_SetStatus=(L,T)=>f(["PATCH",`leads/${L}`,{status:T}],m),p.lead_GetUnassignedLeadCount=()=>f(["GET","leads/count_free",{}],m),p.lead_AssignOneLead=()=>f(["POST","leads/get_one",{}],[...c,async L=>await Je(()=>{var T;return L.result=(T={200:!0,400:!1}[L.response.status])!=null?T:null,L})]),p.operatorSelf_GetOnlineInfo=()=>f(["GET","online",{}],m),p.operatorSelf_SetOnlineFlag=L=>f(["PUT","online",{online:!!L}],m),p.operator_GetList=L=>f(["GET","operators",L],d),p.file_Upload=L=>f(["POST","file",{},[T=>{T.headers.delete("content-type");const k=new FormData;return k.append("file",L),new Request(T.url,{method:T.method,headers:T.headers,body:k})}]],m),p.buildRequest=n,p},Mo=()=>{const l=()=>!0,e=A=>new Promise(z=>setTimeout(z,A)),t=(A,z)=>e(A+Math.round(Math.random()*(z-A))),n=(A,z,X)=>Math.min(X,Math.max(A,z)),i=(A=0)=>new Date(Date.now()+(A!=null?A:0)).toJSON(),s=(A,z)=>{var Q;const X=Math.max(0,(z==null?void 0:z.offset)|0),re=n(1,((Q=z==null?void 0:z.limit)!=null?Q:20)|0,1e6),oe=A.length,se=A.slice(X,X+re);return{count:oe,results:se}};let r=1;const o=A=>(A!=null?A:[]).map(z=>({...z,id:r++}));let a=1;const f=[],c={},u=A=>{var z;return(z=c[A])!=null?z:null},m=()=>f,_=A=>{var X,re,oe;const z={operator_id:a++,username:(X=A.username)!=null?X:null,first_name:(re=A.first_name)!=null?re:null,last_name:(oe=A.last_name)!=null?oe:null};return f.push(z),c[z.username]=z,Z(z.username),z};let d=123123124;const p=[],v={},y=A=>{var z;return(z=v[A])!=null?z:null},b=()=>p.filter(A=>!A.hasOperator).sort((A,z)=>A._date_joined_msec-z._date_joined_msec),M=()=>({count:p.filter(A=>!A.hasOperator).length}),L=A=>{var re,oe,se;const z=d++,X={tg_id:z,username:(re=A.username)!=null?re:null,first_name:(oe=A.first_name)!=null?oe:null,last_name:(se=A.last_name)!=null?se:null,date_joined:i(A.timeDelta),esub:null,pub_id:null,refcode:null,subpub:null,hasOperator:!1,status:"NW",is_fail:!1,ref_link:`https://ref.global.com/getRef?tg_id=${z}`};return X._date_joined_msec=+new Date(X.date_joined),p.push(X),v[X.tg_id]=X,X},T=(A,z)=>{const X=y(z);return!X||!u(A)||X.hasOperator?!1:(W(A,z),X.hasOperator=!0,X.status="IW",!0)},k=A=>{const z=b();let X=!1;return z.length&&(X=T(A,z[0].tg_id)),X?{status:"lead connected",__status:200}:{status:"error: there is no free leads",__status:400}},I=(A,z,X)=>{const re=y(z);return re?(X.status&&(X.status==="FL"?re.is_fail=!0:re.status=X.status),re):null};let C=1;const P=[],B={},E=A=>{var z;return(z=B[A])!=null?z:null},x=(A,z=[])=>{A.tag||(A.tag=[],A._tagSearch=new Set);const X=o(z);A.tag.splice(0,1e9),A._tagSearch.clear(),X.map(re=>{A.tag.push(re),A._tagSearch.add(re.title)})},W=(A,z)=>{const X=y(z);if(!X||!u(A))return null;const oe={id:C++,lead_id:z,lead:X,operator:A,unread_messages_count:0,last_message:null};return x(oe),P.push(oe),B[oe.id]=oe,X.hasOperator=!0,oe},F=(A,z,X)=>{const re=E(z);return re?(X.tag&&x(re,X.tag),re):null},G=(A,z,X)=>{const re=E(z);return re?(me(A,{dialog_id:+z}).map(se=>se.is_read=!1),re.unread_messages_count=0,!0):null},V=(A,z={})=>{const X=te=>te.last_message?te.last_message._received_at_msec:te.lead?te.lead._date_joined_msec:0,re=(te,Ie)=>Ie-te,oe=(te,Ie)=>{let Ce=re(X(te),X(Ie));return Ce===0&&(Ce=re(te.id,Ie.id)),Ce},se=z.status?new Set(z.status.split(",")):null,Q=P.filter(te=>te.operator===A).filter(z.tag?te=>te._tagSearch.has(z.tag):l).filter(se?te=>se.has(te.lead.status):l).filter(te=>{var Ie;return((Ie=te==null?void 0:te.lead)==null?void 0:Ie.status)!=="DL"});let ge=[],ye=[];return z.unread_first?(ge=Q.filter(te=>te.unread_messages_count!==0),ye=Q.filter(te=>te.unread_messages_count===0)):ge=Q,ge.sort(oe),ye.sort(oe),ge.concat(ye)};let q=1;const S=[],U={},J=(A,z={})=>{var Q,ge,ye;const X=+z.dialog,re=z.text,oe=E(X);if(!oe)return null;const se={id:q++,dialog:X,text:re,is_read:(Q=z.is_read)!=null?Q:!0,incoming:(ge=z.incoming)!=null?ge:!1,attachments:(ye=z.attachments)!=null?ye:[],received_at:i(z.timeDelta)};return se._received_at_msec=+new Date(se.received_at),S.push(se),U[se.id]=se,oe.last_message=se,se.is_read||oe.unread_messages_count++,se},me=(A,z={})=>S.filter(z.dialog_id?X=>X.dialog===z.dialog_id:l),ie=5*60*1e3,le={},K=A=>{var z;return(z=le[A])!=null?z:null},Z=(A,z={})=>{const re={online:!!z.online,offline_at:i(ie),interval:Math.round(ie/1e3)};return le[A]=re,re},ne=["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg","6.jpg","7.jpg","8.webp","9.webp","10.png","11.png","13.png","12.webp"],Me=["1.ogg"],De=`\u0414\u0430, \u043C\u0451\u0440\u0442\u0432.
\u0411\u0435\u0434\u0441\u0442\u0432\u0438\u0435, \u0443\u0433\u0440\u043E\u0436\u0430\u044E\u0449\u0435\u0435 \u0436\u0438\u0437\u043D\u0438 \u0434\u0435\u0432\u0443\u0448\u043A\u0438, \u0438\u0441\u0447\u0435\u0437\u043B\u043E, \u0441\u043B\u043E\u0432\u043D\u043E \u044D\u0442\u043E \u0431\u044B\u043B\u0430 \u043A\u0430\u043A\u0430\u044F-\u0442\u043E \u0448\u0443\u0442\u043A\u0430. \u041D\u043E \u043E\u043D\u0430 \u043D\u0435 \u043C\u043E\u0433\u043B\u0430 \u0440\u0430\u0434\u043E\u0432\u0430\u0442\u044C\u0441\u044F, \u0432\u0435\u0434\u044C \u0421\u043C\u0435\u0440\u0442\u044C \u0441\u043C\u0435\u043D\u0438\u043B\u0430 \u0441\u0432\u043E\u044E \u0444\u043E\u0440\u043C\u0443 \u0438 \u043F\u0440\u043E\u044F\u0432\u0438\u043B\u0430\u0441\u044C \u0432 \u0431\u043E\u043B\u0435\u0435 \u044F\u0432\u043D\u043E\u043C \u0432\u0438\u0434\u0435.
\u041F\u043E\u0434 \u0432\u0437\u0433\u043B\u044F\u0434\u043E\u043C \u043D\u0430\u043F\u0443\u0433\u0430\u043D\u043D\u043E\u0439 \u0434\u0435\u0432\u0443\u0448\u043A\u0438 \u0421\u043C\u0435\u0440\u0442\u044C \u0434\u0432\u0438\u043D\u0443\u043B\u0430\u0441\u044C \u0432 \u0435\u0451 \u0441\u0442\u043E\u0440\u043E\u043D\u0443. \u0422\u044C\u043C\u0430 \u043F\u0435\u0440\u0435\u0434 \u043D\u0435\u0439 \u043D\u0430\u0447\u0430\u043B\u0430 \u0441\u0433\u0443\u0449\u0430\u0442\u044C\u0441\u044F.
\u0422\u044C\u043C\u0430... \u043E\u043D\u0430 \u0441\u0435\u0439\u0447\u0430\u0441 \u043C\u0435\u043D\u044F \u043F\u0440\u043E\u0433\u043B\u043E\u0442\u0438\u0442, \u2014 \u043F\u043E\u0434\u0443\u043C\u0430\u043B\u0430 \u0434\u0435\u0432\u0443\u0448\u043A\u0430 \u0438 \u0435\u0449\u0451 \u043A\u0440\u0435\u043F\u0447\u0435 \u043E\u0431\u043D\u044F\u043B\u0430 \u0441\u0435\u0441\u0442\u0440\u0451\u043D\u043A\u0443. \u041E\u043D\u0430 \u0443\u0436\u0435 \u0434\u0430\u0436\u0435 \u0438 \u043D\u0435 \u0434\u0443\u043C\u0430\u043B\u0430 \u0431\u0435\u0436\u0430\u0442\u044C. \u0411\u0443\u0434\u044C \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A \u0447\u0435\u043B\u043E\u0432\u0435\u043A\u043E\u043C, \u043E\u043D\u0430 \u0431\u044B \u0435\u0449\u0435 \u043C\u043E\u0433\u043B\u0430 \u043D\u0430 \u0447\u0442\u043E-\u0442\u043E \u043D\u0430\u0434\u0435\u044F\u0442\u044C\u0441\u044F. \u041D\u043E \u043D\u0435\u0447\u0442\u043E, \u0432\u043E\u0437\u0432\u044B\u0448\u0430\u044E\u0449\u0435\u0435\u0441\u044F \u043F\u0435\u0440\u0435\u0434 \u043D\u0435\u0439, \u0441 \u043B\u0435\u0433\u043A\u043E\u0441\u0442\u044C\u044E \u0440\u0430\u0437\u0432\u0435\u044F\u043B\u043E \u0442\u0430\u043A\u0438\u0435 \u043C\u044B\u0441\u043B\u0438. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0445\u043E\u0442\u044F \u0431\u044B \u0434\u0430\u0440\u0443\u0439 \u043C\u043D\u0435 \u0431\u0435\u0437\u0431\u043E\u043B\u0435\u0437\u043D\u0435\u043D\u043D\u0443\u044E \u0441\u043C\u0435\u0440\u0442\u044C.
\u041E\u043D\u0430 \u043C\u043E\u0433\u043B\u0430 \u043B\u0438\u0448\u044C \u043C\u043E\u043B\u0438\u0442\u044C\u0441\u044F.
\u041C\u0430\u043B\u044B\u0448\u043A\u0430 \u0443\u0446\u0435\u043F\u0438\u043B\u0430\u0441\u044C \u0437\u0430 \u0435\u0451 \u0442\u0430\u043B\u0438\u044E, \u0434\u0440\u043E\u0436\u0430 \u043E\u0442 \u0443\u0436\u0430\u0441\u0430. \u0421\u043F\u0430\u0441\u0442\u0438 \u0441\u0435\u0441\u0442\u0440\u0451\u043D\u043A\u0443... \u043D\u043E \u044D\u0442\u043E \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E. \u041E\u043D\u0430 \u043C\u043E\u0433\u043B\u0430 \u043B\u0438\u0448\u044C \u0438\u0437\u0432\u0438\u043D\u0438\u0442\u044C\u0441\u044F \u0437\u0430 \u0441\u0432\u043E\u0451 \u0431\u0435\u0441\u0441\u0438\u043B\u0438\u0435. \u0421\u0435\u0441\u0442\u0440\u0451\u043D\u043A\u0430, \u0442\u044B \u043D\u0435 \u0431\u0443\u0434\u0435\u0448\u044C \u043E\u0434\u0438\u043D\u043E\u043A\u0430, \u044F \u043F\u043E\u0439\u0434\u0443 \u0441 \u0442\u043E\u0431\u043E\u0439.
\u0418 \u0442\u043E\u0433\u0434\u0430...`;let Ve=1;const ee=(A=null,z=null)=>(A=A!=null?A:Math.random()*ne.length|0,z=z!=null?z:z=["IM","DC"][Math.random()*2|0],{file:Ve++,file_type:z,url:`assets/img-test/${ne[A]}`}),Te=(A=null,z="VC")=>(A=A!=null?A:Math.random()*Me.length|0,{file:Ve++,file_type:z,url:`assets/audio-test/${Me[A]}`});(async()=>{const A=(oe,se)=>{const Q=se/oe;let ge=-(se+Q);return()=>(ge+=Q,ge)};let z=1;const X=(oe=0)=>{let se=Math.random()<.5,Q=Math.random()<.5,ge=Math.random()<.5;!se&&!Q&&!ge&&(se=!0),se=Q=ge=!0;const ye=(z++).toString(36);return L({username:se?`test_lead_${ye}`:null,first_name:Q?`F${ye}`:null,last_name:ge?`L${ye}`:null,timeDelta:oe})},re=(oe,se,Q=0)=>{J(oe,{dialog:se,text:`\u041F\u0440\u0438\u0432\u0435\u0442 @${oe}. \u042F \u043D\u043E\u0432\u044B\u0439 \u043B\u0438\u0434, \u0432\u043E\u0442.`,is_read:!1,incoming:!0,timeDelta:Q});for(let ge=0;ge<Math.round(Math.random()*ne.length);ge++){const ye=ee(ge);J(oe,{dialog:se,text:`${ye.file_type==="IM"?"\u041A\u0430\u0440\u0442\u0438\u043D\u043A\u0430":"\u0424\u0430\u0439\u043B"} ${ge+1}.`,is_read:!1,incoming:!0,attachments:[ye],timeDelta:Q+ge*1e3})}};for(let oe=0;oe<10;oe++){const Q=[10,100,1e3,5e3,7e3,1e4,1e4,1e5,2,3,5,7,8,10][oe],ge=`op_test_${oe}`;_({username:ge,first_name:"OpNumDlgs",last_name:Q+""});let ye=0;const te=A(Q,6e4*Q);for(let Ie=0;Ie<Q;Ie++){const Ce=te(),$e=X(Ce),We=W(ge,$e.tg_id);Math.random()<.5&&ye++<5&&re(ge,We.id,Ce)}}for(;;)await t(1e3,1e4),X()})();const Le=(A,z,X)=>{const re=Q=>{Q&&Z(X)},oe=async Q=>{await t(1e3,1e4);const ge=z.text.match(/without_text/i),ye=z.text.match(/long_text/i),te=z.text.match(/allimg|allfile/i),Ie=ge?"":ye?De:`\u042D\u0445\u043E \u043E\u0442\u0432\u0435\u0442 \u0434\u043B\u044F @${X}.
"${z.text}"`;if(te){const $e=z.text.match(/allimg/i)?"IM":"DC";for(let We=0;We<ne.length;We++)J(X,{dialog:z.dialog,text:Ie,is_read:!1,incoming:!0,attachments:[ee(We,$e)]});return}const Ce=[];z.text.match(/img/i)?Ce.push(ee(null,"IM")):z.text.match(/file/i)?Ce.push(ee(null,"DC")):z.text.match(/snd/i)&&Ce.push(Te(null,"VC")),J(X,{dialog:z.dialog,text:Ie,is_read:!1,incoming:!0,attachments:Ce})},se=Q=>{var ge;return(ge=Q==null?void 0:Q.__status)!=null?ge:200};A("GET","operators",200,()=>s(m(),z)),A("GET","online",200,()=>K(X)),A("PUT","online",200,()=>Z(X,z)),A("GET","leads/unassigned",200,()=>s(b(),z)),A("GET","leads/count_free",200,()=>M()),A("POST","leads/get_one",se,()=>k(X)),A("POST",/^leads\/(\d+)\/assign$/,200,Q=>T(X,Q),[re]),A("PATCH",/^leads\/(\d+)$/,200,Q=>I(X,Q,z),[re]),A("GET","dialogs",200,()=>s(V(X,z),z)),A("POST",/^dialogs\/(\d+)\/read$/,204,Q=>G(X,Q)),A("PATCH",/^dialogs\/(\d+)$/,200,Q=>F(X,Q,z),[re]),A("GET","messages",200,()=>s(me(X,z),z)),A("POST","messages",201,()=>J(X,z),[re,oe])},ze=A=>{var Ce,$e,We,sl,il;const z=((Ce=A==null?void 0:A.method)!=null?Ce:"").toUpperCase().trim(),X=(($e=A==null?void 0:A.path)!=null?$e:"").split("/").map(Pe=>Pe.trim()).filter(Boolean).join("/"),re=Object.fromEntries(Object.entries((We=A==null?void 0:A.headers)!=null?We:{}).map(Pe=>[Pe[0].toLowerCase(),Pe[1]])),oe=(sl=A==null?void 0:A.options)!=null?sl:{},se=(il=re["x-username"])!=null?il:null,Q=[];Le((Pe,wt,Yn,Vn,Jn=[])=>Q.push({method:Pe,pathPattern:wt,cb:Vn,status:Yn,mwList:Jn}),oe,se);const ye=Q.map(Pe=>{if(Pe.method===z){if(Pe.pathPattern instanceof RegExp){const wt=X.match(Pe.pathPattern);return wt?{...Pe,args:wt.slice(1)}:!1}return Pe.pathPattern===X?{...Pe,args:[]}:!1}}).filter(Boolean)[0];if(!ye)return null;const te=ye.cb(...ye.args);return ye.mwList&&ye.mwList.map(Pe=>Pe(te,se,oe)),{status:typeof ye.status=="function"?ye.status(te):ye.status,result:te}};try{self.addEventListener("message",({data:{rpcID:A,data:z}})=>{let X,re;try{X=ze(z)}catch(oe){re=oe.message}self.postMessage({rpcID:A,result:X,error:re})})}catch{}return{request:ze}},Co=()=>{const l=`( ${Mo.toString()} )()`,e=new Blob([l],{type:"text/javascript"}),t=new Worker(window.URL.createObjectURL(e));let n=1;const i={};return t.addEventListener("message",({data:{rpcID:o,result:a,error:f}})=>{const c=i[o];delete i[o],f&&c.reject(new Error(f)),c.resolve(a)}),{request:o=>{const a=n++,f=i[a]=Ut();return t.postMessage({rpcID:a,data:o}),f.promise},destroy:()=>t.terminate()}};function To(l){let e,t,n,i,s;return t=new _o({props:{operatorSelf:l[0],config:l[3],notifyEvents:l[1],moduleMgr:l[2],createApi:l[4]}}),{c(){e=w("div"),de(t.$$.fragment),h(e,"class","pos_rel flex")},m(r,o){N(r,e,o),fe(t,e,null),n=!0,i||(s=ft(ht.call(null,e)),i=!0)},p(r,o){const a={};o&1&&(a.operatorSelf=r[0]),t.$set(a)},i(r){n||(O(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){r&&R(e),ce(t),i=!1,s()}}}function Io(l){let e,t,n,i,s;return e=new ri({props:{select:"operators"}}),i=new vo({props:{api:l[5]}}),{c(){de(e.$$.fragment),t=D(),n=w("div"),de(i.$$.fragment),h(n,"class","flex")},m(r,o){fe(e,r,o),N(r,t,o),N(r,n,o),fe(i,n,null),s=!0},p:ue,i(r){s||(O(e.$$.fragment,r),O(i.$$.fragment,r),s=!0)},o(r){H(e.$$.fragment,r),H(i.$$.fragment,r),s=!1},d(r){ce(e,r),r&&R(t),r&&R(n),ce(i)}}}function Do(l){let e,t,n,i,s,r,o,a,f,c;const u=[Io,To],m=[];function _(d,p){return d[0]?1:0}return t=_(l),n=m[t]=u[t](l),s=new ki({props:{modules:l[2]}}),o=new Ii({}),f=new _i({props:{events:l[1]}}),{c(){e=w("main"),n.c(),i=D(),de(s.$$.fragment),r=D(),de(o.$$.fragment),a=D(),de(f.$$.fragment),h(e,"class","flex flex_clm flex_grow_1 pos_rel overhide svelte-l8w6xt")},m(d,p){N(d,e,p),m[t].m(e,null),g(e,i),fe(s,e,null),g(e,r),fe(o,e,null),g(e,a),fe(f,e,null),c=!0},p(d,[p]){let v=t;t=_(d),t===v?m[t].p(d,p):(ke(),H(m[v],1,1,()=>{m[v]=null}),Se(),n=m[t],n?n.p(d,p):(n=m[t]=u[t](d),n.c()),O(n,1),n.m(e,i))},i(d){c||(O(n),O(s.$$.fragment,d),O(o.$$.fragment,d),O(f.$$.fragment,d),c=!0)},o(d){H(n),H(s.$$.fragment,d),H(o.$$.fragment,d),H(f.$$.fragment,d),c=!1},d(d){d&&R(e),m[t].d(),ce(s),ce(o),ce(f)}}}function Oo(l,e,t){let n;he(l,Et,u=>t(0,n=u));const i=tl(),s=bs(),r=()=>{const u=window==null?void 0:window.g_Config;u||alert(`Fatal error
Config not found`);const m=u!=null?u:{};return[...It()].map(([d,p])=>{var y;const v=d.match(/^overwrite\-config\-([^]*)$/);if(v){try{p=JSON.parse(p)}catch(L){console.log("Invalid k value error: "+L.message);return}const b=v[1].split(".");let M=m;for(;b.length>=2;){const L=b.shift();M=M[L]=(y=M[L])!=null?y:{}}b.length===1&&(M[b[0]]=p)}}),m},o=u=>{var p,v;const m=((p=u.testMode)!=null?p:!0)&&!It().has("real-api");let _=()=>null,d=u.api;if(m){const[y,b]=((v=It().get("ping"))!=null?v:"").split(",").concat(200,300).filter(Boolean).map(L=>Oe(0,L|0,6e4)).slice(0,2).sort((L,T)=>L-T);console.log({pingMin:y,pingMax:b});const M=Co();Be(M.destroy),d={protocol:"https:",host:"test.mode.dev",path_base:"api/"},_=()=>async({method:L,path:T,options:k,request:I})=>{await at(y+(b-y)*Math.random()|0);const C=Object.fromEntries([...I.headers]),{status:P,result:B}=await M.request({method:L,path:T,options:k,headers:C});return{status:P,json:()=>B}}}return(y=null)=>Lo(d,{onerror:b=>i.emit("error",b),onnotify:b=>i.emit("debug",b),onNotAuthorizedError:()=>Qe(Et,n=null,n),ontimestat:(b,M)=>us(`${b.method} ${b.path}`,M),operator:y},_())},a=r(),f=o(a),c=f();return[n,i,s,a,f,c]}class Ao extends we{constructor(e){super(),ve(this,e,Oo,Do,_e,{})}}new Ao({target:document.getElementById("app")});
