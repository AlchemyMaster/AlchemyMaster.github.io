(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function de(){}const Kt=l=>l;function ol(l,e){for(const t in e)l[t]=e[t];return l}function Tn(l){return l()}function al(){return Object.create(null)}function Re(l){l.forEach(Tn)}function et(l){return typeof l=="function"}function _e(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let bt;function Ne(l,e){return bt||(bt=document.createElement("a")),bt.href=e,l===bt.href}function Jn(l){return Object.keys(l).length===0}function Et(l,...e){if(l==null)return de;const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Nt(l){let e;return Et(l,t=>e=t)(),e}function ve(l,e,t){l.$$.on_destroy.push(Et(e,t))}function Ze(l,e,t){return l.set(t),e}function ft(l){return l&&et(l.destroy)?l.destroy:de}const Dn=typeof window<"u";let On=Dn?()=>window.performance.now():()=>Date.now(),Zt=Dn?l=>requestAnimationFrame(l):de;const it=new Set;function An(l){it.forEach(e=>{e.c(l)||(it.delete(e),e.f())}),it.size!==0&&Zt(An)}function Fn(l){let e;return it.size===0&&Zt(An),{promise:new Promise(t=>{it.add(e={c:l,f:t})}),abort(){it.delete(e)}}}function g(l,e){l.appendChild(e)}function Xn(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function Kn(l,e){return g(l.head||l,e),e.sheet}function U(l,e,t){l.insertBefore(e,t||null)}function j(l){l.parentNode.removeChild(l)}function Qt(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function w(l){return document.createElement(l)}function Ve(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function oe(l){return document.createTextNode(l)}function T(){return oe(" ")}function Ue(){return oe("")}function $(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function v(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Zn(l){return Array.from(l.childNodes)}function ye(l,e){e=""+e,l.wholeText!==e&&(l.data=e)}function fl(l,e){l.value=e==null?"":e}function R(l,e,t,n){t===null?l.style.removeProperty(e):l.style.setProperty(e,t,n?"important":"")}function W(l,e,t){l.classList[t?"add":"remove"](e)}function En(l,e,{bubbles:t=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(l,t,n,e),i}const Dt=new Map;let Ot=0;function Qn(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function $n(l){const e={style_element:w("style"),rules:{}};return Dt.set(l,e),e}function cl(l,e,t,n,i,s,r,o=0){const a=16.666/n;let f=`{
`;for(let h=0;h<=1;h+=a){const y=e+(t-e)*s(h);f+=h*100+`%{${r(y,1-y)}}
`}const c=f+`100% {${r(t,1-t)}}
}`,m=`__svelte_${Qn(c)}_${o}`,u=Xn(l),{style_element:d,rules:_}=Dt.get(u)||$n(u);if(!_[m]){const h=Kn(u,d);_[m]=!0,h.insertRule(`@keyframes ${m} ${c}`,h.cssRules.length)}const p=l.style.animation||"";return l.style.animation=`${p?`${p}, `:""}${m} ${n}ms linear ${i}ms 1 both`,Ot+=1,m}function es(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=t.length-n.length;i&&(l.style.animation=n.join(", "),Ot-=i,Ot||ts())}function ts(){Zt(()=>{Ot||(Dt.forEach(l=>{const{style_element:e}=l;j(e)}),Dt.clear())})}let mt;function _t(l){mt=l}function $t(){if(!mt)throw new Error("Function called outside component initialization");return mt}function pt(l){$t().$$.on_mount.push(l)}function xe(l){$t().$$.on_destroy.push(l)}function el(){const l=$t();return(e,t,{cancelable:n=!1}={})=>{const i=l.$$.callbacks[e];if(i){const s=En(e,t,{cancelable:n});return i.slice().forEach(r=>{r.call(l,s)}),!s.defaultPrevented}return!0}}function tl(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const dt=[],je=[],Ct=[],Bt=[],zn=Promise.resolve();let xt=!1;function Rn(){xt||(xt=!0,zn.then(jn))}function ls(){return Rn(),zn}function He(l){Ct.push(l)}function rt(l){Bt.push(l)}const Ht=new Set;let yt=0;function jn(){const l=mt;do{for(;yt<dt.length;){const e=dt[yt];yt++,_t(e),ns(e.$$)}for(_t(null),dt.length=0,yt=0;je.length;)je.pop()();for(let e=0;e<Ct.length;e+=1){const t=Ct[e];Ht.has(t)||(Ht.add(t),t())}Ct.length=0}while(dt.length);for(;Bt.length;)Bt.pop()();xt=!1,Ht.clear(),_t(l)}function ns(l){if(l.fragment!==null){l.update(),Re(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(He)}}let ut;function ss(){return ut||(ut=Promise.resolve(),ut.then(()=>{ut=null})),ut}function Pt(l,e,t){l.dispatchEvent(En(`${e?"intro":"outro"}${t}`))}const It=new Set;let Ke;function Se(){Ke={r:0,c:[],p:Ke}}function Le(){Ke.r||Re(Ke.c),Ke=Ke.p}function O(l,e){l&&l.i&&(It.delete(l),l.i(e))}function H(l,e,t,n){if(l&&l.o){if(It.has(l))return;It.add(l),Ke.c.push(()=>{It.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const is={duration:0};function Oe(l,e,t,n){let i=e(l,t),s=n?0:1,r=null,o=null,a=null;function f(){a&&es(l,a)}function c(u,d){const _=u.b-s;return d*=Math.abs(_),{a:s,b:u.b,d:_,duration:d,start:u.start,end:u.start+d,group:u.group}}function m(u){const{delay:d=0,duration:_=300,easing:p=Kt,tick:h=de,css:y}=i||is,b={start:On()+d,b:u};u||(b.group=Ke,Ke.r+=1),r||o?o=b:(y&&(f(),a=cl(l,s,u,_,d,p,y)),u&&h(0,1),r=c(b,_),He(()=>Pt(l,u,"start")),Fn(M=>{if(o&&M>o.start&&(r=c(o,_),o=null,Pt(l,r.b,"start"),y&&(f(),a=cl(l,s,r.b,r.duration,0,p,i.css))),r){if(M>=r.end)h(s=r.b,1-s),Pt(l,r.b,"end"),o||(r.b?f():--r.group.r||Re(r.group.c)),r=null;else if(M>=r.start){const I=M-r.start;s=r.a+r.d*p(I/r.duration),h(s,1-s)}}return!!(r||o)}))}return{run(u){et(i)?ss().then(()=>{i=i(),m(u)}):m(u)},end(){f(),r=o=null}}}const rs=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Un(l,e){l.d(1),e.delete(l.key)}function tt(l,e){H(l,1,1,()=>{e.delete(l.key)})}function Xe(l,e,t,n,i,s,r,o,a,f,c,m){let u=l.length,d=s.length,_=u;const p={};for(;_--;)p[l[_].key]=_;const h=[],y=new Map,b=new Map;for(_=d;_--;){const k=m(i,s,_),S=t(k);let E=r.get(S);E?n&&E.p(k,e):(E=f(S,k),E.c()),y.set(S,h[_]=E),S in p&&b.set(S,Math.abs(_-p[S]))}const M=new Set,I=new Set;function C(k){O(k,1),k.m(o,c),r.set(k.key,k),c=k.first,d--}for(;u&&d;){const k=h[d-1],S=l[u-1],E=k.key,q=S.key;k===S?(c=k.first,u--,d--):y.has(q)?!r.has(E)||M.has(E)?C(k):I.has(q)?u--:b.get(E)>b.get(q)?(I.add(E),C(k)):(M.add(q),u--):(a(S,r),u--)}for(;u--;){const k=l[u];y.has(k.key)||a(k,r)}for(;d;)C(h[d-1]);return h}function ot(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function ue(l){l&&l.c()}function fe(l,e,t,n){const{fragment:i,on_mount:s,on_destroy:r,after_update:o}=l.$$;i&&i.m(e,t),n||He(()=>{const a=s.map(Tn).filter(et);r?r.push(...a):Re(a),l.$$.on_mount=[]}),o.forEach(He)}function ce(l,e){const t=l.$$;t.fragment!==null&&(Re(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function os(l,e){l.$$.dirty[0]===-1&&(dt.push(l),Rn(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function we(l,e,t,n,i,s,r,o=[-1]){const a=mt;_t(l);const f=l.$$={fragment:null,ctx:null,props:s,update:de,not_equal:i,bound:al(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:al(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};r&&r(f.root);let c=!1;if(f.ctx=t?t(l,e.props||{},(m,u,...d)=>{const _=d.length?d[0]:u;return f.ctx&&i(f.ctx[m],f.ctx[m]=_)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](_),c&&os(l,m)),u}):[],f.update(),c=!0,Re(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const m=Zn(e.target);f.fragment&&f.fragment.l(m),m.forEach(j)}else f.fragment&&f.fragment.c();e.intro&&O(l.$$.fragment),fe(l,e.target,e.anchor,e.customElement),jn()}_t(a)}class be{$destroy(){ce(this,1),this.$destroy=de}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Jn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function as(l){const e=l-1;return e*e*e+1}function Ee(l,{delay:e=0,duration:t=400,easing:n=Kt}={}){const i=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:s=>`opacity: ${s*i}`}}function At(l,{delay:e=0,duration:t=400,easing:n=as}={}){const i=getComputedStyle(l),s=+i.opacity,r=parseFloat(i.height),o=parseFloat(i.paddingTop),a=parseFloat(i.paddingBottom),f=parseFloat(i.marginTop),c=parseFloat(i.marginBottom),m=parseFloat(i.borderTopWidth),u=parseFloat(i.borderBottomWidth);return{delay:e,duration:t,easing:n,css:d=>`overflow: hidden;opacity: ${Math.min(d*20,1)*s};height: ${d*r}px;padding-top: ${d*o}px;padding-bottom: ${d*a}px;margin-top: ${d*f}px;margin-bottom: ${d*c}px;border-top-width: ${d*m}px;border-bottom-width: ${d*u}px;`}}const nt=[];function Fe(l,e=de){let t;const n=new Set;function i(o){if(_e(l,o)&&(l=o,t)){const a=!nt.length;for(const f of n)f[1](),nt.push(f,l);if(a){for(let f=0;f<nt.length;f+=2)nt[f][0](nt[f+1]);nt.length=0}}}function s(o){i(o(l))}function r(o,a=de){const f=[o,a];return n.add(f),n.size===1&&(t=e(i)||de),o(l),()=>{n.delete(f),n.size===0&&(t(),t=null)}}return{set:i,update:s,subscribe:r}}const gt=new Map,zt=l=>gt.set(l,(gt.get(l)|0)+1),Rt=l=>gt.set(l,(gt.get(l)|0)-1),fs=()=>gt,Gt=new Map,cs=(l,e)=>{var n;const t=(n=Gt.get(l))!=null?n:{};Object.assign(t,{key:l,duration:e,timeUpdate:Date.now()}),Gt.set(l,t)},us=(l,e)=>Gt,st=()=>{},at=l=>new Promise(e=>setTimeout(e,l)),De=(l,e,t)=>Math.min(t,Math.max(l,e)),jt=(l={})=>(Object.assign(l,{promise:new Promise((e,t)=>Object.assign(l,{resolve:e,reject:t}))}),l),Wt=(l,e)=>{try{if(l===e)return!0;const t=typeof l;if(t!==typeof e)return!1;switch(t){case"undefined":case"boolean":case"bigint":case"symbol":case"string":return l===e;case"number":return isNaN(l)&&isNaN(e)?!0:l===e}if(l===null||e===null)return l===e;if(t!=="object")return!1;if(Array.isArray(l)&&Array.isArray(e))return l.length!==e.length?!1:l.every((o,a)=>Wt(o,e[a]));const i=Object.entries(l),s=Object.entries(e);if(i.length!==s.length)return!1;const r=new Map(s);return i.every(([o,a])=>!(!r.has(o)||!Wt(a,r.get(o))))}catch{}return!1},ds=l=>{let e=!1,t=[];const n=async i=>{e=!0;let s,r,o;try{s=await l()}catch(a){o=!0,r=a}if(i.map(a=>{o&&a.reject(r),a.resolve(s)}),t.length){const a=t;return t=[],n(a)}e=!1};return()=>{const i=jt();return e?t.push(i):(e=!0,n([i])),i.promise}},_s=l=>{const e=jt();return setTimeout(e.resolve,l),e},ms=Symbol("RangeLoadList_ItemLastUpdateTime"),gs=l=>{var B,A,G,V;const e=De(1,((B=l.updateInterval)!=null?B:1e3)|0,36e5),t=De(1,((A=l.maxLimit)!=null?A:50)|0,1e3);let n=l.fLoad;const i=(G=l.onUpdateItem)!=null?G:st,s=(V=l.onUpdateItemList)!=null?V:st,r=!!l.isLoadEnd,o=ms,a={},f=Fe(null),c={subscribe:f.subscribe};let m=0,u=t,d=null;const _=P=>n=P,p=async(P,L)=>{try{const z=await n({offset:P,limit:L});if(typeof z.count=="number"&&Array.isArray(z.results))return z}catch{}return null},h=async(P,L)=>{const z=await p(P,L);if(z){const J=z.results,me=Math.max(0,z.count|0),se=d!==me,le=Date.now();d=me;const K=[];for(let Z=0,ae=P;Z<J.length&&ae<d;Z++,ae++){const pe=J[Z];a[ae]!==void 0&&Wt(a[ae],pe)||(pe[o]=le,a[ae]=pe,i(pe),K.push(pe))}K.length&&s(K),(se||K.length)&&f.set({total:d,list:a})}},y=async P=>{const L=[];L.push(h(m,u)),d!==null&&m+u<d&&r&&L.push(h(d,t)),await Promise.all(L),d!==null&&m+u<d&&r&&P&&await h(d,t)};let b=!1,M=!0,I,C=1;return(async()=>{let P=0;for(;M;){for(;M&&!b;){const L=C;if(await y(P++===0),L===C)break}I=_s(e),await I.promise}})(),{setFLoad:_,update:()=>{C++,I&&I.resolve()},setRange:(P,L)=>{m=Math.max(0,P|0),u=De(0,L|0,t)},destroy:()=>M=!1,getData_r:()=>c,symbolUpdateTime:o,pause:()=>b=!0,resume:()=>b=!1}},ps=async l=>{const e=t=>{const n=document.createElement("textarea");n.value=t,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();let i=!1;try{i=!!document.execCommand("copy")}catch(s){console.error("Fallback: Oops, unable to copy",s)}return document.body.removeChild(n),i};try{return navigator.clipboard?(await navigator.clipboard.writeText(l),!0):e(l)}catch(t){console.error(t)}return!1},lt=(l,e,t=!0)=>{let n=!0;return(async()=>{for(zt("setIntervalAwait"),t&&await at(l);n;){try{await e()}catch(i){console.error("setIntervalAwait error",i)}await at(l)}Rt("setIntervalAwait")})(),()=>n=!1},hs=(l,e=!0)=>{let t=!0;const n=()=>{!t||(l(),requestAnimationFrame(n))};return e?requestAnimationFrame(n):n(),zt("requestAnimationFrameLoop"),()=>{t=!1,Rt("requestAnimationFrameLoop")}},vs=()=>{let l=1;return(e,t)=>{const n=++l;setTimeout(()=>{n===l&&t()},e)}},Ut=(l,e)=>{const t=vs();return()=>t(l,e)},Tt=()=>{let l=new Map;try{l=new Map([...new URLSearchParams(location.hash.replace(/^\#/,""))])}catch{}return l},ll=()=>{const l={};return{on:(n,i)=>{var o;const s={event:n,cb:i},r=l[n]=(o=l[n])!=null?o:[];return r.push(s),()=>{const a=r.findIndex(f=>f===s);a!==-1&&r.splice(a,1)}},emit:(n,...i)=>{var s;return((s=l[n])!=null?s:[]).map(r=>r.cb(...i))}}},ws=()=>{const l={};return l.addModule=(e,t)=>l[e]=t,l},Yt=(l,e="file-")=>{const t=document.createElement("a");t.href=l;const n=e+t.pathname.split(/[^a-zA-Z0-9\.\-_]/).pop();t.download=n,t.target="blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},Vt=l=>Yt(l,"image-"),bs=(l,e)=>{const t=document.createElement("a");t.href=l,t.download=e.replace(/[^a-zA-Z0-9\.\-\+_\x20\x09]/,""),t.target="blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},ys=l=>{try{if(typeof l.message=="string")return l.message}catch{}return""},ul=typeof performance=="object"&&typeof performance.now=="function"?performance.now.bind(performance):Date.now,Nn=(...l)=>{var t,n;const e=new Date(...l);return[e.toLocaleDateString(),e.toLocaleTimeString(),(n=(t=String(e).match(/GMT[^\s]+/))==null?void 0:t[0])!=null?n:""].filter(Boolean).join(" ")};window.formatFullTimeText=Nn;const Jt=l=>new Promise((e,t)=>{l.oncomplete=l.onsuccess=()=>e(l.result),l.onabort=l.onerror=()=>t(l.error)}),ks=async l=>{const e="storage",t=indexedDB.open(l);t.onupgradeneeded=()=>t.result.createObjectStore(e);const n=await Jt(t);return i=>n.transaction(e,i).objectStore(e)},Ss=async l=>{try{const e=await ks(l);return{get:(i,s)=>Jt(e("readonly").get(i)),set:async(i,s)=>{const r=e("readwrite");return await r.put(s,i),await Jt(r.transaction),!0}}}catch{}return null},dl=l=>{const e=Ss(l);return{get:async i=>{try{if(await e)return(await e).get(i)}catch{}},set:async(i,s)=>{try{const r=await e;return r&&await r.set(i,s),!0}catch{}return!1}}};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */const ct={};ct.version="1.2.2";function Ls(){for(var l=0,e=new Array(256),t=0;t!=256;++t)l=t,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,l=l&1?-306674912^l>>>1:l>>>1,e[t]=l;return typeof Int32Array<"u"?new Int32Array(e):e}var Be=Ls();function Ms(l){var e=0,t=0,n=0,i=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(n=0;n!=256;++n)i[n]=l[n];for(n=0;n!=256;++n)for(t=l[n],e=256+n;e<4096;e+=256)t=i[e]=t>>>8^l[t&255];var s=[];for(n=1;n!=16;++n)s[n-1]=typeof Int32Array<"u"?i.subarray(n*256,n*256+256):i.slice(n*256,n*256+256);return s}var Ge=Ms(Be),Cs=Ge[0],Is=Ge[1],Ts=Ge[2],Ds=Ge[3],Os=Ge[4],As=Ge[5],Fs=Ge[6],Es=Ge[7],zs=Ge[8],Rs=Ge[9],js=Ge[10],Us=Ge[11],Ns=Ge[12],Hs=Ge[13],Ps=Ge[14];function qs(l,e){for(var t=e^-1,n=0,i=l.length;n<i;)t=t>>>8^Be[(t^l.charCodeAt(n++))&255];return~t}function Bs(l,e){for(var t=e^-1,n=l.length-15,i=0;i<n;)t=Ps[l[i++]^t&255]^Hs[l[i++]^t>>8&255]^Ns[l[i++]^t>>16&255]^Us[l[i++]^t>>>24]^js[l[i++]]^Rs[l[i++]]^zs[l[i++]]^Es[l[i++]]^Fs[l[i++]]^As[l[i++]]^Os[l[i++]]^Ds[l[i++]]^Ts[l[i++]]^Is[l[i++]]^Cs[l[i++]]^Be[l[i++]];for(n+=15;i<n;)t=t>>>8^Be[(t^l[i++])&255];return~t}function xs(l,e){for(var t=e^-1,n=0,i=l.length,s=0,r=0;n<i;)s=l.charCodeAt(n++),s<128?t=t>>>8^Be[(t^s)&255]:s<2048?(t=t>>>8^Be[(t^(192|s>>6&31))&255],t=t>>>8^Be[(t^(128|s&63))&255]):s>=55296&&s<57344?(s=(s&1023)+64,r=l.charCodeAt(n++)&1023,t=t>>>8^Be[(t^(240|s>>8&7))&255],t=t>>>8^Be[(t^(128|s>>2&63))&255],t=t>>>8^Be[(t^(128|r>>6&15|(s&3)<<4))&255],t=t>>>8^Be[(t^(128|r&63))&255]):(t=t>>>8^Be[(t^(224|s>>12&15))&255],t=t>>>8^Be[(t^(128|s>>6&63))&255],t=t>>>8^Be[(t^(128|s&63))&255]);return~t}ct.table=Be;ct.bstr=qs;ct.buf=Bs;ct.str=xs;const Gs=async l=>{try{const e=new Uint8Array(await l.arrayBuffer()),t=i=>[...i].slice(0,8).map(s=>s.toString(16).toUpperCase().padStart(2,"0")).join("");try{const i=await crypto.subtle.digest("SHA-256",e);return t(new Uint8Array(i))}catch{}const n=ct.buf(e)|0;return t(Array(4).fill().map((i,s)=>n>>s*8&255))}catch{}},Ws=l=>{const e=dl(l+"-url-hash"),t=dl(l+"-hash-blob");return{get:async r=>{r=String(r);const o=await e.get(r);if(!!o)return await t.get(o)},set:async(r,o)=>{r=String(r);const a=await Gs(o);return a?!!(await t.set(a,o)&&await e.set(r,a)):!1},getHash:async r=>{r=String(r);const o=await e.get(r);if(!!o)return o}}},Ys=l=>{const e=Ws("global-blob-storage-y2s2trok"),t=new Map,n=async(s,r)=>{const o=await e.getHash(s);if(!o)return null;let a=t.get(o);return a||(r||(r=await e.get(s)),r?(a=URL.createObjectURL(r),t.set(o,a),a):null)};return{getOrLoad:async(s,r=!0)=>{if(s.startsWith("blob:"))return s;let o=await n(s);if(o)return o;if(!r)return s;try{const a=await(await fetch(s)).blob();await e.set(s,a),o=await n(s,a)}catch{}return o!=null?o:s}}},Hn=Ys();let Vs=1;function Js(l){var x;const e=Vs++,t=l.url,n=(x=l.cache)!=null?x:!0;let s=(({url:N,name:Y})=>{let B="";Y&&(B=Y);try{B||(B=N.split(/[\/\\]/).pop())}catch{}try{B=decodeURI(B)}catch{}return B})(l),r=null,o=null,a=1,f="loading",c=null,m=null,u=null;const d=()=>({state_wr:Fe(f),currentTime_wr:Fe(c),duration_wr:Fe(m),currentTimeRate_wr:Fe(u),name_wr:Fe(s)}),_=N=>Object.fromEntries(Object.entries(N).map(Y=>[Y[0].replace(/_wr$/,"_r"),{subscribe:Y[1].subscribe}])),p=d(),h=_(p),y=()=>{p.state_wr.set(f),p.currentTime_wr.set(c),p.duration_wr.set(m),p.currentTimeRate_wr.set(u)},b=()=>{!o||(o.volume=a)},M=()=>{try{o.pause()}catch{}},I=()=>{if(f==="pause")try{o.play()}catch{}},C=N=>{try{o.currentTime=N}catch{}y()},k=N=>{a=De(0,N,1),b()},S=N=>{f="error",M(),y()},E=async N=>{try{const Y=new Audio,B=()=>{c=Y.currentTime,m=Y.duration,u=c/m,y()},A=G=>V=>{f!=="error"&&(f=G,y())};Y.addEventListener("loadedmetadata",B),Y.addEventListener("timeupdate",B),Y.addEventListener("play",A("play")),Y.addEventListener("pause",A("pause")),Y.addEventListener("canplaythrough",()=>{f==="loading"&&A("pause")()}),Y.addEventListener("error",S),Y.src=N,o=Y,b()}catch{S()}};return(async(N,Y)=>{r=await Hn.getOrLoad(N,Y),await E(r!=null?r:t)})(t,n),{id:e,play:I,pause:M,setCurrentTime:C,setVolume:k,info_r:h}}function Xs(){const l=new Map,e=Fe(null),t={subscribe:e.subscribe},n=Fe(1),i=()=>{const a=Nt(t);a&&a.setVolume(Nt(n))};n.subscribe(i);const s=a=>{const f=Nt(t);f!==a&&(f&&f.pause(),e.set(a),i())},r=a=>{let f=l.get(a.url);return f||(f=Js(a),l.set(a.url,f)),f};return{getOrCreateAudioItem:r,getControlAudio:a=>{const f=r(a);return{info_r:f.info_r,play:()=>{s(f),f.play()},pause:()=>f.pause()}},audioActive_r:t,audioActive_Set:s,volume_wr:n}}const Ks=l=>{const e=l;let t=null,n=null,i=null,s="loading",r=null;const o=()=>({state_wr:Fe(s),url_wr:Fe(r),width_wr:Fe(n),height_wr:Fe(i)}),a=p=>{const h=y=>({subscribe:y.subscribe});return{state_r:h(p.state_wr),url_r:h(p.url_wr),width_r:h(p.width_wr),height_r:h(p.height_wr)}},f=o(),c=a(f),m=()=>{f.state_wr.set(s),f.url_wr.set(r),f.width_wr.set(n),f.height_wr.set(i)},u=p=>{s="error",m()},d=async p=>{const h=new Image;h.addEventListener("load",()=>{n=h.width,i=h.height,r=p,s="load",m()}),h.addEventListener("error",u),h.src=p};return(async p=>{t=await Hn.getOrLoad(p,!0),await d(t!=null?t:p)})(e),{info_r:c}},Zs=()=>{const l=new Map;return{getOrCreateImageItem:t=>{let n=l.get(t);return n||(n=Ks(t),l.set(t,n)),n}}},Ft=Fe(null),Pn=Ft.set,kt=(l,e)=>{const{subscribe:t,set:n,update:i}=Fe(l);return[{subscribe:t},s=>{n(s),e&&e(s)}]},Qs=(l,e)=>{const{subscribe:t,set:n,update:i}=Fe(l);return[{subscribe:t},i]},$s=l=>parseInt(l.id),ei=Xs(),ti=Zs();function li(l,e,t,n){var se,le;const i={},s={...e};Object.assign(i,{appConfig:s}),Object.assign(i,{api:t}),Object.assign(i,{moduleMgr:n});const r=ll();Object.assign(i,{events:r});const o=[],a=K=>o.push(K);Object.assign(i,{destroy:()=>o.map(K=>K())});const c=l,[m]=kt(c),[u,d]=kt(null);let _=0;const[p,h]=kt(_),y=ds(t.operatorSelf_GetOnlineInfo),b=async()=>{h(++_);const K=await y();return K&&d(K),h(--_),K};Object.assign(i,{operatorSelf_r:m,operatorSelfLastOnlineInfo_r:u,operatorSelfLastOnlineInfo_Update:b,operatorSelfLastOnline_SetOnlineFlag:async K=>{h(++_);const Z=await t.operatorSelf_SetOnlineFlag(K);return Z&&d(Z),h(--_),Z},operatorSelfLastOnlineInfoLoading_r:p});const I=Object.create(null),[C,k]=Qs(I),S=K=>{!K.length||k(Z=>{for(const ae of K)Z[$s(ae)]=ae;return Z})},E=K=>S([K]),[q,x]=kt(null);Object.assign(i,{dialogMap_r:C,dialogMap_SetDialogList:S,dialogMap_SetDialog:E,dialogActiveID_r:q,dialogActiveID_Set:x});const N=new Map(((se=s==null?void 0:s.lead_StatusList)!=null?se:[]).map(K=>[K.id,K])),Y=Object.entries((le=s==null?void 0:s.lead_StatusJumpMap)!=null?le:{}).reduce((K,[Z,ae])=>(ae.map(pe=>{var Ae;return(K[pe]=(Ae=K[pe])!=null?Ae:[]).push(Z)}),K),{}),B=K=>{var Z;return(Z=N.get(K))!=null?Z:null},A=K=>{var Z;try{return(Z=s.lead_StatusGetID(K))!=null?Z:null}catch{}return null},G=K=>{var ae,pe,Ae;const Z=B(K);return{id:K,title:(ae=Z==null?void 0:Z.title)!=null?ae:Z!=null&&Z.id?`#${Z==null?void 0:Z.id}`:"*UNK*",bgColor:(pe=Z==null?void 0:Z.bgColor)!=null?pe:"#000",color:(Ae=Z==null?void 0:Z.color)!=null?Ae:"#fff"}},V=K=>G(A(K)),P=(K,Z)=>{var ae;try{return(ae=s.lead_StatusPrevIDResolve(K,Z))!=null?ae:null}catch{}return null},L=(K,Z)=>{var ae;try{const pe=Y==null?void 0:Y[K],Ae=(pe==null?void 0:pe.length)===1?pe==null?void 0:pe[0]:(pe==null?void 0:pe.length)>1?(ae=P(K,Z))!=null?ae:pe==null?void 0:pe[0]:null,Pe=B(Ae);return Pe&&!(Pe!=null&&Pe.stopPrevSearch)?Ae:null}catch{}return null};return Object.assign(i,{lead_GetStatusOrDefault:V,lead_GetStatusByID:B,lead_GetStatusTitle:K=>{var Z,ae;return(ae=(Z=B(K))==null?void 0:Z.title)!=null?ae:K},lead_GetStatusList:K=>{var Z;return((Z=e==null?void 0:e.lead_StatusList)!=null?Z:[]).filter(ae=>ae.access==="user").filter(ae=>ae.id!==K).filter(ae=>ae.id!=="DL")},lead_GetStatusID:A,lead_StatusPrevIDResolve:P,lead_GetStatusPrevID:L,lead_GetStatusHistory:K=>{let Z=A(K);const ae=[Z];for(;Z=L(Z,K),K=null,!!Z;)ae.unshift(Z);return ae.map(G).filter(Boolean)}}),a(lt(e.updateIntervals.sync_online_info,b,!1)),Object.assign(i,{audioMgr:ei,imageMgr:ti}),Object.freeze(i),i}function _l(l){let e,t,n;return{c(){e=w("div"),e.textContent="Operators",v(e,"class","item cursor_ptr svelte-vbcb9r"),W(e,"active",l[0]==="operators"),W(e,"disabled",l[1].has("operators"))},m(i,s){U(i,e,s),t||(n=$(e,"click",l[3]("operators")),t=!0)},p(i,s){s&1&&W(e,"active",i[0]==="operators"),s&2&&W(e,"disabled",i[1].has("operators"))},d(i){i&&j(e),t=!1,n()}}}function ml(l){let e,t=l[2].username+"",n,i,s;return{c(){e=w("div"),n=oe(t),v(e,"class","item cursor_ptr notHover nowrap textOverEllipsis svelte-vbcb9r"),R(e,"max-width","200px")},m(r,o){U(r,e,o),g(e,n),s=!0},p(r,o){(!s||o&4)&&t!==(t=r[2].username+"")&&ye(n,t)},i(r){s||(He(()=>{i||(i=Oe(e,Ee,{},!0)),i.run(1)}),s=!0)},o(r){i||(i=Oe(e,Ee,{},!1)),i.run(0),s=!1},d(r){r&&j(e),r&&i&&i.end()}}}function ni(l){let e,t,n,i,s,r,o=!l[2]&&_l(l),a=l[2]&&0,f=l[2]&&ml(l);return{c(){e=w("div"),o&&o.c(),t=T(),a&&a.c(),n=T(),i=w("div"),s=T(),f&&f.c(),v(i,"class","flex flex_grow_1"),v(e,"class","flex flex_cy w100 list unselect svelte-vbcb9r")},m(c,m){U(c,e,m),o&&o.m(e,null),g(e,t),a&&a.m(e,null),g(e,n),g(e,i),g(e,s),f&&f.m(e,null),r=!0},p(c,[m]){c[2]?o&&(o.d(1),o=null):o?o.p(c,m):(o=_l(c),o.c(),o.m(e,t)),c[2],a&&(a.d(1),a=null),c[2]?f?(f.p(c,m),m&4&&O(f,1)):(f=ml(c),f.c(),O(f,1),f.m(e,null)):f&&(Se(),H(f,1,1,()=>{f=null}),Le())},i(c){r||(O(f),r=!0)},o(c){H(f),r=!1},d(c){c&&j(e),o&&o.d(),a&&a.d(),f&&f.d()}}}function si(l,e,t){let n;ve(l,Ft,o=>t(2,n=o));let{select:i=""}=e,{disabled:s=new Set}=e;s.add("newLeads"),s.add("myLeads");const r=o=>a=>{s.has(o)||t(0,i=o)};return l.$$set=o=>{"select"in o&&t(0,i=o.select),"disabled"in o&&t(1,s=o.disabled)},[i,s,n,r]}class ii extends be{constructor(e){super(),we(this,e,si,ni,_e,{select:0,disabled:1})}}function gl(l,e,t){const n=l.slice();return n[4]=e[t],n}function pl(l,e,t){const n=l.slice();return n[7]=e[t],n}function hl(l){let e,t=l[7].text+"",n,i;return{c(){e=w("div"),n=oe(t),i=oe("\xA0"),v(e,"class","text svelte-13s1vua"),R(e,"color",l[7].color)},m(s,r){U(s,e,r),g(e,n),U(s,i,r)},p(s,r){r&2&&t!==(t=s[7].text+"")&&ye(n,t),r&2&&R(e,"color",s[7].color)},d(s){s&&j(e),s&&j(i)}}}function vl(l){let e,t,n=l[4].chunks,i=[];for(let s=0;s<n.length;s+=1)i[s]=hl(pl(l,n,s));return{c(){e=w("div");for(let s=0;s<i.length;s+=1)i[s].c();t=T(),v(e,"class","flex flex_cy line svelte-13s1vua"),W(e,"mini",l[4].type==="mini")},m(s,r){U(s,e,r);for(let o=0;o<i.length;o+=1)i[o].m(e,null);g(e,t)},p(s,r){if(r&2){n=s[4].chunks;let o;for(o=0;o<n.length;o+=1){const a=pl(s,n,o);i[o]?i[o].p(a,r):(i[o]=hl(a),i[o].c(),i[o].m(e,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}r&2&&W(e,"mini",s[4].type==="mini")},d(s){s&&j(e),Qt(i,s)}}}function ri(l){let e,t,n,i=l[1],s=[];for(let r=0;r<i.length;r+=1)s[r]=vl(gl(l,i,r));return{c(){e=w("div");for(let r=0;r<s.length;r+=1)s[r].c();v(e,"class","flex flex_clm notify svelte-13s1vua"),W(e,"normal",l[0]==="normal"),W(e,"error",l[0]==="error"),W(e,"debug",l[0]==="debug")},m(r,o){U(r,e,o);for(let a=0;a<s.length;a+=1)s[a].m(e,null);n=!0},p(r,[o]){if(o&2){i=r[1];let a;for(a=0;a<i.length;a+=1){const f=gl(r,i,a);s[a]?s[a].p(f,o):(s[a]=vl(f),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=i.length}(!n||o&1)&&W(e,"normal",r[0]==="normal"),(!n||o&1)&&W(e,"error",r[0]==="error"),(!n||o&1)&&W(e,"debug",r[0]==="debug")},i(r){n||(r&&He(()=>{t||(t=Oe(e,At,{},!0)),t.run(1)}),n=!0)},o(r){r&&(t||(t=Oe(e,At,{},!1)),t.run(0)),n=!1},d(r){r&&j(e),Qt(s,r),r&&t&&t.end()}}}function oi(l,e,t){let{notify:n}=e,i="normal",s=[];const r=()=>{t(0,i=n==null?void 0:n.type),t(1,s=[]),Array.isArray(n==null?void 0:n.data)&&t(1,s=n.data.filter(Boolean).map(o=>{let a="normal",f=[];return typeof o=="string"?f.push({color:"#fff",text:o}):(a=o.type,f=o.chunks?o.chunks:[{color:"#fff",text:o.text}]),f=f.filter(c=>c.text),{type:a,chunks:f}}).filter(o=>o.chunks.length))};return l.$$set=o=>{"notify"in o&&t(2,n=o.notify)},l.$$.update=()=>{l.$$.dirty&4&&r()},[i,s,n]}class ai extends be{constructor(e){super(),we(this,e,oi,ri,_e,{notify:2})}}function wl(l,e,t){const n=l.slice();return n[4]=e[t],n}function bl(l,e){let t,n,i;return n=new ai({props:{notify:e[4]}}),{key:l,first:null,c(){t=Ue(),ue(n.$$.fragment),this.first=t},m(s,r){U(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&1&&(o.notify=e[4]),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&j(t),ce(n,s)}}}function fi(l){let e,t=[],n=new Map,i,s=l[0];const r=o=>o[4].id;for(let o=0;o<s.length;o+=1){let a=wl(l,s,o),f=r(a);n.set(f,t[o]=bl(f,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();v(e,"class","pos_abs notify_list svelte-11tn2wf")},m(o,a){U(o,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);i=!0},p(o,[a]){a&1&&(s=o[0],Se(),t=Xe(t,a,r,1,o,s,n,e,tt,bl,null,wl),Le())},i(o){if(!i){for(let a=0;a<s.length;a+=1)O(t[a]);i=!0}},o(o){for(let a=0;a<t.length;a+=1)H(t[a]);i=!1},d(o){o&&j(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}const ci=5e3;function ui(l,e,t){let{events:n=ll()}=e,i=1,s=[];const r=o=>a=>{s.push({id:i++,time:Date.now(),type:o,data:a}),t(0,s)};return xe(lt(1e3,()=>{const o=Date.now(),a=s.filter(f=>f.time+ci>=o);a.length!==s.length&&t(0,s=a)})),xe(n.on("error",r("error"))),Tt().has("debug")&&xe(n.on("debug",r("debug"))),l.$$set=o=>{"events"in o&&t(1,n=o.events)},[s,n]}class di extends be{constructor(e){super(),we(this,e,ui,fi,_e,{events:1})}}function yl(l){return Object.prototype.toString.call(l)==="[object Date]"}function Xt(l,e){if(l===e||l!==l)return()=>l;const t=typeof l;if(t!==typeof e||Array.isArray(l)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(l)){const n=e.map((i,s)=>Xt(l[s],i));return i=>n.map(s=>s(i))}if(t==="object"){if(!l||!e)throw new Error("Object cannot be null");if(yl(l)&&yl(e)){l=l.getTime(),e=e.getTime();const s=e-l;return r=>new Date(l+r*s)}const n=Object.keys(e),i={};return n.forEach(s=>{i[s]=Xt(l[s],e[s])}),s=>{const r={};return n.forEach(o=>{r[o]=i[o](s)}),r}}if(t==="number"){const n=e-l;return i=>l+i*n}throw new Error(`Cannot interpolate ${t} values`)}function We(l,e={}){const t=Fe(l);let n,i=l;function s(r,o){if(l==null)return t.set(l=r),Promise.resolve();i=r;let a=n,f=!1,{delay:c=0,duration:m=400,easing:u=Kt,interpolate:d=Xt}=ol(ol({},e),o);if(m===0)return a&&(a.abort(),a=null),t.set(l=i),Promise.resolve();const _=On()+c;let p;return n=Fn(h=>{if(h<_)return!0;f||(p=d(l,r),typeof m=="function"&&(m=m(l,r)),f=!0),a&&(a.abort(),a=null);const y=h-_;return y>m?(t.set(l=r),!1):(t.set(l=p(u(y/m))),!0)}),n.promise}return{set:s,update:(r,o)=>s(r(i,l),o),subscribe:t.subscribe}}function _i(l){let e,t,n,i,s;var r=l[0].svelteComponent;function o(a){return{props:{options:a[0].options,abort_wr:a[0].abort_wr,result:a[0].result,close:a[7]}}}return r&&(n=new r(o(l))),{c(){e=w("div"),t=w("div"),n&&ue(n.$$.fragment),v(t,"class","flex pos_abs wrapper2 svelte-1c0izo5"),R(t,"max-width",l[2]+"px"),v(e,"class","flex flex_cx wrapper svelte-1c0izo5"),v(e,"style",i=""+(l[6]("left",l[3])+l[6]("top",l[4]))),W(e,"show",l[5])},m(a,f){U(a,e,f),g(e,t),n&&fe(n,t,null),l[8](t),s=!0},p(a,[f]){const c={};if(f&1&&(c.options=a[0].options),f&1&&(c.abort_wr=a[0].abort_wr),f&1&&(c.result=a[0].result),r!==(r=a[0].svelteComponent)){if(n){Se();const m=n;H(m.$$.fragment,1,0,()=>{ce(m,1)}),Le()}r?(n=new r(o(a)),ue(n.$$.fragment),O(n.$$.fragment,1),fe(n,t,null)):n=null}else r&&n.$set(c);(!s||f&4)&&R(t,"max-width",a[2]+"px"),(!s||f&24&&i!==(i=""+(a[6]("left",a[3])+a[6]("top",a[4]))))&&v(e,"style",i),(!s||f&32)&&W(e,"show",a[5])},i(a){s||(n&&O(n.$$.fragment,a),s=!0)},o(a){n&&H(n.$$.fragment,a),s=!1},d(a){a&&j(e),n&&ce(n),l[8](null)}}}const qt=10,kl=10,Sl=4;function mi(l,e,t){let{modalContext:n={}}=e,i,s=2e4,r=null,o=null,a=!1,f=!1;const c=(_,p,h=y=>y)=>p===null?"":`${_}: ${h(p)};`,m=(_,p)=>c(_,p,h=>`${h}px`),u=async()=>{a||(a=!0,t(5,f=!1),await at(1e3),t(3,r=null),t(4,o=null),t(0,n._needDestroy=!0,n))};pt(async()=>{await ls(),await at(10),t(5,f=!a)}),xe(hs(()=>{var k,S,E,q;if(!i)return;const _=window.innerWidth,p=window.innerHeight;t(2,s=_-qt*2);const h=i.offsetWidth,y=i.offsetHeight,b=h/2,M=y/2;let I=_/2,C=50+M;try{const x=(k=n==null?void 0:n.options)!=null?k:{};if(x!=null&&x.position&&(S=x.position)!=null&&S.target){const N=x.position.target.getBoundingClientRect();((E=x.position)==null?void 0:E.stick)==="bottom"&&(C=N.bottom+Sl),((q=x.position)==null?void 0:q.stick)==="top"&&(C=N.top-Sl-y),I=N.width/2+N.left}}catch{}I=De(b+qt,I,_-b-qt),C=De(kl,C,p-y-kl),t(3,r=Math.round(I)),t(4,o=Math.round(C))}));function d(_){je[_?"unshift":"push"](()=>{i=_,t(1,i)})}return l.$$set=_=>{"modalContext"in _&&t(0,n=_.modalContext)},[n,i,s,r,o,f,m,u,d]}class gi extends be{constructor(e){super(),we(this,e,mi,_i,_e,{modalContext:0})}}function pi(l){var _,p;let e,t,n=((p=(_=l[0])==null?void 0:_.text)!=null?p:"")+"",i,s,r,o,a,f,c,m,u,d;return{c(){e=w("div"),t=w("div"),i=oe(n),s=T(),r=w("div"),o=w("button"),o.textContent="cancel",a=T(),f=w("div"),c=T(),m=w("button"),m.textContent="continue",v(t,"class","flex text"),v(o,"class","flex nowrap cursor_ptr unselect btn cancel svelte-1dvmulk"),R(f,"width","4px"),v(m,"class","flex nowrap cursor_ptr unselect btn continue svelte-1dvmulk"),v(r,"class","flex btnGroup svelte-1dvmulk"),v(e,"class","flex flex_clm modal svelte-1dvmulk")},m(h,y){U(h,e,y),g(e,t),g(t,i),g(e,s),g(e,r),g(r,o),l[8](o),g(r,a),g(r,f),g(r,c),g(r,m),u||(d=[$(o,"click",l[3]),$(m,"click",l[4])],u=!0)},p(h,[y]){var b,M;y&1&&n!==(n=((M=(b=h[0])==null?void 0:b.text)!=null?M:"")+"")&&ye(i,n)},i:de,o:de,d(h){h&&j(e),l[8](null),u=!1,Re(d)}}}function hi(l,e,t){let n,i=de,s=()=>(i(),i=Et(o,_=>t(7,n=_)),o);l.$$.on_destroy.push(()=>i());let{options:r={}}=e,{abort_wr:o}=e;s();let{result:a}=e,{close:f}=e,c;const m=()=>{a.resolve(!1),f()},u=()=>{a.resolve(!0),f()};pt(()=>c.focus());function d(_){je[_?"unshift":"push"](()=>{c=_,t(2,c)})}return l.$$set=_=>{"options"in _&&t(0,r=_.options),"abort_wr"in _&&s(t(1,o=_.abort_wr)),"result"in _&&t(5,a=_.result),"close"in _&&t(6,f=_.close)},l.$$.update=()=>{l.$$.dirty&128&&n&&m()},[r,o,c,m,u,a,f,n,d]}class vi extends be{constructor(e){super(),we(this,e,hi,pi,_e,{options:0,abort_wr:1,result:5,close:6})}}function Ll(l,e,t){const n=l.slice();return n[5]=e[t],n}function Ml(l,e){let t,n,i;return n=new gi({props:{modalContext:e[5]}}),{key:l,first:null,c(){t=Ue(),ue(n.$$.fragment),this.first=t},m(s,r){U(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&1&&(o.modalContext=e[5]),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&j(t),ce(n,s)}}}function wi(l){let e=[],t=new Map,n,i,s=l[0];const r=o=>o[5].id;for(let o=0;o<s.length;o+=1){let a=Ll(l,s,o),f=r(a);t.set(f,e[o]=Ml(f,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=Ue()},m(o,a){for(let f=0;f<e.length;f+=1)e[f].m(o,a);U(o,n,a),i=!0},p(o,[a]){a&1&&(s=o[0],Se(),e=Xe(e,a,r,1,o,s,t,n.parentNode,tt,Ml,n,Ll),Le())},i(o){if(!i){for(let a=0;a<s.length;a+=1)O(e[a]);i=!0}},o(o){for(let a=0;a<e.length;a+=1)H(e[a]);i=!1},d(o){for(let a=0;a<e.length;a+=1)e[a].d(o);o&&j(n)}}}function bi(l,e,t){let{modules:n}=e,i=[],s=1;const r=a=>{i.push(a),t(0,i)},o=(a,f)=>{const c={type:a,options:f,id:s++,result:jt(),abort_wr:Fe(!1)};switch(a){case"cancel/continue":c.svelteComponent=vi;break}return c.svelteComponent?(r(c),{abort:()=>c.abort_wr.set(!0),result:c.result.promise}):null};return xe(lt(1e3,()=>{const a=i.filter(f=>!f._needDestroy);a.length!==i.length&&t(0,i=a)})),n.addModule("modal",{createModal:o}),l.$$set=a=>{"modules"in a&&t(1,n=a.modules)},[i,n]}class yi extends be{constructor(e){super(),we(this,e,bi,wi,_e,{modules:1})}}function ki(l){let e,t,n,i,s,r,o,a=l[5](l[1])+"",f,c,m,u,d;return{c(){e=w("div"),t=w("div"),n=oe(l[0]),i=T(),s=w("div"),r=T(),o=w("div"),f=oe(a),c=T(),m=w("div"),v(t,"class","flex nowrap lcKey svelte-6huedz"),R(s,"width","8px"),v(o,"class","flex nowrap lcVal svelte-6huedz"),v(m,"class","flex pos_abs liveRate svelte-6huedz"),R(m,"width",l[2]+"%"),v(e,"class","flex flex_grow_1 pos_rel item svelte-6huedz")},m(_,p){U(_,e,p),g(e,t),g(t,n),g(e,i),g(e,s),g(e,r),g(e,o),g(o,f),g(e,c),g(e,m),d=!0},p(_,[p]){(!d||p&1)&&ye(n,_[0]),(!d||p&2)&&a!==(a=_[5](_[1])+"")&&ye(f,a),(!d||p&4)&&R(m,"width",_[2]+"%")},i(_){d||(_&&He(()=>{u||(u=Oe(e,At,{},!0)),u.run(1)}),d=!0)},o(_){_&&(u||(u=Oe(e,At,{},!1)),u.run(0)),d=!1},d(_){_&&j(e),_&&u&&u.end()}}}function Si(l,e,t){let n,i,{key:s}=e,{duration:r}=e,{liveRate:o}=e;const a=We(r);ve(l,a,m=>t(1,n=m));const f=We(o);ve(l,f,m=>t(2,i=m));const c=m=>m<1e3?Math.round(m)+"ms":(m/1e3).toFixed(2)+"s";return l.$$set=m=>{"key"in m&&t(0,s=m.key),"duration"in m&&t(6,r=m.duration),"liveRate"in m&&t(7,o=m.liveRate)},l.$$.update=()=>{l.$$.dirty&64&&a.set(r),l.$$.dirty&128&&f.set(o)},[s,n,i,a,f,c,r,o]}class Li extends be{constructor(e){super(),we(this,e,Si,ki,_e,{key:0,duration:6,liveRate:7})}}function Cl(l,e,t){const n=l.slice();return n[3]=e[t],n}function Il(l,e,t){const n=l.slice();return n[6]=e[t],n}function Tl(l){let e,t=[],n=new Map,i,s=[],r=new Map,o,a=l[1];const f=u=>u[6][0];for(let u=0;u<a.length;u+=1){let d=Il(l,a,u),_=f(d);n.set(_,t[u]=Dl(_,d))}let c=l[2];const m=u=>u[3].key;for(let u=0;u<c.length;u+=1){let d=Cl(l,c,u),_=m(d);r.set(_,s[u]=Ol(_,d))}return{c(){e=w("div");for(let u=0;u<t.length;u+=1)t[u].c();i=T();for(let u=0;u<s.length;u+=1)s[u].c();v(e,"class","pos_abs flex flex_clm unselect cnt svelte-1qapcdn")},m(u,d){U(u,e,d);for(let _=0;_<t.length;_+=1)t[_].m(e,null);g(e,i);for(let _=0;_<s.length;_+=1)s[_].m(e,null);o=!0},p(u,d){d&2&&(a=u[1],t=Xe(t,d,f,1,u,a,n,e,Un,Dl,i,Il)),d&4&&(c=u[2],Se(),s=Xe(s,d,m,1,u,c,r,e,tt,Ol,null,Cl),Le())},i(u){if(!o){for(let d=0;d<c.length;d+=1)O(s[d]);o=!0}},o(u){for(let d=0;d<s.length;d+=1)H(s[d]);o=!1},d(u){u&&j(e);for(let d=0;d<t.length;d+=1)t[d].d();for(let d=0;d<s.length;d+=1)s[d].d()}}}function Dl(l,e){let t,n,i=e[6][0]+"",s,r,o,a,f,c=e[6][1]+"",m;return{key:l,first:null,c(){t=w("div"),n=w("div"),s=oe(i),r=T(),o=w("div"),a=T(),f=w("div"),m=oe(c),v(n,"class","flex nowrap lcKey svelte-1qapcdn"),R(o,"width","8px"),v(f,"class","flex nowrap lcVal svelte-1qapcdn"),v(t,"class","flex"),this.first=t},m(u,d){U(u,t,d),g(t,n),g(n,s),g(t,r),g(t,o),g(t,a),g(t,f),g(f,m)},p(u,d){e=u,d&2&&i!==(i=e[6][0]+"")&&ye(s,i),d&2&&c!==(c=e[6][1]+"")&&ye(m,c)},d(u){u&&j(t)}}}function Ol(l,e){let t,n,i;return n=new Li({props:{key:e[3].key,duration:e[3].duration,liveRate:e[3].liveRate}}),{key:l,first:null,c(){t=Ue(),ue(n.$$.fragment),this.first=t},m(s,r){U(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&4&&(o.key=e[3].key),r&4&&(o.duration=e[3].duration),r&4&&(o.liveRate=e[3].liveRate),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&j(t),ce(n,s)}}}function Mi(l){let e,t,n=l[0]&&Tl(l);return{c(){n&&n.c(),e=Ue()},m(i,s){n&&n.m(i,s),U(i,e,s),t=!0},p(i,[s]){i[0]?n?(n.p(i,s),s&1&&O(n,1)):(n=Tl(i),n.c(),O(n,1),n.m(e.parentNode,e)):n&&(Se(),H(n,1,1,()=>{n=null}),Le())},i(i){t||(O(n),t=!0)},o(i){H(n),t=!1},d(i){n&&n.d(i),i&&j(e)}}}const Al=2e4;function Ci(l,e,t){let n=!1,i=[],s=[];return xe(lt(200,()=>{if(t(0,n=location.hash.indexOf("dev_stat")!==-1),n){t(1,i=[...fs()].filter(c=>c[1]));const r=us(),o=Date.now(),a=[],f=[];for(const c of r.values()){const m=De(0,(c.timeUpdate+Al-o)/Al,1)*100;m||a.push(c.key),f.push({key:c.key,duration:c.duration,liveRate:m})}a.map(c=>r.delete(c)),t(2,s=f)}})),[n,i,s]}class Ii extends be{constructor(e){super(),we(this,e,Ci,Mi,_e,{})}}function Ti(l){let e,t,n,i,s,r,o,a,f;return{c(){e=w("div"),t=w("div"),n=w("div"),i=T(),s=w("div"),r=T(),o=w("div"),a=T(),f=w("div"),v(n,"class","pos_abs s1 svelte-fxby3d"),v(s,"class","pos_abs s2 svelte-fxby3d"),v(o,"class","pos_abs s3 svelte-fxby3d"),v(f,"class","pos_abs s4 svelte-fxby3d"),v(t,"class","flex pos_rel ellipsis svelte-fxby3d"),R(t,"transform","scale("+l[1]+")"),v(e,"class","flex"),R(e,"height",l[0]+"px"),R(e,"width",l[2]+"px")},m(c,m){U(c,e,m),g(e,t),g(t,n),g(t,i),g(t,s),g(t,r),g(t,o),g(t,a),g(t,f)},p(c,[m]){m&2&&R(t,"transform","scale("+c[1]+")"),m&1&&R(e,"height",c[0]+"px"),m&4&&R(e,"width",c[2]+"px")},i:de,o:de,d(c){c&&j(e)}}}function Di(l,e,t){let n,i,{height:s=5}=e;return l.$$set=r=>{"height"in r&&t(0,s=r.height)},l.$$.update=()=>{l.$$.dirty&1&&t(2,n=s/.1625),l.$$.dirty&1&&t(1,i=s/13)},[s,i,n]}class nl extends be{constructor(e){super(),we(this,e,Di,Ti,_e,{height:0})}}function Fl(l){let e,t,n,i;return t=new nl({props:{height:6}}),{c(){e=w("div"),ue(t.$$.fragment),v(e,"class","flex pos_abs loading svelte-15wz55f")},m(s,r){U(s,e,r),fe(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&He(()=>{n||(n=Oe(e,Ee,{},!0)),n.run(1)}),i=!0)},o(s){H(t.$$.fragment,s),s&&(n||(n=Oe(e,Ee,{},!1)),n.run(0)),i=!1},d(s){s&&j(e),ce(t),s&&n&&n.end()}}}function Oi(l){let e,t,n,i,s,r,o,a,f,c,m,u,d,_=l[0]&&Fl();return{c(){e=w("div"),t=w("div"),n=T(),i=w("div"),i.textContent="offline",s=T(),r=w("div"),o=oe(`online\r
		`),a=w("div"),f=oe(l[2]),c=T(),_&&_.c(),v(t,"class","pos_abs h100 onlineProgressTrumb svelte-15wz55f"),R(t,"width",l[1]+"%"),v(i,"class","flex flex_cx flex_cy pos_abs w100 h100 onlineProgressTrackLabel label2 svelte-15wz55f"),W(i,"hideR",l[1]>=1),v(a,"class","pos_abs onlineProgressTrumbLastTime svelte-15wz55f"),v(r,"class","flex flex_cx flex_cy pos_abs w100 h100 onlineProgressTrackLabel  svelte-15wz55f"),W(r,"hideL",l[1]<1),v(e,"class","flex flex_cx flex_cy flex_grow_1 onlineProgressTrack pos_rel overhide unselect cursor_ptr svelte-15wz55f")},m(p,h){U(p,e,h),g(e,t),g(e,n),g(e,i),g(e,s),g(e,r),g(r,o),g(r,a),g(a,f),g(e,c),_&&_.m(e,null),m=!0,u||(d=$(e,"click",l[8]),u=!0)},p(p,[h]){(!m||h&2)&&R(t,"width",p[1]+"%"),(!m||h&2)&&W(i,"hideR",p[1]>=1),(!m||h&4)&&ye(f,p[2]),(!m||h&2)&&W(r,"hideL",p[1]<1),p[0]?_?h&1&&O(_,1):(_=Fl(),_.c(),O(_,1),_.m(e,null)):_&&(Se(),H(_,1,1,()=>{_=null}),Le())},i(p){m||(O(_),m=!0)},o(p){H(_),m=!1},d(p){p&&j(e),_&&_.d(),u=!1,d()}}}function Ai(l,e,t){let n,i,s,{endTime:r=0}=e,{intervalTime:o=1}=e,{loading:a=!1}=e;const f=We(0);ve(l,f,_=>t(7,s=_));let c=0;function m(){const _=Math.max(0,r-Date.now());t(1,c=Math.floor(De(0,_/o,1)*100)),Ze(f,s=Math.ceil(_/1e3),s)}xe(lt(1e3,m));const u=_=>{const p=Math.floor(_%60);_/=60;const h=Math.floor(_%60);_/=60;const y=Math.floor(_),b=[];return(b.length||y)&&b.push(`${String(y).padStart(b.length?2:1,"0")}h`),(b.length||h)&&b.push(`${String(h).padStart(b.length?2:1,"0")}m`),(b.length||p)&&b.push(`${String(p).padStart(b.length?2:1,"0")}s`),b.join(" ")};function d(_){tl.call(this,l,_)}return l.$$set=_=>{"endTime"in _&&t(4,r=_.endTime),"intervalTime"in _&&t(5,o=_.intervalTime),"loading"in _&&t(0,a=_.loading)},l.$$.update=()=>{l.$$.dirty&128&&t(6,n=Math.ceil(s)),l.$$.dirty&64&&t(2,i=u(n))},[a,c,i,f,r,o,n,s,d]}class Fi extends be{constructor(e){super(),we(this,e,Ai,Oi,_e,{endTime:4,intervalTime:5,loading:0})}}function Ei(l){let e;return{c(){e=oe("\xA0")},m(t,n){U(t,e,n)},p:de,d(t){t&&j(e)}}}function zi(l){let e,t=l[2].username+"",n;return{c(){e=oe("@"),n=oe(t)},m(i,s){U(i,e,s),U(i,n,s)},p(i,s){s&4&&t!==(t=i[2].username+"")&&ye(n,t)},d(i){i&&j(e),i&&j(n)}}}function Ri(l){var A,G;let e,t,n,i,s=((A=l[2].first_name)!=null?A:"")+"",r,o,a,f,c,m=((G=l[2].last_name)!=null?G:"")+"",u,d,_,p,h,y,b,M,I,C,k,S,E,q,x;function N(V,P){return V[2].username?zi:Ei}let Y=N(l),B=Y(l);return C=new Fi({props:{intervalTime:l[1],endTime:l[0],loading:l[3]}}),C.$on("click",l[8]),{c(){e=w("div"),t=w("div"),n=w("div"),i=w("div"),r=oe(s),o=T(),a=w("div"),f=T(),c=w("div"),u=oe(m),d=oe("\xA0"),_=T(),p=w("div"),B.c(),h=T(),y=w("div"),y.innerHTML='<img src="assets/icons/logout.png" draggable="false" class="pos_abs w100 h100 svelte-1qt21qp"/>',b=T(),M=w("div"),I=T(),ue(C.$$.fragment),k=T(),S=w("div"),R(a,"width","8px"),v(n,"class","flex nowrap textOverEllipsis name svelte-1qt21qp"),v(p,"class","nowrap textOverEllipsis username svelte-1qt21qp"),v(y,"class","pos_abs btnLogout svelte-1qt21qp"),v(t,"class","flex flex_clm cursor_ptr pos_rel unselect operator svelte-1qt21qp"),R(M,"height","8px"),R(S,"height","8px"),v(e,"class","flex flex_clm cnt svelte-1qt21qp")},m(V,P){U(V,e,P),g(e,t),g(t,n),g(n,i),g(i,r),g(n,o),g(n,a),g(n,f),g(n,c),g(c,u),g(c,d),g(t,_),g(t,p),B.m(p,null),g(t,h),g(t,y),g(e,b),g(e,M),g(e,I),fe(C,e,null),g(e,k),g(e,S),E=!0,q||(x=$(y,"click",l[7]),q=!0)},p(V,[P]){var z,J;(!E||P&4)&&s!==(s=((z=V[2].first_name)!=null?z:"")+"")&&ye(r,s),(!E||P&4)&&m!==(m=((J=V[2].last_name)!=null?J:"")+"")&&ye(u,m),Y===(Y=N(V))&&B?B.p(V,P):(B.d(1),B=Y(V),B&&(B.c(),B.m(p,null)));const L={};P&2&&(L.intervalTime=V[1]),P&1&&(L.endTime=V[0]),P&8&&(L.loading=V[3]),C.$set(L)},i(V){E||(O(C.$$.fragment,V),E=!0)},o(V){H(C.$$.fragment,V),E=!1},d(V){V&&j(e),B.d(),ce(C),q=!1,x()}}}function ji(l,e,t){let n,i,s,{app:r}=e;const{operatorSelf_r:o,operatorSelfLastOnlineInfo_r:a,operatorSelfLastOnlineInfoLoading_r:f,operatorSelfLastOnline_SetOnlineFlag:c}=r;ve(l,o,y=>t(2,i=y)),ve(l,a,y=>t(10,n=y)),ve(l,f,y=>t(3,s=y));const m=()=>Pn(null);let u=0,d=1;const _=y=>{if(!y){t(0,u=0),t(1,d=1);return}t(0,u=+new Date(y.offline_at)),t(1,d=De(1,(y.interval|0)*1e3,1e9))};let p=!1;const h=async()=>{var y;!((y=r.appConfig)!=null&&y.operatorSelf_CanSetOnline)||p||(p=!0,await c(!0),p=!1)};return l.$$set=y=>{"app"in y&&t(9,r=y.app)},l.$$.update=()=>{l.$$.dirty&1024&&_(n)},[u,d,i,s,o,a,f,m,h,r,n]}class Ui extends be{constructor(e){super(),we(this,e,ji,Ri,_e,{app:9})}}const ht=(l,e)=>{let t=null,n=null,i=!0;const s=()=>{if(!i)return;const o=l.parentNode;if(o){const a=o.getBoundingClientRect();(t!==a.width||n!==a.height)&&(t=a.width,n=a.height,l.style.width=`${t}px`,l.style.height=`${n}px`,e&&e.set(a))}setTimeout(s,10)};return s(),zt("useAbsSizeFromParent"),{destroy:()=>{i=!1,Rt("useAbsSizeFromParent")}}},Ni=(l,e)=>{let t=null,n=null,i=null,s=null,r=!0;const o=()=>{if(!r)return;const f=l.getBoundingClientRect();(t!==f.width||n!==f.height||i!==f.x||s!==f.y)&&(t=f.width,n=f.height,i=f.x,s=f.y,e&&e.set(f)),setTimeout(o,10)};return o(),zt("useWatchNodeBBox"),{destroy:()=>{r=!1,Rt("useWatchNodeBBox")}}};function Hi(l){let e,t,n,i,s,r,o,a,f,c,m,u,d,_,p,h,y;return{c(){e=w("div"),t=w("div"),n=w("div"),i=T(),s=w("div"),r=T(),o=w("div"),a=T(),f=w("div"),c=T(),m=w("div"),u=T(),d=w("div"),_=T(),p=w("div"),h=T(),y=w("div"),v(n,"class","svelte-1lltvmx"),v(s,"class","svelte-1lltvmx"),v(o,"class","svelte-1lltvmx"),v(f,"class","svelte-1lltvmx"),v(m,"class","svelte-1lltvmx"),v(d,"class","svelte-1lltvmx"),v(p,"class","svelte-1lltvmx"),v(y,"class","svelte-1lltvmx"),v(t,"class","lds-roller svelte-1lltvmx"),R(t,"transform","scale("+l[2]+")"),R(t,"--loadingItemColor",l[1]),v(e,"class","flex"),R(e,"height",l[0]+"px"),R(e,"width",l[0]+"px")},m(b,M){U(b,e,M),g(e,t),g(t,n),g(t,i),g(t,s),g(t,r),g(t,o),g(t,a),g(t,f),g(t,c),g(t,m),g(t,u),g(t,d),g(t,_),g(t,p),g(t,h),g(t,y)},p(b,[M]){M&4&&R(t,"transform","scale("+b[2]+")"),M&2&&R(t,"--loadingItemColor",b[1]),M&1&&R(e,"height",b[0]+"px"),M&1&&R(e,"width",b[0]+"px")},i:de,o:de,d(b){b&&j(e)}}}function Pi(l,e,t){let n,{size:i=80}=e,{color:s="#000"}=e;return l.$$set=r=>{"size"in r&&t(0,i=r.size),"color"in r&&t(1,s=r.color)},l.$$.update=()=>{l.$$.dirty&1&&t(2,n=i/80)},[i,s,n]}class vt extends be{constructor(e){super(),we(this,e,Pi,Hi,_e,{size:0,color:1})}}function El(l){let e,t,n,i;return t=new vt({props:{color:"#fff",size:"32"}}),{c(){e=w("div"),ue(t.$$.fragment),v(e,"class","pos_abs loading svelte-9eoyjy")},m(s,r){U(s,e,r),fe(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&He(()=>{n||(n=Oe(e,Ee,{},!0)),n.run(1)}),i=!0)},o(s){H(t.$$.fragment,s),s&&(n||(n=Oe(e,Ee,{},!1)),n.run(0)),i=!1},d(s){s&&j(e),ce(t),s&&n&&n.end()}}}function zl(l){let e,t,n,i;return t=new vt({props:{color:"#fff",size:"24"}}),{c(){e=w("div"),ue(t.$$.fragment),v(e,"class","pos_abs flex flex_cy h100 loading svelte-9eoyjy")},m(s,r){U(s,e,r),fe(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&He(()=>{n||(n=Oe(e,Ee,{},!0)),n.run(1)}),i=!0)},o(s){H(t.$$.fragment,s),s&&(n||(n=Oe(e,Ee,{},!1)),n.run(0)),i=!1},d(s){s&&j(e),ce(t),s&&n&&n.end()}}}function qi(l){var I;let e,t,n,i,s,r,o,a=((I=l[0])!=null?I:0)+"",f,c,m,u,d,_,p,h,y,b=l[1]&&El(),M=l[2]&&zl();return{c(){e=w("div"),t=w("div"),n=w("div"),n.textContent="New leads",i=T(),b&&b.c(),s=T(),r=w("div"),o=w("div"),f=oe(a),c=T(),m=w("div"),u=T(),d=w("div"),M&&M.c(),_=oe(`\r
		Get one`),v(n,"class","flex mainLabel svelte-9eoyjy"),v(o,"class","flex labelCountNum svelte-9eoyjy"),v(r,"class","flex flex_cx flex_cy labelCount svelte-9eoyjy"),v(t,"class","flex flex_cx flex_cy flex_clm header pos_rel w100 svelte-9eoyjy"),R(m,"height","4px"),v(d,"class","flex flex_cx flex_cy cursor_ptr noselect pos_rel bntMain svelte-9eoyjy"),W(d,"disabled",!l[0]&&!l[2]&&!l[3]),W(d,"btnLoading",l[2]),W(d,"animationDone",l[3]==="done"),W(d,"animationFail",l[3]==="fail"),v(e,"class","flex flex_clm wrapMain flex_grow_1 w100 unselect svelte-9eoyjy")},m(C,k){U(C,e,k),g(e,t),g(t,n),g(t,i),b&&b.m(t,null),g(t,s),g(t,r),g(r,o),g(o,f),g(e,c),g(e,m),g(e,u),g(e,d),M&&M.m(d,null),g(d,_),p=!0,h||(y=$(d,"click",l[4]),h=!0)},p(C,[k]){var S;C[1]?b?k&2&&O(b,1):(b=El(),b.c(),O(b,1),b.m(t,s)):b&&(Se(),H(b,1,1,()=>{b=null}),Le()),(!p||k&1)&&a!==(a=((S=C[0])!=null?S:0)+"")&&ye(f,a),C[2]?M?k&4&&O(M,1):(M=zl(),M.c(),O(M,1),M.m(d,_)):M&&(Se(),H(M,1,1,()=>{M=null}),Le()),(!p||k&13)&&W(d,"disabled",!C[0]&&!C[2]&&!C[3]),(!p||k&4)&&W(d,"btnLoading",C[2]),(!p||k&8)&&W(d,"animationDone",C[3]==="done"),(!p||k&8)&&W(d,"animationFail",C[3]==="fail")},i(C){p||(O(b),O(M),p=!0)},o(C){H(b),H(M),p=!1},d(C){C&&j(e),b&&b.d(),M&&M.d(),h=!1,y()}}}function Bi(l,e,t){var c,m;let{app:n}=e,i=0,s=!0,r=!1,o=null;const a=Ut(1e3,()=>t(3,o=null)),f=async()=>{if(r||!i)return;t(2,r=!0);const u=await n.api.lead_AssignOneLead();t(3,o=u?"done":"fail"),a(),t(2,r=!1)};return xe(lt(De(100,((m=(c=n==null?void 0:n.appConfig)==null?void 0:c.updateIntervals)==null?void 0:m.new_leads_count)|0,36e5),async()=>{var u;t(0,i=((u=await n.api.lead_GetUnassignedLeadCount())==null?void 0:u.count)|0),t(1,s=!1)},!1)),l.$$set=u=>{"app"in u&&t(5,n=u.app)},[i,s,r,o,f,n]}class xi extends be{constructor(e){super(),we(this,e,Bi,qi,_e,{app:5})}}function Gi(l){let e,t,n,i,s,r,o,a,f,c,m,u,d,_,p,h,y,b;return{c(){e=w("label"),t=w("input"),n=T(),i=Ve("svg"),s=Ve("symbol"),r=Ve("path"),o=Ve("defs"),a=Ve("mask"),f=Ve("use"),c=Ve("use"),m=Ve("path"),u=T(),d=Ve("svg"),_=Ve("path"),p=Ve("path"),h=Ve("path"),v(t,"type","checkbox"),v(t,"class","svelte-13drl8w"),v(r,"d","M5.22003 7.26C5.72003 7.76 7.57 9.7 8.67 11.45C12.2 6.05 15.65 3.5 19.19 1.69"),v(r,"fill","none"),v(r,"stroke-width","2.25"),v(r,"stroke-linecap","round"),v(r,"stroke-linejoin","round"),v(s,"id","tick-path"),v(s,"viewBox","0 0 21 18"),v(s,"xmlns","http://www.w3.org/2000/svg"),v(f,"class","tick mask svelte-13drl8w"),v(f,"href","#tick-path"),v(a,"id","tick"),v(c,"class","tick svelte-13drl8w"),v(c,"href","#tick-path"),v(c,"stroke","currentColor"),v(m,"fill","white"),v(m,"mask","url(#tick)"),v(m,"d","M18 9C18 10.4464 17.9036 11.8929 17.7589 13.1464C17.5179 15.6054 15.6054 17.5179 13.1625 17.7589C11.8929 17.9036 10.4464 18 9 18C7.55357 18 6.10714 17.9036 4.85357 17.7589C2.39464 17.5179 0.498214 15.6054 0.241071 13.1464C0.0964286 11.8929 0 10.4464 0 9C0 7.55357 0.0964286 6.10714 0.241071 4.8375C0.498214 2.39464 2.39464 0.482143 4.85357 0.241071C6.10714 0.0964286 7.55357 0 9 0C10.4464 0 11.8929 0.0964286 13.1625 0.241071C15.6054 0.482143 17.5179 2.39464 17.7589 4.8375C17.9036 6.10714 18 7.55357 18 9Z"),v(i,"viewBox","0 0 21 18"),v(i,"class","svelte-13drl8w"),v(_,"d","M5.88086 5.89441L9.53504 4.26746"),v(p,"d","M5.5274 8.78838L9.45391 9.55161"),v(h,"d","M3.49371 4.22065L5.55387 0.79198"),v(d,"class","lines svelte-13drl8w"),v(d,"viewBox","0 0 11 11"),v(e,"class","checkbox svelte-13drl8w")},m(M,I){U(M,e,I),g(e,t),t.checked=l[0],g(e,n),g(e,i),g(i,s),g(s,r),g(i,o),g(o,a),g(a,f),g(i,c),g(i,m),g(e,u),g(e,d),g(d,_),g(d,p),g(d,h),y||(b=$(t,"change",l[1]),y=!0)},p(M,[I]){I&1&&(t.checked=M[0])},i:de,o:de,d(M){M&&j(e),y=!1,b()}}}function Wi(l,e,t){let{checked:n=!1}=e;function i(){n=this.checked,t(0,n)}return l.$$set=s=>{"checked"in s&&t(0,n=s.checked)},[n,i]}class Yi extends be{constructor(e){super(),we(this,e,Wi,Gi,_e,{checked:0})}}function Rl(l){let e,t=l[13](l[4])+"",n;return{c(){e=w("div"),n=oe(t),v(e,"class","pos_abs flex flex_cx flex_cy lastTime svelte-1t4115q")},m(i,s){U(i,e,s),g(e,n)},p(i,s){s&16&&t!==(t=i[13](i[4])+"")&&ye(n,t)},d(i){i&&j(e)}}}function jl(l){var i;let e,t=((i=l[3])==null?void 0:i.unread_messages_count)+"",n;return{c(){e=w("div"),n=oe(t),v(e,"class","pos_abs flex flex_cx flex_cy unreadMsgs svelte-1t4115q")},m(s,r){U(s,e,r),g(e,n)},p(s,r){var o;r&8&&t!==(t=((o=s[3])==null?void 0:o.unread_messages_count)+"")&&ye(n,t)},d(s){s&&j(e)}}}function Vi(l){var me,se,le,K,Z,ae,pe,Ae,Pe,ee,Ie;let e,t,n,i,s,r,o=((le=(se=(me=l[3])==null?void 0:me.lead)==null?void 0:se.first_name)!=null?le:"")+"",a,f,c,m,u,d=((ae=(Z=(K=l[3])==null?void 0:K.lead)==null?void 0:Z.last_name)!=null?ae:"")+"",_,p,h,y,b=((Pe=(Ae=(pe=l[3])==null?void 0:pe.last_message)==null?void 0:Ae.text)!=null?Pe:"")+"",M,I,C,k,S,E,q,x,N=((ee=l[5])==null?void 0:ee.title)+"",Y,B,A,G,V,P,L,z=l[4]&&Rl(l),J=((Ie=l[3])==null?void 0:Ie.unread_messages_count)&&jl(l);return{c(){e=w("div"),t=w("div"),n=w("div"),i=w("div"),s=T(),r=w("div"),a=oe(o),f=T(),c=w("div"),m=T(),u=w("div"),_=oe(d),p=oe("\xA0"),h=T(),y=w("div"),M=oe(b),I=oe("\xA0"),C=T(),k=w("div"),S=w("div"),E=w("img"),x=T(),Y=oe(N),B=T(),A=w("div"),G=T(),z&&z.c(),V=T(),J&&J.c(),R(i,"width","8px"),R(c,"width","8px"),v(n,"class","flex nowrap textOverEllipsis userFirstLastName pos_rel svelte-1t4115q"),v(y,"class","nowrap textOverEllipsis lastMessage pos_rel svelte-1t4115q"),Ne(E.src,q="assets/icons/status1.png")||v(E,"src",q),v(E,"draggable","false"),v(E,"class","pos_abs statusIcon svelte-1t4115q"),v(S,"class","flex flex_cy leadStatus pos_rel svelte-1t4115q"),R(S,"background",l[5].bgColor),R(S,"color",l[5].color),R(A,"width","4px"),v(k,"class","flex"),v(t,"class","flex flex_clm cursor_ptr item flex_cx unselect pos_rel svelte-1t4115q"),R(t,"height",l[0]+"px"),W(t,"active",l[1]===l[7]),W(t,"disabled",l[12](l[3])),v(e,"class","pos_abs w100 cntWrapper svelte-1t4115q"),R(e,"transform","translate3d(0px, "+(l[6]+l[2])+"px, 0px)")},m(he,Me){U(he,e,Me),g(e,t),g(t,n),g(n,i),g(n,s),g(n,r),g(r,a),g(n,f),g(n,c),g(n,m),g(n,u),g(u,_),g(u,p),g(t,h),g(t,y),g(y,M),g(y,I),g(t,C),g(t,k),g(k,S),g(S,E),g(S,x),g(S,Y),g(k,B),g(k,A),g(t,G),z&&z.m(t,null),g(t,V),J&&J.m(t,null),P||(L=$(t,"click",l[11]),P=!0)},p(he,[Me]){var ze,D,F,X,ie,re,ne,Q,ge,ke,te;Me&8&&o!==(o=((F=(D=(ze=he[3])==null?void 0:ze.lead)==null?void 0:D.first_name)!=null?F:"")+"")&&ye(a,o),Me&8&&d!==(d=((re=(ie=(X=he[3])==null?void 0:X.lead)==null?void 0:ie.last_name)!=null?re:"")+"")&&ye(_,d),Me&8&&b!==(b=((ge=(Q=(ne=he[3])==null?void 0:ne.last_message)==null?void 0:Q.text)!=null?ge:"")+"")&&ye(M,b),Me&32&&N!==(N=((ke=he[5])==null?void 0:ke.title)+"")&&ye(Y,N),Me&32&&R(S,"background",he[5].bgColor),Me&32&&R(S,"color",he[5].color),he[4]?z?z.p(he,Me):(z=Rl(he),z.c(),z.m(t,V)):z&&(z.d(1),z=null),(te=he[3])!=null&&te.unread_messages_count?J?J.p(he,Me):(J=jl(he),J.c(),J.m(t,null)):J&&(J.d(1),J=null),Me&1&&R(t,"height",he[0]+"px"),Me&130&&W(t,"active",he[1]===he[7]),Me&4104&&W(t,"disabled",he[12](he[3])),Me&68&&R(e,"transform","translate3d(0px, "+(he[6]+he[2])+"px, 0px)")},i:de,o:de,d(he){he&&j(e),z&&z.d(),J&&J.d(),P=!1,L()}}}function Ji(l,e,t){let n,i,s,r,o,a,{app:f}=e;const{dialogMap_r:c,dialogActiveID_r:m,dialogActiveID_Set:u}=f;ve(l,c,k=>t(16,r=k)),ve(l,m,k=>t(7,a=k));let{height:d=54}=e,{dialog_id:_}=e,{y:p=0}=e,{scrollY:h=0}=e;const y=We(p);ve(l,y,k=>t(6,o=k));const b=k=>{n&&!M(n)&&u(n.id)},M=k=>{var S;return((S=k==null?void 0:k.lead)==null?void 0:S.status)==="DL"},I=k=>{if(!k)return"";const S=q=>String(q).padStart(2,"0"),E=new Date;return k=new Date(k),k.getYear()===E.getYear()&&k.getMonth()===E.getMonth()?k.getDate()===E.getDate()?`${S(k.getHours())}:${S(k.getMinutes())}`:`${S(k.getDate())}d ${S(k.getHours())}:${S(k.getMinutes())}`:`${S(k.getDate())}.${S(k.getMonth())}.${k.getFullYear()}`},C=k=>{var S,E,q;return(q=(S=k==null?void 0:k.last_message)==null?void 0:S.received_at)!=null?q:(E=k==null?void 0:k.lead)==null?void 0:E.date_joined};return l.$$set=k=>{"app"in k&&t(14,f=k.app),"height"in k&&t(0,d=k.height),"dialog_id"in k&&t(1,_=k.dialog_id),"y"in k&&t(15,p=k.y),"scrollY"in k&&t(2,h=k.scrollY)},l.$$.update=()=>{l.$$.dirty&32768&&Ze(y,o=p,o),l.$$.dirty&65538&&t(3,n=r[_]),l.$$.dirty&16392&&t(5,i=f.lead_GetStatusOrDefault(n==null?void 0:n.lead)),l.$$.dirty&8&&t(4,s=C(n))},[d,_,h,n,s,i,o,a,c,m,y,b,M,I,f,p,r]}class Xi extends be{constructor(e){super(),we(this,e,Ji,Vi,_e,{app:14,height:0,dialog_id:1,y:15,scrollY:2})}}function Ki(l){let e,t,n,i;return{c(){e=w("div"),t=w("div"),v(t,"class","pos_abs thumb w100 svelte-5ca5ia"),R(t,"height",l[1]+"px"),R(t,"transform","translate(0px, "+l[5](l[0],l[2],l[1])+"px)"),W(t,"active",l[3]),v(e,"class","pos_rel h100 unselect line svelte-5ca5ia"),W(e,"active",l[3])},m(s,r){U(s,e,r),g(e,t),n||(i=[$(window,"mousemove",l[7]),$(window,"mouseup",l[8]),$(window,"blur",l[8]),$(t,"mousedown",l[6]),ft(Ni.call(null,e,l[4])),$(e,"mousedown",l[9])],n=!0)},p(s,[r]){r&2&&R(t,"height",s[1]+"px"),r&7&&R(t,"transform","translate(0px, "+s[5](s[0],s[2],s[1])+"px)"),r&8&&W(t,"active",s[3]),r&8&&W(e,"active",s[3])},i:de,o:de,d(s){s&&j(e),n=!1,Re(i)}}}function Zi(l,e,t){let n;const i=M=>De(0,Array.isArray(M)?M[0]:M,1);let{value_in:s=0}=e,{value_out:r=i(s)}=e,{thumb_Height:o=20}=e,{thumb_HeightRate:a=null}=e;const f=Fe(null);ve(l,f,M=>t(2,n=M));const c=()=>n?n.height-o:1,m=M=>n?M*c():0,u=()=>{if(!n)return 1;if(a===null)return o;t(1,o=De(.1,a,1)*n.height)};let d=null;const _=M=>{!n||t(3,d={y:M.clientY,value_out:r})},p=M=>{if(!n||!d)return;const I=M.clientY-d.y;if(n.height){const C=I/c();t(0,r=De(0,d.value_out+C,1))}},h=M=>{t(3,d=null)},y=M=>{!n||d||(t(0,r=De(0,(M.clientY-n.y-o/2)/c(),1)),t(3,d={y:M.clientY,value_out:r}))},b=()=>{if(!n)return 0;d||t(0,r=i(s))};return l.$$set=M=>{"value_in"in M&&t(10,s=M.value_in),"value_out"in M&&t(0,r=M.value_out),"thumb_Height"in M&&t(1,o=M.thumb_Height),"thumb_HeightRate"in M&&t(11,a=M.thumb_HeightRate)},l.$$.update=()=>{l.$$.dirty&2052&&u(),l.$$.dirty&1024&&b()},[r,o,n,d,f,m,_,p,h,y,s,a]}class qn extends be{constructor(e){super(),we(this,e,Zi,Ki,_e,{value_in:10,value_out:0,thumb_Height:1,thumb_HeightRate:11})}}const{Map:Qi}=rs;function Ul(l,e,t){const n=l.slice();return n[24]=e[t],n}function Nl(l,e){let t,n,i;return n=new Xi({props:{app:e[0],dialog_id:e[24].dialog_id,scrollY:-e[2],y:e[24].y}}),{key:l,first:null,c(){t=Ue(),ue(n.$$.fragment),this.first=t},m(s,r){U(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&1&&(o.app=e[0]),r&16&&(o.dialog_id=e[24].dialog_id),r&4&&(o.scrollY=-e[2]),r&16&&(o.y=e[24].y),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&j(t),ce(n,s)}}}function Hl(l){let e,t,n,i;function s(o){l[14](o)}let r={value_in:l[5],thumb_HeightRate:l[6]};return l[1]!==void 0&&(r.value_out=l[1]),t=new qn({props:r}),je.push(()=>ot(t,"value_out",s)),{c(){e=w("div"),ue(t.$$.fragment),v(e,"class","pos_abs h100 dialogScroll svelte-1l0pdn")},m(o,a){U(o,e,a),fe(t,e,null),i=!0},p(o,a){const f={};a&32&&(f.value_in=o[5]),a&64&&(f.thumb_HeightRate=o[6]),!n&&a&2&&(n=!0,f.value_out=o[1],rt(()=>n=!1)),t.$set(f)},i(o){i||(O(t.$$.fragment,o),i=!0)},o(o){H(t.$$.fragment,o),i=!1},d(o){o&&j(e),ce(t)}}}function Pl(l){let e,t,n,i,s;return{c(){e=w("div"),e.innerHTML='<img class="flex" draggable="false" style="filter: invert(1);" src="assets/icons/arrow-up.png"/>',v(e,"class","flex pos_abs cursor_ptr btnScrollUp svelte-1l0pdn")},m(r,o){U(r,e,o),n=!0,i||(s=$(e,"click",l[15]),i=!0)},p:de,i(r){n||(r&&He(()=>{t||(t=Oe(e,Ee,{},!0)),t.run(1)}),n=!0)},o(r){r&&(t||(t=Oe(e,Ee,{},!1)),t.run(0)),n=!1},d(r){r&&j(e),r&&t&&t.end(),i=!1,s()}}}function $i(l){let e,t,n=[],i=new Qi,s,r,o,a,f,c=l[4];const m=_=>_[24].dialog_id;for(let _=0;_<c.length;_+=1){let p=Ul(l,c,_),h=m(p);i.set(h,n[_]=Nl(h,p))}let u=l[6]<1&&Hl(l),d=l[6]<1&&l[7]&&Pl(l);return{c(){e=w("div"),t=w("div");for(let _=0;_<n.length;_+=1)n[_].c();s=T(),u&&u.c(),r=T(),d&&d.c(),v(t,"class","flex overhide pos_rel"),v(e,"class","flex flex_grow_1 pos_rel"),R(e,"--itemHeight",$e+"px")},m(_,p){U(_,e,p),g(e,t);for(let h=0;h<n.length;h+=1)n[h].m(t,null);g(e,s),u&&u.m(e,null),g(e,r),d&&d.m(e,null),o=!0,a||(f=[ft(ht.call(null,t,l[8])),$(e,"wheel",l[10],{passive:!0})],a=!0)},p(_,[p]){p&21&&(c=_[4],Se(),n=Xe(n,p,m,1,_,c,i,t,tt,Nl,null,Ul),Le()),_[6]<1?u?(u.p(_,p),p&64&&O(u,1)):(u=Hl(_),u.c(),O(u,1),u.m(e,r)):u&&(Se(),H(u,1,1,()=>{u=null}),Le()),_[6]<1&&_[7]?d?(d.p(_,p),p&192&&O(d,1)):(d=Pl(_),d.c(),O(d,1),d.m(e,null)):d&&(Se(),H(d,1,1,()=>{d=null}),Le())},i(_){if(!o){for(let p=0;p<c.length;p+=1)O(n[p]);O(u),O(d),o=!0}},o(_){for(let p=0;p<n.length;p+=1)H(n[p]);H(u),H(d),o=!1},d(_){_&&j(e);for(let p=0;p<n.length;p+=1)n[p].d();u&&u.d(),d&&d.d(),a=!1,Re(f)}}}const $e=54;function er(l,e,t){let n,i,s=de,r=()=>(s(),s=Et(_,B=>t(13,i=B)),_),o;l.$$.on_destroy.push(()=>s());let{app:a}=e;const{dialogMap_SetDialogList:f}=a;let{filter:c={}}=e;const m=B=>{var A,G;return[c.filterUnreadFirst?1:0,(A=c.filterTag)!=null?A:"",(G=c.filterStatus)!=null?G:""].join("/")};let u={},d=null,_=Fe(null);r();function p(){const B={...c},A=m();u[A]||(u[A]=gs({fLoad:G=>(G={unread_first:B.filterUnreadFirst?1:0,...G},B.filterTag&&(G.tag=B.filterTag),B.filterStatus&&(G.status=B.filterStatus),a.api.dialog_GetList(G)),updateInterval:500,isLoadEnd:!1,onUpdateItemList:f})),d!==u[A]&&([...Object.values(u)].map(G=>G.pause()),d=u[A],d.resume(),console.log({filterHash:A}),r(t(3,_=d.getData_r())))}xe(()=>[...Object.values(u)].map(B=>B.destroy()));let h=[];const y=Fe(null);ve(l,y,B=>t(12,n=B));let b=0,M=0,I=1,C=0,k=We(C,{duration:200});ve(l,k,B=>t(2,o=B));function S(){if(!n||!i)return;const B=Math.max(1,Math.floor(n.height)),A=i.total*$e,G=A-B;t(6,I=A?De(0,B/A,1):1),G<0?C=0:C=M*G,Ze(k,o=C,o)}let E=!1;function q(){if(!n||!i)return;const B=i,A=Math.max(1,Math.floor(n.height)),G=Math.ceil(A/$e);i.total*$e;let P=Math.max(0,Math.floor(o/$e)-1);const L=G+2;P>B.total&&(P=Math.max(0,B.total-L)),d&&d.setRange(P,L);const z=[];for(let J=P,me=0;me<L&&J<B.total;me++,J++){const se=B.list[J];z.push({index:J,item:se,y:J*$e})}t(4,h=[...new Map(z.filter(J=>J.item).map(J=>[J.item.id,J]))].map(([J,me])=>({dialog_id:me.item.id,y:me.y}))),t(7,E=P>1)}const x=B=>{if(!n||!i)return;const A=i,G=Math.max(1,Math.floor(n.height)),P=A.total*$e-G;if(P<0)return;const L=B.deltaY>0?1:-1;t(5,b=[M+$e/P*L])};function N(B){M=B,t(1,M)}const Y=()=>t(5,b=[0]);return l.$$set=B=>{"app"in B&&t(0,a=B.app),"filter"in B&&t(11,c=B.filter)},l.$$.update=()=>{l.$$.dirty&2048&&p(),l.$$.dirty&12290&&S(),l.$$.dirty&12292&&q()},[a,M,o,_,h,b,I,E,y,k,x,c,n,i,N,Y]}class tr extends be{constructor(e){super(),we(this,e,er,$i,_e,{app:0,filter:11})}}function ql(l,e,t){const n=l.slice();return n[6]=e[t],n}function Bl(l){let e,t,n,i,s=[],r=new Map,o=l[0];const a=f=>f[6].id;for(let f=0;f<o.length;f+=1){let c=ql(l,o,f),m=a(c);r.set(m,s[f]=xl(m,c))}return{c(){e=w("div"),t=w("div"),t.textContent="Filter status",n=T(),i=w("div");for(let f=0;f<s.length;f+=1)s[f].c();v(t,"class","flex label svelte-1ovi0to"),v(i,"class","flex unselect"),v(e,"class","flex flex_clm unselect")},m(f,c){U(f,e,c),g(e,t),g(e,n),g(e,i);for(let m=0;m<s.length;m+=1)s[m].m(i,null)},p(f,c){c&3&&(o=f[0],s=Xe(s,c,a,1,f,o,r,i,Un,xl,null,ql))},d(f){f&&j(e);for(let c=0;c<s.length;c+=1)s[c].d()}}}function xl(l,e){let t,n=e[6].title+"",i,s,r;return{key:l,first:null,c(){var o,a,f,c;t=w("div"),i=oe(n),v(t,"class","flex flex_cx flex_cy nowrap cursor_ptr statusItem svelte-1ovi0to"),R(t,"background",(a=(o=e[6])==null?void 0:o.bgColor)!=null?a:"#000"),R(t,"color",(c=(f=e[6])==null?void 0:f.color)!=null?c:"#fff"),W(t,"select",e[6]._select),this.first=t},m(o,a){U(o,t,a),g(t,i),s||(r=$(t,"click",function(){et(e[1](e[6]))&&e[1](e[6]).apply(this,arguments)}),s=!0)},p(o,a){var f,c,m,u;e=o,a&1&&n!==(n=e[6].title+"")&&ye(i,n),a&1&&R(t,"background",(c=(f=e[6])==null?void 0:f.bgColor)!=null?c:"#000"),a&1&&R(t,"color",(u=(m=e[6])==null?void 0:m.color)!=null?u:"#fff"),a&1&&W(t,"select",e[6]._select)},d(o){o&&j(t),s=!1,r()}}}function lr(l){let e,t=l[0].length>1&&Bl(l);return{c(){t&&t.c(),e=Ue()},m(n,i){t&&t.m(n,i),U(n,e,i)},p(n,[i]){n[0].length>1?t?t.p(n,i):(t=Bl(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:de,o:de,d(n){t&&t.d(n),n&&j(e)}}}const Gl="__ALL__";function nr(l,e,t){var a,f;let{app:n}=e,{filterStatus:i=null}=e,s=[{title:"ALL",id:Gl,color:"#000",bgColor:"#fff",_select:!0},...((f=(a=n==null?void 0:n.appConfig)==null?void 0:a.lead_StatusFilterList)!=null?f:[]).map(n.lead_GetStatusByID).map(c=>({...c,_select:!1}))];const r=()=>{var c,m;t(0,s),t(2,i=s.length?s[0]._select?null:(m=(c=s.find(u=>u._select))==null?void 0:c.id)!=null?m:null:null)},o=c=>{const m=!c._select;return m?(s.map(u=>u._select=!1),c._select=m,r()):c.id===Gl?void 0:(t(0,s[0]._select=!0,s),c._select=m,r())};return r(),l.$$set=c=>{"app"in c&&t(3,n=c.app),"filterStatus"in c&&t(2,i=c.filterStatus)},[s,o,i,n]}class sr extends be{constructor(e){super(),we(this,e,nr,lr,_e,{app:3,filterStatus:2})}}function Wl(l){let e,t,n;return t=new vt({props:{size:"32",color:"#fff"}}),{c(){e=w("div"),ue(t.$$.fragment),v(e,"class","flex flex_cy flex_cx pos_abs wh100 audioControl_Item svelte-os3u6s"),W(e,"lhide",l[0]!=="loading")},m(i,s){U(i,e,s),fe(t,e,null),n=!0},p(i,s){(!n||s&1)&&W(e,"lhide",i[0]!=="loading")},i(i){n||(O(t.$$.fragment,i),n=!0)},o(i){H(t.$$.fragment,i),n=!1},d(i){i&&j(e),ce(t)}}}function ir(l){let e,t,n,i,s,r,o,a,f,c,m=l[0]==="loading"&&Wl(l);return{c(){e=w("div"),m&&m.c(),t=T(),n=w("img"),s=T(),r=w("img"),v(n,"class","pos_abs overhide wh100 audioControl_Item svelte-os3u6s"),Ne(n.src,i="assets/icons/play.png")||v(n,"src",i),v(n,"draggable","false"),R(n,"filter","invert(1)"),W(n,"lhide",l[0]==="play"),W(n,"rhide",l[0]==="loading"),v(r,"class","pos_abs overhide wh100 audioControl_Item svelte-os3u6s"),Ne(r.src,o="assets/icons/pause.png")||v(r,"src",o),v(r,"draggable","false"),R(r,"filter","invert(1)"),W(r,"rhide",l[0]==="pause"||l[0]==="loading"),v(e,"class","flex audioControl cursor_ptr unselect pos_rel flex_cx flex_cy overhide svelte-os3u6s")},m(u,d){U(u,e,d),m&&m.m(e,null),g(e,t),g(e,n),g(e,s),g(e,r),a=!0,f||(c=$(e,"click",l[2]),f=!0)},p(u,[d]){u[0]==="loading"?m?(m.p(u,d),d&1&&O(m,1)):(m=Wl(u),m.c(),O(m,1),m.m(e,t)):m&&(Se(),H(m,1,1,()=>{m=null}),Le()),(!a||d&1)&&W(n,"lhide",u[0]==="play"),(!a||d&1)&&W(n,"rhide",u[0]==="loading"),(!a||d&1)&&W(r,"rhide",u[0]==="pause"||u[0]==="loading")},i(u){a||(O(m),a=!0)},o(u){H(m),a=!1},d(u){u&&j(e),m&&m.d(),f=!1,c()}}}function rr(l,e,t){let n,{app:i}=e,{url:s}=e;const r=i.audioMgr.getControlAudio({url:s,cache:!0}),{state_r:o}=r.info_r;ve(l,o,f=>t(0,n=f));const a=f=>{!r||(n==="pause"&&r.play(),n==="play"&&r.pause())};return l.$$set=f=>{"app"in f&&t(3,i=f.app),"url"in f&&t(4,s=f.url)},[n,o,a,i,s]}class or extends be{constructor(e){super(),we(this,e,rr,ir,_e,{app:3,url:4})}}function ar(l){let e,t,n,i,s,r,o,a,f;return{c(){var c;e=w("img"),n=T(),i=w("div"),s=w("div"),s.innerHTML='<img class="w100 h100 svelte-zkly5g" draggable="false" src="assets/icons/download.png"/>',r=T(),o=w("div"),o.innerHTML='<img class="w100 h100 svelte-zkly5g" draggable="false" src="assets/icons/fullscreen.png"/>',v(e,"class","a_img svelte-zkly5g"),Ne(e.src,t=(c=l[1])!=null?c:"assets/icons/loading.gif")||v(e,"src",t),v(e,"draggable","false"),R(e,"max-height",l[0]+"px"),W(e,"loading",!l[1]),v(s,"class","flex cursor_ptr imgCtrlBtn svelte-zkly5g"),v(o,"class","flex cursor_ptr imgCtrlBtn svelte-zkly5g"),v(i,"class","flex pos_abs imgCtrlBtnGroup svelte-zkly5g")},m(c,m){U(c,e,m),U(c,n,m),U(c,i,m),g(i,s),g(i,r),g(i,o),a||(f=[$(s,"click",l[3]),$(o,"click",l[4])],a=!0)},p(c,[m]){var u;m&2&&!Ne(e.src,t=(u=c[1])!=null?u:"assets/icons/loading.gif")&&v(e,"src",t),m&1&&R(e,"max-height",c[0]+"px"),m&2&&W(e,"loading",!c[1])},i:de,o:de,d(c){c&&j(e),c&&j(n),c&&j(i),a=!1,Re(f)}}}function fr(l,e,t){let n,{app:i}=e,{imgHeight:s}=e,{url:r}=e;const{state_r:o,url_r:a}=i.imageMgr.getOrCreateImageItem(r).info_r;ve(l,a,m=>t(1,n=m));const f=m=>{Vt(r)},c=m=>{n&&i.events.emit("openOverlayImageView",n)};return l.$$set=m=>{"app"in m&&t(5,i=m.app),"imgHeight"in m&&t(0,s=m.imgHeight),"url"in m&&t(6,r=m.url)},[s,n,a,f,c,i,r]}class cr extends be{constructor(e){super(),we(this,e,fr,ar,_e,{app:5,imgHeight:0,url:6})}}function Yl(l){let e=l[3].url,t,n,i=Vl(l);return{c(){i.c(),t=Ue()},m(s,r){i.m(s,r),U(s,t,r),n=!0},p(s,r){r&8&&_e(e,e=s[3].url)?(Se(),H(i,1,1,de),Le(),i=Vl(s),i.c(),O(i,1),i.m(t.parentNode,t)):i.p(s,r)},i(s){n||(O(i),n=!0)},o(s){H(i),n=!1},d(s){s&&j(t),i.d(s)}}}function Vl(l){let e,t;return e=new cr({props:{app:l[0],imgHeight:l[6],url:l[3].url}}),{c(){ue(e.$$.fragment)},m(n,i){fe(e,n,i),t=!0},p(n,i){const s={};i&1&&(s.app=n[0]),i&64&&(s.imgHeight=n[6]),i&8&&(s.url=n[3].url),e.$set(s)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Jl(l){let e,t,n,i,s,r,o;return{c(){e=w("img"),n=T(),i=w("div"),s=w("div"),s.innerHTML='<img class="w100 h100 svelte-1m8yuzj" draggable="false" src="assets/icons/download.png"/>',v(e,"class","a_img fileIcon svelte-1m8yuzj"),Ne(e.src,t="assets/icons/folder.png")||v(e,"src",t),v(e,"draggable","false"),R(e,"max-height",l[6]+"px"),v(s,"class","flex cursor_ptr imgCtrlBtn svelte-1m8yuzj"),v(i,"class","flex pos_abs imgCtrlBtnGroup svelte-1m8yuzj")},m(a,f){U(a,e,f),U(a,n,f),U(a,i,f),g(i,s),r||(o=$(s,"click",l[12]),r=!0)},p(a,f){f&64&&R(e,"max-height",a[6]+"px")},d(a){a&&j(e),a&&j(n),a&&j(i),r=!1,o()}}}function Xl(l){let e=l[5].url,t,n,i=Kl(l);return{c(){i.c(),t=Ue()},m(s,r){i.m(s,r),U(s,t,r),n=!0},p(s,r){r&32&&_e(e,e=s[5].url)?(Se(),H(i,1,1,de),Le(),i=Kl(s),i.c(),O(i,1),i.m(t.parentNode,t)):i.p(s,r)},i(s){n||(O(i),n=!0)},o(s){H(i),n=!1},d(s){s&&j(t),i.d(s)}}}function Kl(l){let e,t,n,i,s,r,o;return e=new or({props:{app:l[0],url:l[5].url}}),{c(){ue(e.$$.fragment),t=T(),n=w("div"),i=w("div"),i.innerHTML='<img class="w100 h100 svelte-1m8yuzj" draggable="false" src="assets/icons/download.png"/>',v(i,"class","flex cursor_ptr imgCtrlBtn svelte-1m8yuzj"),v(n,"class","flex pos_abs imgCtrlBtnGroup svelte-1m8yuzj")},m(a,f){fe(e,a,f),U(a,t,f),U(a,n,f),g(n,i),s=!0,r||(o=$(i,"click",l[13]),r=!0)},p(a,f){const c={};f&1&&(c.app=a[0]),f&32&&(c.url=a[5].url),e.$set(c)},i(a){s||(O(e.$$.fragment,a),s=!0)},o(a){H(e.$$.fragment,a),s=!1},d(a){ce(e,a),a&&j(t),a&&j(n),r=!1,o()}}}function Zl(l){var i;let e,t=((i=l[1])==null?void 0:i.text)+"",n;return{c(){e=w("pre"),n=oe(t),v(e,"class","w100 text textPre svelte-1m8yuzj")},m(s,r){U(s,e,r),g(e,n)},p(s,r){var o;r&2&&t!==(t=((o=s[1])==null?void 0:o.text)+"")&&ye(n,t)},d(s){s&&j(e)}}}function ur(l){var _,p;let e,t,n,i,s,r,o=l[7]((_=l[1])==null?void 0:_.received_at)+"",a,f,c=l[3]&&Yl(l),m=l[4]&&Jl(l),u=l[5]&&Xl(l),d=((p=l[1])==null?void 0:p.text)&&Zl(l);return{c(){var h,y,b,M;e=w("div"),c&&c.c(),t=T(),m&&m.c(),n=T(),u&&u.c(),i=T(),d&&d.c(),s=T(),r=w("div"),a=oe(o),v(r,"class","flex pos_abs unselect date svelte-1m8yuzj"),W(r,"attachment_mode",l[3]&&!((h=l[1])!=null&&h.text)),v(e,"class","flex flex_clm overhide pos_abs chat_item svelte-1m8yuzj"),W(e,"chat_item_other",(y=l[1])==null?void 0:y.incoming),W(e,"chat_item_self",!((b=l[1])!=null&&b.incoming)),W(e,"has_text",(M=l[1])==null?void 0:M.text)},m(h,y){U(h,e,y),c&&c.m(e,null),g(e,t),m&&m.m(e,null),g(e,n),u&&u.m(e,null),g(e,i),d&&d.m(e,null),g(e,s),g(e,r),g(r,a),l[14](e),f=!0},p(h,[y]){var b,M,I,C,k,S;h[3]?c?(c.p(h,y),y&8&&O(c,1)):(c=Yl(h),c.c(),O(c,1),c.m(e,t)):c&&(Se(),H(c,1,1,()=>{c=null}),Le()),h[4]?m?m.p(h,y):(m=Jl(h),m.c(),m.m(e,n)):m&&(m.d(1),m=null),h[5]?u?(u.p(h,y),y&32&&O(u,1)):(u=Xl(h),u.c(),O(u,1),u.m(e,i)):u&&(Se(),H(u,1,1,()=>{u=null}),Le()),(b=h[1])!=null&&b.text?d?d.p(h,y):(d=Zl(h),d.c(),d.m(e,s)):d&&(d.d(1),d=null),(!f||y&2)&&o!==(o=h[7]((M=h[1])==null?void 0:M.received_at)+"")&&ye(a,o),(!f||y&10)&&W(r,"attachment_mode",h[3]&&!((I=h[1])!=null&&I.text)),(!f||y&2)&&W(e,"chat_item_other",(C=h[1])==null?void 0:C.incoming),(!f||y&2)&&W(e,"chat_item_self",!((k=h[1])!=null&&k.incoming)),(!f||y&2)&&W(e,"has_text",(S=h[1])==null?void 0:S.text)},i(h){f||(O(c),O(u),f=!0)},o(h){H(c),H(u),f=!1},d(h){h&&j(e),c&&c.d(),m&&m.d(),u&&u.d(),d&&d.d(),l[14](null)}}}function dr(l,e,t){let{app:n}=e,{bbox:i=null}=e,{message:s=null}=e,{render_Width:r=1}=e,{render_X:o=-r*2}=e,a=null,f=null,c=null,m=null,u=null,d=[],_=[],p=[],h=1;function y(S){var q;d=[],_=[],S&&(q=S.attachments)!=null&&q.length&&(d=S.attachments.filter(x=>x.file_type==="IM").map(x=>({url:x.url})),_=S.attachments.filter(x=>x.file_type==="DC").map(x=>({url:x.url})),p=S.attachments.filter(x=>x.file_type==="VC").map(x=>({url:x.url})));const E=i.height*.7;i.width,t(6,h=E),t(3,c=d==null?void 0:d[0]),t(4,m=c?null:_==null?void 0:_[0]),t(5,u=!c&&!m?p==null?void 0:p[0]:null)}function b(S){if(!S||!Array.isArray(S.attachments)){t(1,f=null);return}if(!f){t(1,f=S);return}if(f.text!==S.text||f.incoming!==S.incoming||f.received_at!==S.received_at||f.attachments.length!==S.attachments.length){t(1,f=S);return}if(!f.attachments.map((E,q)=>[E,S.attachments[q]]).every(([E,q])=>E.file_type===q.file_type&&E.url===q.url)){t(1,f=S);return}}const M=S=>{if(S===null)return"";const E=x=>String(x).padStart(2,"0"),q=new Date;return S=new Date(S),S.getYear()===q.getYear()&&S.getMonth()===q.getMonth()&&S.getDate()===q.getDate()?`${E(S.getHours())}:${E(S.getMinutes())}`:`${E(S.getDate())}.${E(S.getMonth())}.${S.getFullYear()} ${E(S.getHours())}:${E(S.getMinutes())}`},I=()=>Yt(m.url),C=()=>Yt(u.url);function k(S){je[S?"unshift":"push"](()=>{a=S,t(2,a)})}return l.$$set=S=>{"app"in S&&t(0,n=S.app),"bbox"in S&&t(8,i=S.bbox),"message"in S&&t(9,s=S.message),"render_Width"in S&&t(10,r=S.render_Width),"render_X"in S&&t(11,o=S.render_X)},l.$$.update=()=>{l.$$.dirty&512&&b(s),l.$$.dirty&2&&y(f)},[n,f,a,c,m,u,h,M,i,s,r,o,I,C,k]}class _r extends be{constructor(e){super(),we(this,e,dr,ur,_e,{app:0,bbox:8,message:9,render_Width:10,render_X:11})}}function mr(l){let e;return{c(){e=w("div"),e.innerHTML=`<div class="svelte-j15bjw"></div> 
	<div class="svelte-j15bjw"></div> 
	<div class="svelte-j15bjw"></div>`,v(e,"class","lds-roller svelte-j15bjw")},m(t,n){U(t,e,n)},p:de,i:de,o:de,d(t){t&&j(e)}}}class Bn extends be{constructor(e){super(),we(this,e,null,mr,_e,{})}}function Ql(l){let e,t=l[0]===">"?">":"",n;return{c(){e=w("div"),n=oe(t),v(e,"class","flex flex_cx flex_cy statusItemDlm svelte-1h7gd9r")},m(i,s){U(i,e,s),g(e,n)},p(i,s){s&1&&t!==(t=i[0]===">"?">":"")&&ye(n,t)},d(i){i&&j(e)}}}function gr(l){var c,m,u,d;let e,t,n,i,s=((d=(c=l[1])==null?void 0:c.title)!=null?d:(m=l[1])!=null&&m.id?`#${(u=l[1])==null?void 0:u.id}`:"*UNK*")+"",r,o,a,f=l[0]&&Ql(l);return{c(){var _,p,h,y,b;e=w("div"),t=w("div"),f&&f.c(),n=T(),i=w("div"),r=oe(s),v(i,"class","flex flex_cx flex_cy nowrap statusItem svelte-1h7gd9r"),R(i,"background",(p=(_=l[1])==null?void 0:_.bgColor)!=null?p:"#000"),R(i,"color",(y=(h=l[1])==null?void 0:h.color)!=null?y:"#fff"),W(i,"select",l[1].canSelect),v(t,"class","flex"),v(e,"class","flex flex_cy h100 overhide itemWrapper svelte-1h7gd9r"),R(e,"width",l[5]+"px"),W(e,"overhide",l[5]<l[4]&&l[4]>0),W(e,"cursor_ptr",(b=l[1])==null?void 0:b.canSelect)},m(_,p){U(_,e,p),g(e,t),f&&f.m(t,null),g(t,n),g(t,i),g(i,r),l[10](t),l[11](e),o||(a=$(i,"click",l[9]),o=!0)},p(_,[p]){var h,y,b,M,I,C,k,S,E;_[0]?f?f.p(_,p):(f=Ql(_),f.c(),f.m(t,n)):f&&(f.d(1),f=null),p&2&&s!==(s=((M=(h=_[1])==null?void 0:h.title)!=null?M:(y=_[1])!=null&&y.id?`#${(b=_[1])==null?void 0:b.id}`:"*UNK*")+"")&&ye(r,s),p&2&&R(i,"background",(C=(I=_[1])==null?void 0:I.bgColor)!=null?C:"#000"),p&2&&R(i,"color",(S=(k=_[1])==null?void 0:k.color)!=null?S:"#fff"),p&2&&W(i,"select",_[1].canSelect),p&32&&R(e,"width",_[5]+"px"),p&48&&W(e,"overhide",_[5]<_[4]&&_[4]>0),p&2&&W(e,"cursor_ptr",(E=_[1])==null?void 0:E.canSelect)},i:de,o:de,d(_){_&&j(e),f&&f.d(),l[10](null),l[11](null),o=!1,a()}}}function pr(l,e,t){let n,{beforeDlm:i=!1}=e,{hide:s=!1}=e,{status:r={}}=e;const o=el();let a,f,c=0;const m=We(0,{duration:200});ve(l,m,h=>t(5,n=h));const u=()=>{a&&f&&m.set(s?0:c)};pt(()=>{a&&f&&(t(4,c=f.offsetWidth),u())});const d=()=>r.canSelect&&o("click",r);function _(h){je[h?"unshift":"push"](()=>{f=h,t(3,f)})}function p(h){je[h?"unshift":"push"](()=>{a=h,t(2,a)})}return l.$$set=h=>{"beforeDlm"in h&&t(0,i=h.beforeDlm),"hide"in h&&t(8,s=h.hide),"status"in h&&t(1,r=h.status)},l.$$.update=()=>{l.$$.dirty&256&&u()},[i,r,a,f,c,n,o,m,s,d,_,p]}class hr extends be{constructor(e){super(),we(this,e,pr,gr,_e,{beforeDlm:0,hide:8,status:1})}}function $l(l,e,t){const n=l.slice();return n[8]=e[t],n[10]=t,n}function en(l,e){var s;let t,n,i;return n=new hr({props:{beforeDlm:(s=e[8].status)==null?void 0:s.beforeDlm,status:e[8].status,hide:e[8].hide}}),n.$on("click",e[3]),{key:l,first:null,c(){t=Ue(),ue(n.$$.fragment),this.first=t},m(r,o){U(r,t,o),fe(n,r,o),i=!0},p(r,o){var f;e=r;const a={};o&1&&(a.beforeDlm=(f=e[8].status)==null?void 0:f.beforeDlm),o&1&&(a.status=e[8].status),o&1&&(a.hide=e[8].hide),n.$set(a)},i(r){i||(O(n.$$.fragment,r),i=!0)},o(r){H(n.$$.fragment,r),i=!1},d(r){r&&j(t),ce(n,r)}}}function vr(l){let e,t=[],n=new Map,i,s=l[0];const r=o=>o[8].rID;for(let o=0;o<s.length;o+=1){let a=$l(l,s,o),f=r(a);n.set(f,t[o]=en(f,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();v(e,"class","flex h100")},m(o,a){U(o,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);i=!0},p(o,[a]){a&1&&(s=o[0],Se(),t=Xe(t,a,r,1,o,s,n,e,tt,en,null,$l),Le())},i(o){if(!i){for(let a=0;a<s.length;a+=1)O(t[a]);i=!0}},o(o){for(let a=0;a<t.length;a+=1)H(t[a]);i=!1},d(o){o&&j(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function wr(l,e,t){let{statusList:n=[]}=e,{statusSelectList:i=[]}=e,s=[],r=1;xe(lt(1e3,()=>{const f=Date.now();t(0,s=s.filter(c=>!c.hide||c.hide<=f))}));const o=()=>{const f=[...n];let c=-1;const m=r++;for(;f.length;){const u=f.shift(),d=s.findIndex(_=>{var p,h;return((p=_==null?void 0:_.status)==null?void 0:p.id)===(u==null?void 0:u.id)&&((h=_==null?void 0:_.status)==null?void 0:h.beforeDlm)===(u==null?void 0:u.beforeDlm)});if(d>c)c=d,t(0,s[d].seq=m,s),t(0,s[d].status=u,s);else{const _={rID:r++,seq:m,status:u,hide:!1};s.splice(c+1,0,_),c++}}s.filter(u=>u.seq===m).map(u=>u.hide=!1),s.filter(u=>u.seq!==m).map(u=>u.hide=Date.now()+1e3),t(0,s)};function a(f){tl.call(this,l,f)}return l.$$set=f=>{"statusList"in f&&t(1,n=f.statusList),"statusSelectList"in f&&t(2,i=f.statusSelectList)},l.$$.update=()=>{l.$$.dirty&2&&o()},[s,n,i,a]}class br extends be{constructor(e){super(),we(this,e,wr,vr,_e,{statusList:1,statusSelectList:2})}}function tn(l){var d;let e,t,n,i,s,r,o,a,f,c,m;o=new br({props:{statusList:l[7]((d=l[0])==null?void 0:d.lead,l[2])}}),o.$on("click",l[12]);let u=l[1]&&ln();return{c(){e=w("div"),t=w("div"),n=T(),i=w("img"),r=T(),ue(o.$$.fragment),a=T(),u&&u.c(),v(t,"class","pos_abs w100 h100 overhide bg svelte-socr2e"),Ne(i.src,s="assets/icons/status1.png")||v(i,"src",s),v(i,"draggable","false"),v(i,"class","pos_abs statusIcon svelte-socr2e"),v(e,"class","flex flex_cx flex_cy unselect statusCnt pos_rel svelte-socr2e"),W(e,"loading",l[1])},m(_,p){U(_,e,p),g(e,t),g(e,n),g(e,i),g(e,r),fe(o,e,null),g(e,a),u&&u.m(e,null),l[13](e),f=!0,c||(m=[$(e,"mouseenter",l[14]),$(e,"mouseleave",l[15]),$(e,"click",l[16])],c=!0)},p(_,p){var y;const h={};p&5&&(h.statusList=_[7]((y=_[0])==null?void 0:y.lead,_[2])),o.$set(h),_[1]?u?p&2&&O(u,1):(u=ln(),u.c(),O(u,1),u.m(e,null)):u&&(Se(),H(u,1,1,()=>{u=null}),Le()),(!f||p&2)&&W(e,"loading",_[1])},i(_){f||(O(o.$$.fragment,_),O(u),f=!0)},o(_){H(o.$$.fragment,_),H(u),f=!1},d(_){_&&j(e),ce(o),u&&u.d(),l[13](null),c=!1,Re(m)}}}function ln(l){let e,t,n,i;return t=new nl({props:{height:"6"}}),{c(){e=w("div"),ue(t.$$.fragment),v(e,"class","flex pos_abs flex_cy h100 loadingInd svelte-socr2e"),R(e,"filter","invert(0)")},m(s,r){U(s,e,r),fe(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&He(()=>{n||(n=Oe(e,Ee,{},!0)),n.run(1)}),i=!0)},o(s){H(t.$$.fragment,s),s&&(n||(n=Oe(e,Ee,{},!1)),n.run(0)),i=!1},d(s){s&&j(e),ce(t),s&&n&&n.end()}}}function yr(l){let e,t,n,i,s=l[0]&&l[0].lead&&tn(l);return{c(){s&&s.c(),e=Ue()},m(r,o){s&&s.m(r,o),U(r,e,o),t=!0,n||(i=[$(window,"mousedown",l[5]),$(window,"blur",l[5])],n=!0)},p(r,[o]){r[0]&&r[0].lead?s?(s.p(r,o),o&1&&O(s,1)):(s=tn(r),s.c(),O(s,1),s.m(e.parentNode,e)):s&&(Se(),H(s,1,1,()=>{s=null}),Le())},i(r){t||(O(s),t=!0)},o(r){H(s),t=!1},d(r){s&&s.d(r),r&&j(e),n=!1,Re(i)}}}function kr(l,e,t){let n,i,s,{app:r}=e;const{dialogMap_r:o,dialogMap_SetDialog:a}=r;ve(l,o,N=>t(11,s=N));let{dialog_id:f}=e,c=!1,m=!1,u=!1,d;const _=()=>!(!n||!(n!=null&&n.lead)||c||u);let p;const h=N=>{if(N!=null&&N.target){let Y=N.target;for(;Y;){if(Y===p)return;Y=Y.parentNode}}u||t(2,m=!1)},y=()=>{d&&d(),t(2,m=!1),u=!1},b=(N,Y)=>async B=>{var G,V;if(!_())return;u=!0;const A=Y.id;if(Y.protectionModal){const P=(V=(G=r.moduleMgr)==null?void 0:G.modal)==null?void 0:V.createModal("cancel/continue",{...Y.protectionModal,position:{target:p,stick:"bottom"}});if(P&&(d=P.abort,!await P.result))return y()}if(t(1,c=!0),N){const P=await r.api.lead_SetStatus(N.lead.tg_id,A);P&&N&&N.lead&&N.lead.tg_id===P.tg_id&&(N.lead=P,a(N))}t(1,c=!1),y()},M=N=>{var Y,B,A,G;try{const V=r.lead_GetStatusID(N);return(r.lead_GetStatusByID(V)?(B=(Y=r==null?void 0:r.appConfig)==null?void 0:Y.lead_StatusJumpMap)==null?void 0:B[V]:(G=(A=r==null?void 0:r.appConfig)==null?void 0:A.lead_StatusNextListForUnkStatus)!=null?G:[]).map(r==null?void 0:r.lead_GetStatusByID).filter(Boolean)}catch{}return[]},I=N=>r.lead_GetStatusHistory(N).map((Y,B)=>({...Y,beforeDlm:B!==0})),C=(N,Y=!1)=>{const B=I(N).map((G,V)=>({...G,beforeDlm:V!==0?">":!1})),A=Y?M(N).map((G,V)=>({...G,beforeDlm:V===0?">":!0,canSelect:!0})):[];return[...B,...A]};xe(y);const k=N=>b(n,N.detail)();function S(N){je[N?"unshift":"push"](()=>{p=N,t(3,p)})}const E=()=>t(2,m=!0),q=()=>h(),x=()=>t(2,m=!0);return l.$$set=N=>{"app"in N&&t(8,r=N.app),"dialog_id"in N&&t(9,f=N.dialog_id)},l.$$.update=()=>{var N;l.$$.dirty&2560&&t(0,n=s[f]),l.$$.dirty&1&&t(10,i=(N=n==null?void 0:n.lead)==null?void 0:N.status),l.$$.dirty&1&&C(n==null?void 0:n.lead),l.$$.dirty&1536&&y()},[n,c,m,p,o,h,b,C,r,f,i,s,k,S,E,q,x]}class Sr extends be{constructor(e){super(),we(this,e,kr,yr,_e,{app:8,dialog_id:9})}}function nn(l){let e,t,n;return t=new vt({props:{size:l[0]-4,color:"#fff"}}),{c(){e=w("div"),ue(t.$$.fragment),v(e,"class","flex flex_cy flex_cx pos_abs wh100 audioControl_Item svelte-ty5gfm"),W(e,"lhide",l[1]!=="loading")},m(i,s){U(i,e,s),fe(t,e,null),n=!0},p(i,s){const r={};s&1&&(r.size=i[0]-4),t.$set(r),(!n||s&2)&&W(e,"lhide",i[1]!=="loading")},i(i){n||(O(t.$$.fragment,i),n=!0)},o(i){H(t.$$.fragment,i),n=!1},d(i){i&&j(e),ce(t)}}}function Lr(l){let e,t,n,i,s,r,o,a,f,c,m=l[1]==="loading"&&nn(l);return{c(){e=w("div"),m&&m.c(),t=T(),n=w("img"),s=T(),r=w("img"),v(n,"class","pos_abs overhide wh100 audioControl_Item svelte-ty5gfm"),Ne(n.src,i="assets/icons/play.png")||v(n,"src",i),v(n,"draggable","false"),R(n,"filter","invert(1)"),W(n,"lhide",l[1]==="play"),W(n,"rhide",l[1]==="loading"),v(r,"class","pos_abs overhide wh100 audioControl_Item svelte-ty5gfm"),Ne(r.src,o="assets/icons/pause.png")||v(r,"src",o),v(r,"draggable","false"),R(r,"filter","invert(1)"),W(r,"rhide",l[1]!=="play"),v(e,"class","flex cursor_ptr unselect pos_rel flex_cx flex_cy overhide audioControl svelte-ty5gfm"),R(e,"--size",l[0]+"px")},m(u,d){U(u,e,d),m&&m.m(e,null),g(e,t),g(e,n),g(e,s),g(e,r),a=!0,f||(c=$(e,"click",l[2]),f=!0)},p(u,[d]){u[1]==="loading"?m?(m.p(u,d),d&2&&O(m,1)):(m=nn(u),m.c(),O(m,1),m.m(e,t)):m&&(Se(),H(m,1,1,()=>{m=null}),Le()),(!a||d&2)&&W(n,"lhide",u[1]==="play"),(!a||d&2)&&W(n,"rhide",u[1]==="loading"),(!a||d&2)&&W(r,"rhide",u[1]!=="play"),(!a||d&1)&&R(e,"--size",u[0]+"px")},i(u){a||(O(m),a=!0)},o(u){H(m),a=!1},d(u){u&&j(e),m&&m.d(),f=!1,c()}}}function Mr(l,e,t){let{size:n=24}=e,{state:i="loading"}=e;function s(r){tl.call(this,l,r)}return l.$$set=r=>{"size"in r&&t(0,n=r.size),"state"in r&&t(1,i=r.state)},[n,i,s]}class xn extends be{constructor(e){super(),we(this,e,Mr,Lr,_e,{size:0,state:1})}}function Cr(l){let e,t,n,i,s,r,o,a,f,c,m,u=Math.round(De(0,l[0],1)*100)+"",d,_,p,h,y,b,M,I,C;return{c(){e=w("div"),t=w("div"),n=w("div"),i=w("div"),s=T(),r=w("div"),o=T(),a=w("div"),f=T(),c=w("div"),m=w("div"),d=oe(u),_=oe("%"),p=T(),h=w("div"),y=T(),b=w("img"),v(i,"class","flex flex_grow_1 track_line svelte-16ax252"),v(r,"class","flex pos_abs track_thumb svelte-16ax252"),R(r,"left",De(0,l[0],1)*100+"%"),v(n,"class","flex flex_grow_1 pos_rel h100 flex_cy track"),R(a,"width","8px"),v(t,"class","flex h100 overhide"),R(t,"width",l[4]+"px"),v(m,"class","flex label svelte-16ax252"),R(h,"width","4px"),v(b,"class","overhide wh100 icon svelte-16ax252"),Ne(b.src,M=l[3])||v(b,"src",M),v(b,"draggable","false"),R(b,"filter","invert(1)"),v(c,"class","flex flex_cx flex_cy"),v(e,"class","flex cursor_ptr unselect pos_rel flex_cx flex_cy overhide cnt svelte-16ax252"),R(e,"--size",l[1]+"px")},m(k,S){U(k,e,S),g(e,t),g(t,n),g(n,i),g(n,s),g(n,r),l[12](n),g(t,o),g(t,a),g(e,f),g(e,c),g(c,m),g(m,d),g(m,_),g(c,p),g(c,h),g(c,y),g(c,b),I||(C=[$(window,"mousemove",l[9]),$(window,"mouseup",l[10]),$(window,"blur",l[10]),$(n,"click",l[7]),$(n,"mousedown",l[8]),$(c,"click",l[6]),$(e,"wheel",l[11])],I=!0)},p(k,[S]){S&1&&R(r,"left",De(0,k[0],1)*100+"%"),S&16&&R(t,"width",k[4]+"px"),S&1&&u!==(u=Math.round(De(0,k[0],1)*100)+"")&&ye(d,u),S&8&&!Ne(b.src,M=k[3])&&v(b,"src",M),S&2&&R(e,"--size",k[1]+"px")},i:de,o:de,d(k){k&&j(e),l[12](null),I=!1,Re(C)}}}function Ir(l,e,t){let n,i,{size:s=24}=e,{volume:r=1}=e;const o=We(0);ve(l,o,k=>t(4,i=k));const a=k=>t(0,r=De(0,k,1));let f=null;const c=Ut(3e3,()=>{f||(m=!1,o.set(0))});let m=!1;const u=k=>{if(!m){m=!0,o.set(100),c();return}t(0,r=-r),c()};let d=null;const _=k=>{if(!d||!m)return;const S=d.getBoundingClientRect();a((k.clientX-S.x)/(S.width-4)),c()},p=_,h=k=>{!d||(f=!0)},y=k=>{!d||!f||_(k)},b=k=>{f&&(f=null,c())},M=k=>{!d||(b(),a(r+Math.sign(k.deltaY)*-.1),c())},I=["assets/icons/volume0.png","assets/icons/volume1.png","assets/icons/volume2.png","assets/icons/volume3.png"];function C(k){je[k?"unshift":"push"](()=>{d=k,t(2,d)})}return l.$$set=k=>{"size"in k&&t(1,s=k.size),"volume"in k&&t(0,r=k.volume)},l.$$.update=()=>{l.$$.dirty&1&&t(3,n=I[Math.round(De(0,r,1)*(I.length-1))])},[r,s,d,n,i,o,u,p,h,y,b,M,C]}class Tr extends be{constructor(e){super(),we(this,e,Ir,Cr,_e,{size:1,volume:0})}}function sn(l){let e,t=l[23](l[4])+"",n,i,s=l[23](l[2])+"",r;return{c(){e=w("div"),n=oe(t),i=oe(" / "),r=oe(s),v(e,"class","flex audioControl_Time svelte-1if1xsl")},m(o,a){U(o,e,a),g(e,n),g(e,i),g(e,r)},p(o,a){a[0]&16&&t!==(t=o[23](o[4])+"")&&ye(n,t),a[0]&4&&s!==(s=o[23](o[2])+"")&&ye(r,s)},d(o){o&&j(e)}}}function rn(l){let e,t,n,i;return{c(){e=w("div"),t=w("div"),v(t,"class","flex audioProgressThumb svelte-1if1xsl"),R(t,"width",l[3]*100+"%"),W(t,"activeMouse",l[1]),v(e,"class","flex w100 cursor_ptr pos_abs audioProgress svelte-1if1xsl")},m(s,r){U(s,e,r),g(e,t),l[28](e),n||(i=[$(e,"click",l[18]),$(e,"mousedown",l[19])],n=!0)},p(s,r){r[0]&8&&R(t,"width",s[3]*100+"%"),r[0]&2&&W(t,"activeMouse",s[1])},d(s){s&&j(e),l[28](null),n=!1,Re(i)}}}function Dr(l){let e,t,n,i,s,r,o,a,f,c,m,u,d,_,p,h,y,b,M=l[22](l[4])&&l[22](l[2]),I,C,k,S,E,q,x,N,Y,B,A=l[22](l[3]),G,V,P;r=new xn({props:{state:l[5]}}),r.$on("click",l[16]);let L=M&&sn(l);function z(se){l[27](se)}let J={size:"24"};l[8]!==void 0&&(J.volume=l[8]),S=new Tr({props:J}),je.push(()=>ot(S,"volume",z));let me=A&&rn(l);return{c(){e=w("div"),t=w("div"),n=w("div"),i=T(),s=w("div"),ue(r.$$.fragment),o=T(),a=w("div"),f=T(),c=w("div"),m=w("div"),u=oe(l[7]),d=T(),_=w("div"),p=T(),h=w("div"),y=T(),b=w("div"),L&&L.c(),I=T(),C=w("div"),k=T(),ue(S.$$.fragment),q=T(),x=w("div"),x.innerHTML='<img class="overhide wh100 btnIconImg svelte-1if1xsl" src="assets/icons/close.png" draggable="false" style="filter: invert(1);"/>',N=T(),Y=w("div"),B=T(),me&&me.c(),R(n,"height","4px"),R(a,"min-width","8px"),v(m,"class","nowrap textOverEllipsis"),v(c,"class","flex nowrap textOverEllipsis audioControl_Name svelte-1if1xsl"),R(_,"min-width","8px"),v(h,"class","flex flex_grow_1"),R(C,"min-width","8px"),v(x,"class","flex btnIcon cursor_ptr unselect pos_rel flex_cx flex_cy overhide svelte-1if1xsl"),v(b,"class","flex flex_cy nowrap"),v(s,"class","flex flex_cy w100"),R(Y,"height","4px"),v(t,"class","flex flex_clm pos_abs wh100 cnt svelte-1if1xsl"),R(t,"top",l[6]+"px"),v(e,"class","flex wh100 pos_abs"),W(e,"overhide",l[6]!==0)},m(se,le){U(se,e,le),g(e,t),g(t,n),g(t,i),g(t,s),fe(r,s,null),g(s,o),g(s,a),g(s,f),g(s,c),g(c,m),g(m,u),g(s,d),g(s,_),g(s,p),g(s,h),g(s,y),g(s,b),L&&L.m(b,null),g(b,I),g(b,C),g(b,k),fe(S,b,null),g(b,q),g(b,x),g(t,N),g(t,Y),g(t,B),me&&me.m(t,null),G=!0,V||(P=[$(window,"mousemove",l[20]),$(window,"mouseup",l[21]),$(window,"blur",l[21]),$(x,"click",l[17])],V=!0)},p(se,le){const K={};le[0]&32&&(K.state=se[5]),r.$set(K),(!G||le[0]&128)&&ye(u,se[7]),le[0]&20&&(M=se[22](se[4])&&se[22](se[2])),M?L?L.p(se,le):(L=sn(se),L.c(),L.m(b,I)):L&&(L.d(1),L=null);const Z={};!E&&le[0]&256&&(E=!0,Z.volume=se[8],rt(()=>E=!1)),S.$set(Z),le[0]&8&&(A=se[22](se[3])),A?me?me.p(se,le):(me=rn(se),me.c(),me.m(t,null)):me&&(me.d(1),me=null),(!G||le[0]&64)&&R(t,"top",se[6]+"px"),(!G||le[0]&64)&&W(e,"overhide",se[6]!==0)},i(se){G||(O(r.$$.fragment,se),O(S.$$.fragment,se),G=!0)},o(se){H(r.$$.fragment,se),H(S.$$.fragment,se),G=!1},d(se){se&&j(e),ce(r),L&&L.d(),ce(S),me&&me.d(),V=!1,Re(P)}}}function Or(l,e,t){let n,i,s,r,o,a,f,{app:c}=e,{audio:m}=e,{destroy:u=!1}=e;const d=We(-50);ve(l,d,L=>t(6,o=L)),pt(()=>d.set(0));const{duration_r:_,currentTime_r:p,currentTimeRate_r:h,state_r:y,name_r:b}=m.info_r;ve(l,_,L=>t(2,n=L)),ve(l,p,L=>t(4,s=L)),ve(l,h,L=>t(3,i=L)),ve(l,y,L=>t(5,r=L)),ve(l,b,L=>t(7,a=L));const{volume_wr:M}=c.audioMgr;ve(l,M,L=>t(8,f=L));const I=L=>{u||(r==="pause"&&m.play(),r==="play"&&m.pause())},C=L=>{c.audioMgr.audioActive_Set(null)};let k=null,S=null;const E=()=>!u&&A(n)&&A(s)&&A(i)&&k?!0:(t(1,S=null),!1),q=L=>{if(!E())return 0;const z=k.getBoundingClientRect();return De(0,(L.clientX-z.x)/z.width,1)*n},x=L=>{!E()||m.setCurrentTime(q(L))},N=L=>{!E()||(t(1,S=[L.clientX]),m.setCurrentTime(q(L)),m.play())},Y=L=>{!S||!E()||L.clientX!==S[0]&&(t(1,S=[L.clientX]),m.setCurrentTime(q(L)),m.play())},B=L=>{t(1,S=null)},A=L=>!(L==null||isNaN(L)),G=L=>{if(!A(L))return"";const z=L/60,J=L%60;return`${String(Math.floor(z)).padStart(2,"0")}:${String(Math.floor(J)).padStart(2,"0")}`};function V(L){f=L,M.set(f)}function P(L){je[L?"unshift":"push"](()=>{k=L,t(0,k)})}return l.$$set=L=>{"app"in L&&t(24,c=L.app),"audio"in L&&t(25,m=L.audio),"destroy"in L&&t(26,u=L.destroy)},l.$$.update=()=>{l.$$.dirty[0]&67108864&&u&&d.set(50)},[k,S,n,i,s,r,o,a,f,d,_,p,h,y,b,M,I,C,x,N,Y,B,A,G,c,m,u,V,P]}class Ar extends be{constructor(e){super(),we(this,e,Or,Dr,_e,{app:24,audio:25,destroy:26},null,[-1,-1])}}function on(l,e,t){const n=l.slice();return n[11]=e[t],n}function an(l,e){let t,n,i;return n=new Ar({props:{app:e[0],audio:e[11].audio,destroy:e[11]._destroy}}),{key:l,first:null,c(){t=Ue(),ue(n.$$.fragment),this.first=t},m(s,r){U(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&1&&(o.app=e[0]),r&2&&(o.audio=e[11].audio),r&2&&(o.destroy=e[11]._destroy),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&j(t),ce(n,s)}}}function Fr(l){let e,t,n=[],i=new Map,s,r,o,a=l[1];const f=c=>c[11].id;for(let c=0;c<a.length;c+=1){let m=on(l,a,c),u=f(m);i.set(u,n[c]=an(u,m))}return{c(){e=w("div"),t=w("div");for(let c=0;c<n.length;c+=1)n[c].c();v(t,"class","flex flex_clm pos_abs"),v(e,"class","flex flex_grow_1 pos_rel nowrap unselect cnt_wrapper svelte-91fe42"),R(e,"height",l[3]+"px"),W(e,"overhide",!l[2])},m(c,m){U(c,e,m),g(e,t);for(let u=0;u<n.length;u+=1)n[u].m(t,null);s=!0,r||(o=ft(ht.call(null,t)),r=!0)},p(c,[m]){m&3&&(a=c[1],Se(),n=Xe(n,m,f,1,c,a,i,t,tt,an,null,on),Le()),(!s||m&8)&&R(e,"height",c[3]+"px"),(!s||m&4)&&W(e,"overhide",!c[2])},i(c){if(!s){for(let m=0;m<a.length;m+=1)O(n[m]);s=!0}},o(c){for(let m=0;m<n.length;m+=1)H(n[m]);s=!1},d(c){c&&j(e);for(let m=0;m<n.length;m+=1)n[m].d();r=!1,o()}}}const Er=36;function zr(l,e,t){let n,i,{app:s}=e;const r=We(0);ve(l,r,_=>t(3,i=_));const{audioActive_r:o,audioActive_Set:a}=s.audioMgr;ve(l,o,_=>t(6,n=_));let f=[],c=null,m=1;const u=()=>{setTimeout(()=>{const _=Date.now(),p=f.filter(h=>!h._destroy||h._destroy+1e3>_);f.length!==p.length&&t(1,f=p)},1e3)},d=()=>{!c&&!n||(c==null?void 0:c.audio)!==n&&(c&&(t(2,c._destroy=Date.now(),c),n||t(2,c=null),u()),n&&(t(2,c={id:m++,audio:n,_destroy:!1}),f.push(c)),t(1,f),r.set(c?Er:0))};return l.$$set=_=>{"app"in _&&t(0,s=_.app)},l.$$.update=()=>{l.$$.dirty&64&&d()},[s,f,c,i,r,o,n]}class Rr extends be{constructor(e){super(),we(this,e,zr,Fr,_e,{app:0})}}function fn(l){var q,x,N,Y,B,A,G,V,P,L;let e,t,n,i,s=((N=(x=(q=l[2])==null?void 0:q.lead)==null?void 0:x.first_name)!=null?N:"")+"",r,o,a,f,c,m=((A=(B=(Y=l[2])==null?void 0:Y.lead)==null?void 0:B.last_name)!=null?A:"")+"",u,d,_,p,h,y,b,M,I,C,k,S=((V=(G=l[2])==null?void 0:G.lead)==null?void 0:V.username)&&cn(l),E=((L=(P=l[2])==null?void 0:P.lead)==null?void 0:L.ref_link)&&un(l);return M=new Sr({props:{app:l[0],dialog_id:l[2].id}}),{c(){e=w("div"),t=w("div"),n=T(),i=w("div"),r=oe(s),o=T(),a=w("div"),f=T(),c=w("div"),u=oe(m),d=oe("\xA0"),_=T(),p=w("div"),S&&S.c(),h=T(),E&&E.c(),y=T(),b=w("div"),ue(M.$$.fragment),I=T(),C=w("div"),R(t,"width","8px"),R(a,"width","8px"),v(e,"class","flex nowrap textOverEllipsis userFirstLastName pos_rel svelte-qywc37"),v(p,"class","nowrap textOverEllipsis username svelte-qywc37"),v(b,"class","flex"),R(C,"height","4px")},m(z,J){U(z,e,J),g(e,t),g(e,n),g(e,i),g(i,r),g(e,o),g(e,a),g(e,f),g(e,c),g(c,u),g(c,d),U(z,_,J),U(z,p,J),S&&S.m(p,null),U(z,h,J),E&&E.m(z,J),U(z,y,J),U(z,b,J),fe(M,b,null),U(z,I,J),U(z,C,J),k=!0},p(z,J){var se,le,K,Z,ae,pe,Ae,Pe,ee,Ie;(!k||J&4)&&s!==(s=((K=(le=(se=z[2])==null?void 0:se.lead)==null?void 0:le.first_name)!=null?K:"")+"")&&ye(r,s),(!k||J&4)&&m!==(m=((pe=(ae=(Z=z[2])==null?void 0:Z.lead)==null?void 0:ae.last_name)!=null?pe:"")+"")&&ye(u,m),(Pe=(Ae=z[2])==null?void 0:Ae.lead)!=null&&Pe.username?S?S.p(z,J):(S=cn(z),S.c(),S.m(p,null)):S&&(S.d(1),S=null),(Ie=(ee=z[2])==null?void 0:ee.lead)!=null&&Ie.ref_link?E?E.p(z,J):(E=un(z),E.c(),E.m(y.parentNode,y)):E&&(E.d(1),E=null);const me={};J&1&&(me.app=z[0]),J&4&&(me.dialog_id=z[2].id),M.$set(me)},i(z){k||(O(M.$$.fragment,z),k=!0)},o(z){H(M.$$.fragment,z),k=!1},d(z){z&&j(e),z&&j(_),z&&j(p),S&&S.d(),z&&j(h),E&&E.d(z),z&&j(y),z&&j(b),ce(M),z&&j(I),z&&j(C)}}}function cn(l){let e,t=l[2].lead.username+"",n;return{c(){e=oe("@"),n=oe(t)},m(i,s){U(i,e,s),U(i,n,s)},p(i,s){s&4&&t!==(t=i[2].lead.username+"")&&ye(n,t)},d(i){i&&j(e),i&&j(n)}}}function un(l){var m,u;let e,t,n,i,s=((u=(m=l[2])==null?void 0:m.lead)==null?void 0:u.ref_link)+"",r,o,a,f,c;return{c(){e=w("div"),t=w("div"),t.innerHTML=`Ref link
						<img src="assets/icons/copy-clipboard.png" class="refLinkIcon svelte-qywc37" style="width: 14px; height: 14px; filter: invert(1);"/>`,n=T(),i=w("div"),r=oe(s),o=T(),a=w("div"),v(t,"class","flex flex_cy h100 refLinkLabel svelte-qywc37"),v(i,"class","flex flex_cy h100 overhide textOverEllipsis nowrap refLinkContent svelte-qywc37"),v(e,"class","flex flex_cy nowrap refLink overhide textOverEllipsis cursor_ptr unselect svelte-qywc37"),R(a,"height","4px")},m(d,_){U(d,e,_),g(e,t),g(e,n),g(e,i),g(i,r),U(d,o,_),U(d,a,_),f||(c=$(e,"click",l[6]),f=!0)},p(d,_){var p,h;_&4&&s!==(s=((h=(p=d[2])==null?void 0:p.lead)==null?void 0:h.ref_link)+"")&&ye(r,s)},d(d){d&&j(e),d&&j(o),d&&j(a),f=!1,c()}}}function dn(l){let e,t,n,i;return t=new Bn({}),{c(){e=w("div"),ue(t.$$.fragment),v(e,"class","pos_abs loading svelte-qywc37")},m(s,r){U(s,e,r),fe(t,e,null),i=!0},i(s){i||(O(t.$$.fragment,s),s&&He(()=>{n||(n=Oe(e,Ee,{},!0)),n.run(1)}),i=!0)},o(s){H(t.$$.fragment,s),s&&(n||(n=Oe(e,Ee,{},!1)),n.run(0)),i=!1},d(s){s&&j(e),ce(t),s&&n&&n.end()}}}function jr(l){let e,t,n,i,s,r,o=l[2]&&fn(l);i=new Rr({props:{app:l[0]}});let a=l[1]&&dn();return{c(){e=w("div"),t=w("div"),o&&o.c(),n=T(),ue(i.$$.fragment),s=T(),a&&a.c(),v(t,"class","flex flex_clm flex_cx flex_grow_1"),v(e,"class","flex flex_cy header pos_rel svelte-qywc37")},m(f,c){U(f,e,c),g(e,t),o&&o.m(t,null),g(t,n),fe(i,t,null),g(e,s),a&&a.m(e,null),r=!0},p(f,[c]){f[2]?o?(o.p(f,c),c&4&&O(o,1)):(o=fn(f),o.c(),O(o,1),o.m(t,n)):o&&(Se(),H(o,1,1,()=>{o=null}),Le());const m={};c&1&&(m.app=f[0]),i.$set(m),f[1]?a?c&2&&O(a,1):(a=dn(),a.c(),O(a,1),a.m(e,null)):a&&(Se(),H(a,1,1,()=>{a=null}),Le())},i(f){r||(O(o),O(i.$$.fragment,f),O(a),r=!0)},o(f){H(o),H(i.$$.fragment,f),H(a),r=!1},d(f){f&&j(e),o&&o.d(),ce(i),a&&a.d()}}}function Ur(l,e,t){let n,i,{app:s}=e;const{dialogMap_r:r}=s;ve(l,r,c=>t(5,i=c));let{dialog_id:o=null}=e,{loading:a=!1}=e;const f=()=>{var c;return ps((c=n==null?void 0:n.lead)==null?void 0:c.ref_link)};return l.$$set=c=>{"app"in c&&t(0,s=c.app),"dialog_id"in c&&t(4,o=c.dialog_id),"loading"in c&&t(1,a=c.loading)},l.$$.update=()=>{l.$$.dirty&48&&t(2,n=i[o])},[s,a,n,r,o,i,f]}class Nr extends be{constructor(e){super(),we(this,e,Ur,jr,_e,{app:0,dialog_id:4,loading:1})}}function Hr(l){let e,t;return{c(){e=w("img"),v(e,"class","fileImg overhide svelte-n30zkz"),Ne(e.src,t="assets/icons/folder.png")||v(e,"src",t),v(e,"draggable","false")},m(n,i){U(n,e,i)},p:de,i:de,o:de,d(n){n&&j(e)}}}function Pr(l){let e,t,n,i;return n=new xn({props:{size:"40",state:l[11]}}),n.$on("click",l[18]),{c(){e=w("div"),t=T(),ue(n.$$.fragment),R(e,"width","4px")},m(s,r){U(s,e,r),U(s,t,r),fe(n,s,r),i=!0},p(s,r){const o={};r&2048&&(o.state=s[11]),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&j(e),s&&j(t),ce(n,s)}}}function qr(l){let e,t;return{c(){e=w("img"),v(e,"class","fileImg overhide svelte-n30zkz"),Ne(e.src,t=l[2])||v(e,"src",t),v(e,"draggable","false")},m(n,i){U(n,e,i)},p(n,i){i&4&&!Ne(e.src,t=n[2])&&v(e,"src",t)},i:de,o:de,d(n){n&&j(e)}}}function _n(l){let e,t,n;return{c(){e=w("div"),e.innerHTML='<img class="w100 h100 svelte-n30zkz" draggable="false" src="assets/icons/fullscreen.png"/>',v(e,"class","flex cursor_ptr imgCtrlBtn svelte-n30zkz")},m(i,s){U(i,e,s),t||(n=$(e,"click",l[14]),t=!0)},p:de,d(i){i&&j(e),t=!1,n()}}}function Br(l){let e,t,n,i,s,r,o,a,f,c,m,u,d,_,p=l[16](l[4])+"",h,y,b,M,I,C,k,S,E,q,x,N,Y;const B=[qr,Pr,Hr],A=[];function G(P,L){return P[1]==="IM"?0:P[1]==="VC"?1:2}s=G(l),r=A[s]=B[s](l);let V=l[1]==="IM"&&_n(l);return q=new vt({props:{size:"32",color:"#fff"}}),{c(){e=w("div"),t=w("div"),n=w("div"),i=w("div"),r.c(),o=T(),a=w("div"),f=T(),c=w("div"),m=w("div"),u=oe(l[3]),d=T(),_=w("div"),h=oe(p),y=T(),b=w("div"),V&&V.c(),M=T(),I=w("div"),I.innerHTML='<img class="w100 h100 svelte-n30zkz" draggable="false" src="assets/icons/close.png"/>',C=T(),k=w("div"),k.innerHTML='<img class="w100 h100 svelte-n30zkz" draggable="false" src="assets/icons/send.png"/>',S=T(),E=w("div"),ue(q.$$.fragment),v(i,"class","flex flex_cy"),R(a,"width","4px"),v(m,"class","flex nowrap textOverEllipsis fileNameLabel svelte-n30zkz"),v(_,"class","flex fileSizeLabel svelte-n30zkz"),v(c,"class","flex flex_clm"),v(I,"class","flex cursor_ptr imgCtrlBtn svelte-n30zkz"),v(k,"class","flex cursor_ptr imgCtrlBtn svelte-n30zkz"),W(k,"disabled",l[0]===null||l[0]===void 0),v(b,"class","flex pos_abs imgCtrlBtnGroup svelte-n30zkz"),W(b,"hide",l[7]||l[6]||l[5]),v(E,"class","flex flex_cy pos_abs loading svelte-n30zkz"),W(E,"hide",!l[7]),v(n,"class","flex itemc svelte-n30zkz"),v(t,"class","flex overhide pos_rel flex_grow_1 item svelte-n30zkz"),W(t,"doneAni",l[9]),W(t,"failAni",l[8]),W(t,"destroy",l[6]),v(e,"class","flex overhide pos_rel unselect cnt svelte-n30zkz"),R(e,"height",l[10]+"px")},m(P,L){U(P,e,L),g(e,t),g(t,n),g(n,i),A[s].m(i,null),g(n,o),g(n,a),g(n,f),g(n,c),g(c,m),g(m,u),g(c,d),g(c,_),g(_,h),g(n,y),g(n,b),V&&V.m(b,null),g(b,M),g(b,I),g(b,C),g(b,k),g(n,S),g(n,E),fe(q,E,null),x=!0,N||(Y=[$(I,"click",l[13]),$(k,"click",l[15])],N=!0)},p(P,[L]){let z=s;s=G(P),s===z?A[s].p(P,L):(Se(),H(A[z],1,1,()=>{A[z]=null}),Le(),r=A[s],r?r.p(P,L):(r=A[s]=B[s](P),r.c()),O(r,1),r.m(i,null)),(!x||L&8)&&ye(u,P[3]),(!x||L&16)&&p!==(p=P[16](P[4])+"")&&ye(h,p),P[1]==="IM"?V?V.p(P,L):(V=_n(P),V.c(),V.m(b,M)):V&&(V.d(1),V=null),(!x||L&1)&&W(k,"disabled",P[0]===null||P[0]===void 0),(!x||L&224)&&W(b,"hide",P[7]||P[6]||P[5]),(!x||L&128)&&W(E,"hide",!P[7]),(!x||L&512)&&W(t,"doneAni",P[9]),(!x||L&256)&&W(t,"failAni",P[8]),(!x||L&64)&&W(t,"destroy",P[6]),(!x||L&1024)&&R(e,"height",P[10]+"px")},i(P){x||(O(r),O(q.$$.fragment,P),x=!0)},o(P){H(r),H(q.$$.fragment,P),x=!1},d(P){P&&j(e),A[s].d(),V&&V.d(),ce(q),N=!1,Re(Y)}}}function xr(l,e,t){let n,i;const s=el();let{app:r}=e,{dialog_id:o}=e,{file_type:a=""}=e,{fileImgUrl:f=""}=e,{name:c=""}=e,{size:m=0}=e,{close:u=!1}=e,{destroy:d=!1}=e,{loading:_=!1}=e,{failSeq:p=0}=e,{doneSeq:h=0}=e;const y=We(0);ve(l,y,A=>t(10,n=A));const b=A=>!u&&!d&&!_&&s("cancel"),M=A=>!u&&!d&&!_&&r.events.emit("openOverlayImageView",f),I=A=>!u&&!d&&!_&&s("send"),C=A=>{const G=["b","kb","mb","gb"];let V=0;for(;V<G.length-1&&!(A<1024);)A/=1024,V++;return A.toFixed(2)+G[V]};let k=!1;const S=A=>{if(!A)return;t(8,k=!0);const G=A;setTimeout(()=>G===A&&t(8,k=!1),1e3)};let E=!1;const q=A=>{if(!A)return;t(9,E=!0);const G=A;setTimeout(()=>G===A&&t(9,E=!1),1e3)},x=A=>{!A||Ze(y,n=0,n)},N=r.audioMgr.getControlAudio({url:f,cache:!0,name:c}),{state_r:Y}=N.info_r;ve(l,Y,A=>t(11,i=A));const B=()=>{!N||(i==="pause"&&N.play(),i==="play"&&N.pause())};return pt(()=>Ze(y,n=48+4,n)),l.$$set=A=>{"app"in A&&t(19,r=A.app),"dialog_id"in A&&t(0,o=A.dialog_id),"file_type"in A&&t(1,a=A.file_type),"fileImgUrl"in A&&t(2,f=A.fileImgUrl),"name"in A&&t(3,c=A.name),"size"in A&&t(4,m=A.size),"close"in A&&t(5,u=A.close),"destroy"in A&&t(6,d=A.destroy),"loading"in A&&t(7,_=A.loading),"failSeq"in A&&t(20,p=A.failSeq),"doneSeq"in A&&t(21,h=A.doneSeq)},l.$$.update=()=>{l.$$.dirty&1048576&&S(p),l.$$.dirty&2097152&&q(h),l.$$.dirty&32&&x(u)},[o,a,f,c,m,u,d,_,k,E,n,i,y,b,M,I,C,Y,B,r,p,h]}class Gr extends be{constructor(e){super(),we(this,e,xr,Br,_e,{app:19,dialog_id:0,file_type:1,fileImgUrl:2,name:3,size:4,close:5,destroy:6,loading:7,failSeq:20,doneSeq:21})}}function mn(l,e,t){const n=l.slice();return n[11]=e[t],n}function gn(l,e){let t,n,i;return n=new Gr({props:{app:e[0],name:e[11].name,size:e[11].size,fileImgUrl:e[11].fileImgUrl,file_type:e[11].file_type,dialog_id:e[1],close:e[11]._close,destroy:e[11]._destroy,loading:e[11]._loading,failSeq:e[11]._failSeq,doneSeq:e[11]._doneSeq}}),n.$on("send",function(){et(e[4](e[11]))&&e[4](e[11]).apply(this,arguments)}),n.$on("cancel",function(){et(e[3](e[11]))&&e[3](e[11]).apply(this,arguments)}),{key:l,first:null,c(){t=Ue(),ue(n.$$.fragment),this.first=t},m(s,r){U(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r&1&&(o.app=e[0]),r&4&&(o.name=e[11].name),r&4&&(o.size=e[11].size),r&4&&(o.fileImgUrl=e[11].fileImgUrl),r&4&&(o.file_type=e[11].file_type),r&2&&(o.dialog_id=e[1]),r&4&&(o.close=e[11]._close),r&4&&(o.destroy=e[11]._destroy),r&4&&(o.loading=e[11]._loading),r&4&&(o.failSeq=e[11]._failSeq),r&4&&(o.doneSeq=e[11]._doneSeq),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&j(t),ce(n,s)}}}function Wr(l){let e,t=[],n=new Map,i,s=l[2];const r=o=>o[11].id;for(let o=0;o<s.length;o+=1){let a=mn(l,s,o),f=r(a);n.set(f,t[o]=gn(f,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();v(e,"class","flex flex_clm pos_rel unselect list svelte-112l8o6")},m(o,a){U(o,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);i=!0},p(o,[a]){a&31&&(s=o[2],Se(),t=Xe(t,a,r,1,o,s,n,e,tt,gn,null,mn),Le())},i(o){if(!i){for(let a=0;a<s.length;a+=1)O(t[a]);i=!0}},o(o){for(let a=0;a<t.length;a+=1)H(t[a]);i=!1},d(o){o&&j(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Yr(l,e,t){let{app:n}=e,{dialog_id:i}=e,s=[],r=1;const o=d=>{const _={id:r++,file:d,name:d.name,type:d.type,size:d.size,fileImgUrl:"assets/icons/folder.png",file_type:"DC",_close:!1,_destroy:!1,_loading:!1,_failSeq:0,_doneSeq:0};d.type.startsWith("image/")&&(_.file_type="IM",_.fileImgUrl=URL.createObjectURL(d)),d.type.startsWith("audio/")&&(_.file_type="VC",_.fileImgUrl=URL.createObjectURL(d)),console.log("addfile",_),s.push(_),t(2,s)},a=d=>_=>{d._close=Date.now(),t(2,s),setTimeout(()=>{const p=Date.now();t(2,s=s.filter(h=>!h._close||h._close+1e3>p))},2e3)},f=[];let c=!1;const m=async()=>{if(!c){for(c=!0;f.length;){const d=f.shift();for(;!d.destroy;){if(!d.attachment){await at(10);continue}const _=await n.api.message_Create(d.dialog_id,"",[{file:d.attachment.id,file_type:d.file.file_type}]);d.file._loading=!1,_?(d.file._doneSeq++,d.file._destroy=Date.now(),setTimeout(()=>{a(d.file)()},2e3)):d.file._failSeq++,t(2,s);break}}c=!1}},u=d=>async _=>{const p=i;if(p==null||d._loading)return;d._loading=!0,t(2,s);const h={dialog_id:p,file:d,attachment:null,destroy:!1};f.push(h),m();const y=()=>{h.destroy=!0,d._failSeq++,d._loading=!1,t(2,s)},b=await n.api.file_Upload(d.file);if(!b)return y();h.attachment=b};return l.$$set=d=>{"app"in d&&t(0,n=d.app),"dialog_id"in d&&t(1,i=d.dialog_id)},[n,i,s,a,u,o]}class Vr extends be{constructor(e){super(),we(this,e,Yr,Wr,_e,{app:0,dialog_id:1,addFile:5})}get addFile(){return this.$$.ctx[5]}}function pn(l,e,t){const n=l.slice();return n[46]=e[t],n}function hn(l,e){let t,n,i;return n=new _r({props:{app:e[0],bbox:e[11],message:e[46],render_Width:e[8]}}),{key:l,first:null,c(){t=Ue(),ue(n.$$.fragment),this.first=t},m(s,r){U(s,t,r),fe(n,s,r),i=!0},p(s,r){e=s;const o={};r[0]&1&&(o.app=e[0]),r[0]&2048&&(o.bbox=e[11]),r[0]&4&&(o.message=e[46]),r[0]&256&&(o.render_Width=e[8]),n.$set(o)},i(s){i||(O(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&j(t),ce(n,s)}}}function vn(l){let e,t,n;return{c(){e=w("div"),e.innerHTML='<img src="assets/icons/upload.png" draggable="false" class="svelte-18v90rq"/>',v(e,"class","flex flex_cx flex_cy pos_abs dropZone svelte-18v90rq")},m(i,s){U(i,e,s),n=!0},i(i){n||(i&&He(()=>{t||(t=Oe(e,Ee,{},!0)),t.run(1)}),n=!0)},o(i){i&&(t||(t=Oe(e,Ee,{},!1)),t.run(0)),n=!1},d(i){i&&j(e),i&&t&&t.end()}}}function Jr(l){let e,t,n,i,s,r,o,a=[],f=new Map,c,m,u,d,_,p,h,y,b,M,I,C,k,S,E,q,x;t=new Nr({props:{app:l[0],dialog_id:l[1],loading:l[3]}});let N=l[2];const Y=L=>L[46].index;for(let L=0;L<N.length;L+=1){let z=pn(l,N,L),J=Y(z);f.set(J,a[L]=hn(J,z))}function B(L){l[23](L)}let A={value_in:l[4]};l[5]!==void 0&&(A.value_out=l[5]),u=new qn({props:A}),je.push(()=>ot(u,"value_out",B));let G=l[10]&&vn();function V(L){l[24](L)}let P={app:l[0],dialog_id:l[1]};return l[9]!==void 0&&(P.addFile=l[9]),y=new Vr({props:P}),je.push(()=>ot(y,"addFile",V)),{c(){e=w("div"),ue(t.$$.fragment),n=T(),i=w("div"),s=w("div"),r=w("div"),o=w("div");for(let L=0;L<a.length;L+=1)a[L].c();c=T(),m=w("div"),ue(u.$$.fragment),_=T(),G&&G.c(),p=T(),h=w("div"),ue(y.$$.fragment),M=T(),I=w("div"),C=w("textarea"),k=T(),S=w("div"),S.innerHTML='<img src="assets/icons/upload.png" draggable="false" class="svelte-18v90rq"/>',v(o,"class","pos_rel w100 h100"),v(m,"class","pos_abs h100 chatScroll svelte-18v90rq"),v(r,"class","pos_rel w100 h100"),v(s,"class","flex pos_abs overhide"),v(h,"class","flex pos_abs"),R(h,"padding","10px"),R(h,"bottom","0px"),R(h,"z-index","3"),v(i,"class","flex flex_grow_1 pos_rel overhide"),v(C,"class","flex flex_grow_1 chat_input_textarea svelte-18v90rq"),v(S,"class","flex pos_abs cursor_ptr unselect btnUpload svelte-18v90rq"),v(I,"class","flex pos_rel chat_input svelte-18v90rq"),v(e,"class","flex flex_clm flex_grow_1 overhide cnt svelte-18v90rq")},m(L,z){U(L,e,z),fe(t,e,null),g(e,n),g(e,i),g(i,s),g(s,r),g(r,o);for(let J=0;J<a.length;J+=1)a[J].m(o,null);l[22](o),g(r,c),g(r,m),fe(u,m,null),g(i,_),G&&G.m(i,null),g(i,p),g(i,h),fe(y,h,null),g(e,M),g(e,I),g(I,C),fl(C,l[7]),g(I,k),g(I,S),E=!0,q||(x=[$(window,"paste",l[17]),$(r,"wheel",l[15],{passive:!0}),ft(ht.call(null,s,l[13])),$(C,"input",l[25]),$(C,"keyup",l[14]),$(C,"keydown",l[14]),$(S,"click",l[16]),$(e,"drop",l[18]),$(e,"dragover",l[19])],q=!0)},p(L,z){const J={};z[0]&1&&(J.app=L[0]),z[0]&2&&(J.dialog_id=L[1]),z[0]&8&&(J.loading=L[3]),t.$set(J),z[0]&2309&&(N=L[2],Se(),a=Xe(a,z,Y,1,L,N,f,o,tt,hn,null,pn),Le());const me={};z[0]&16&&(me.value_in=L[4]),!d&&z[0]&32&&(d=!0,me.value_out=L[5],rt(()=>d=!1)),u.$set(me),L[10]?G?z[0]&1024&&O(G,1):(G=vn(),G.c(),O(G,1),G.m(i,p)):G&&(Se(),H(G,1,1,()=>{G=null}),Le());const se={};z[0]&1&&(se.app=L[0]),z[0]&2&&(se.dialog_id=L[1]),!b&&z[0]&512&&(b=!0,se.addFile=L[9],rt(()=>b=!1)),y.$set(se),z[0]&128&&fl(C,L[7])},i(L){if(!E){O(t.$$.fragment,L);for(let z=0;z<N.length;z+=1)O(a[z]);O(u.$$.fragment,L),O(G),O(y.$$.fragment,L),E=!0}},o(L){H(t.$$.fragment,L);for(let z=0;z<a.length;z+=1)H(a[z]);H(u.$$.fragment,L),H(G),H(y.$$.fragment,L),E=!1},d(L){L&&j(e),ce(t);for(let z=0;z<a.length;z+=1)a[z].d();l[22](null),ce(u),G&&G.d(),ce(y),q=!1,Re(x)}}}const wn=10,St=4;function Xr(l,e,t){let n,i,s,{app:r}=e;const{dialogMap_r:o}=r;ve(l,o,ee=>t(21,i=ee));let{dialog_id:a=null}=e,f=[],c=[],m=new Set,u=0,d=0,_=1,p=1,h=null;const y=Fe(null);ve(l,y,ee=>t(11,s=ee)),new Date().toJSON();let b=-1;async function M(ee,Ie=0,he=20){const Me=await r.api.message_GetList({dialog_id:ee,offset:Ie,limit:he});if(!!Me&&n&&n.id===ee){for(u=Me.count;f.length<u;){const D=f.length;f.push({id:b--,index:D,_isFakeMsg:!0})}const ze=Me.results.map(D=>{var F;return(F=D==null?void 0:D.attachments)!=null&&F.length&&D.attachments.map(X=>{var ie,re,ne,Q,ge,ke,te,Te;if((re=(ie=r==null?void 0:r.appConfig)==null?void 0:ie.api)!=null&&re.attachments_OverwriteApiHostProtocol)try{const Ce=new URL(X.url);Ce.protocol=(ge=(Q=(ne=r==null?void 0:r.appConfig)==null?void 0:ne.api)==null?void 0:Q.protocol)!=null?ge:location.protocol,Ce.host=(Te=(te=(ke=r==null?void 0:r.appConfig)==null?void 0:ke.api)==null?void 0:te.host)!=null?Te:location.host,X.url=String(Ce)}catch{}}),D});ze.map((D,F)=>D.index=Ie+F),ze.map(D=>f[D.index]=D)}}let I="";const C=async ee=>{if(ee.which===13&&!ee.shiftKey&&!ee.ctrlKey&&(ee.preventDefault(),t(7,I=I.trim()),I)){const Ie=I;t(7,I=""),n&&await r.api.message_Create(n.id,Ie)}};function k(){f=[],t(2,c=[]),m=new Set,u=0,console.log("clear all")}let S=null,E=null;async function q(ee){if(!ee){if(!S)return;S=null,k();return}E!==ee.id&&(S=ee,E=ee.id,k(),f=[],t(2,c=[]),u=0,t(3,d++,d),await M(ee.id),u&&await M(ee.id,Math.max(u-20,0),20),await r.api.dialog_SetReadFlagAllMessages(ee.id),t(3,d--,d))}let x=1,N=!0;function Y(){if(N&&requestAnimationFrame(Y),!s||!h||!f.length)return;s.width;const ee=s.height,Ie=s.width-wn*2,he=wn;t(8,x=Ie-Math.max(120,Math.floor(Ie*.1)));const Me=1+p*(f.length-1);let ze=Math.floor(Me),D=Me-ze;ze>=f.length&&(ze=f.length-1,D=1);const F=[],X=[];let ie=null;t(2,c=[]);for(let ne=ze-100,Q=0,ge=!0;ne<ze+100;ne++)ne<0||ne>=f.length||(f[ne]._isFakeMsg&&m.add(ne),c[Q]!==f[ne]&&(ge&&(ge=!1,c.splice(Q,1e9)),t(2,c[Q]=f[ne],c),t(2,c)),t(2,c[Q]._drawIndex=Q,c),ne<ze&&F.push(c[Q]),ne>ze&&X.push(c[Q]),ne===ze&&(ie=c[Q]),Q++);const re=[...h.children];if(re.length===c.length){re.map((te,Te)=>{const Ce=c[Te];if(!Ce||te._remove)return;const Qe=te.getBoundingClientRect();te._bbox=Qe;const Ye=Math.floor(he+(Ce.incoming?0:Math.max(100,s.width*.05)));te.__cacheWidth!==x&&(te.__cacheWidth=x,te.style.maxWidth=x+"px"),te.__cacheLeft!==Ye&&(te.__cacheLeft=Ye,te.style.left=Ye+"px")});const ne=(te,Te,Ce=1)=>(te.__cacheTop!==Te&&(te.__cacheTop=Te,te.style.transform=`translate3d(0px, ${Te}px, 0px)`),Te+(te._bbox.height+St)*Ce);let Q=0,ge=0;const ke=re[ie._drawIndex];if(ke){const te=ke;Q=ee+St-(te._bbox.height+St)*D,ge=Q,Q=ne(te,Q,1)}X.map((te,Te)=>{const Ce=re[te._drawIndex];Q=ne(Ce,Q,1)}),Q=ge,F.reverse().map((te,Te)=>{const Ce=re[te._drawIndex];Q-=Ce._bbox.height+St,ne(Ce,Q,0)})}}requestAnimationFrame(Y),xe(()=>N=!1);async function B(){if(m.size){const ee=[...m].sort((Me,ze)=>Me-ze);m.clear();const Ie=[];let he={offset:null,limit:0};for(const Me of ee){if(he.offset!==null){if(he.limit<=500&&he.offset+he.limit===Me){he.limit++;continue}Ie.push(he)}he={offset:Me,limit:1}}he.offset!==null&&Ie.push(he),n&&(t(3,d++,d),await Promise.all(Ie.map(Me=>M(n.id,Me.offset,Me.limit))),t(3,d--,d))}N&&setTimeout(B,500)}B();async function A(){n&&await r.api.dialog_SetReadFlagAllMessages(n.id),N&&setTimeout(A,5e3)}A();async function G(){n&&await M(n.id,u,20),N&&setTimeout(G,500)}G();const V=ee=>{t(4,_=f.length?p+Math.sign(ee.deltaY)/(f.length-1):0)};let P=[],L=()=>{};const z=ee=>{P=[...P,...ee],ee.map(L)};let J=!1;const me=Ut(200,()=>t(10,J=!1)),se=async ee=>{const Ie=document.createElement("input");Ie.setAttribute("type","file"),Ie.setAttribute("multiple",!0),Ie.addEventListener("input",he=>{z([...Ie.files])}),Ie.click()},le=async ee=>{try{z([...ee.clipboardData.files])}catch{}},K=async ee=>{ee.preventDefault(),ee.stopPropagation();try{z([...ee.dataTransfer.files])}catch{}},Z=async ee=>{ee.preventDefault(),ee.stopPropagation(),t(10,J=!0),me()};function ae(ee){je[ee?"unshift":"push"](()=>{h=ee,t(6,h)})}function pe(ee){p=ee,t(5,p)}function Ae(ee){L=ee,t(9,L)}function Pe(){I=this.value,t(7,I)}return l.$$set=ee=>{"app"in ee&&t(0,r=ee.app),"dialog_id"in ee&&t(1,a=ee.dialog_id)},l.$$.update=()=>{l.$$.dirty[0]&2097154&&t(20,n=i[a]),l.$$.dirty[0]&1048576&&q(n)},[r,a,c,d,_,p,h,I,x,L,J,s,o,y,C,V,se,le,K,Z,n,i,ae,pe,Ae,Pe]}class Kr extends be{constructor(e){super(),we(this,e,Xr,Jr,_e,{app:0,dialog_id:1},null,[-1,-1])}}function bn(l){let e,t;return e=new nl({props:{height:"6"}}),{c(){ue(e.$$.fragment)},m(n,i){fe(e,n,i),t=!0},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Zr(l){let e,t,n,i,s,r,o,a,f,c,m,u,d,_,p,h,y,b,M,I,C,k,S,E,q,x,N,Y,B,A,G,V,P,L=l[3]&&bn();function z(le){l[9](le)}let J={};l[2]!==void 0&&(J.checked=l[2]),b=new Yi({props:J}),je.push(()=>ot(b,"checked",z));function me(le){l[10](le)}let se={app:l[0]};return l[1]!==void 0&&(se.filterStatus=l[1]),S=new sr({props:se}),je.push(()=>ot(S,"filterStatus",me)),Y=new tr({props:{app:l[0],filter:{filterTag:yn,filterStatus:l[1],filterUnreadFirst:l[2]}}}),A=new Kr({props:{app:l[0],dialog_id:l[5]}}),{c(){e=w("div"),t=w("div"),n=w("div"),i=T(),s=w("div"),r=w("div"),o=w("div"),o.innerHTML=`Download report
					<div class="flex cursor_ptr imgCtrlBtn svelte-4dx0vs"><img class="w100 h100 svelte-4dx0vs" draggable="false" src="assets/icons/download.png"/></div>`,a=T(),f=w("div"),c=T(),L&&L.c(),m=T(),u=w("div"),d=T(),_=w("label"),p=oe(`First unread \r
				`),h=w("div"),y=T(),ue(b.$$.fragment),I=T(),C=w("div"),k=T(),ue(S.$$.fragment),q=T(),x=w("div"),N=T(),ue(Y.$$.fragment),B=T(),ue(A.$$.fragment),R(n,"height","2px"),v(o,"class","flex flex_cy downloadReportLabel svelte-4dx0vs"),W(o,"downloadReportDisabled",l[3]),W(o,"animationDone",l[4]==="done"),W(o,"animationFail",l[4]==="fail"),R(f,"width","8px"),v(r,"class","flex flex_cy cursor_ptr unselect downloadDialogs svelte-4dx0vs"),R(u,"height","2px"),R(h,"width","4px"),v(_,"class","flex flex_cy cursor_ptr unselect firstUnread svelte-4dx0vs"),R(C,"height","2px"),v(s,"class","flex flex_clm flex_cx header pos_rel svelte-4dx0vs"),R(x,"min-height","20px"),v(t,"class","flex flex_clm list svelte-4dx0vs"),v(e,"class","flex flex_grow_1")},m(le,K){U(le,e,K),g(e,t),g(t,n),g(t,i),g(t,s),g(s,r),g(r,o),g(r,a),g(r,f),g(r,c),L&&L.m(r,null),g(s,m),g(s,u),g(s,d),g(s,_),g(_,p),g(_,h),g(_,y),fe(b,_,null),g(s,I),g(s,C),g(s,k),fe(S,s,null),g(t,q),g(t,x),g(t,N),fe(Y,t,null),g(e,B),fe(A,e,null),G=!0,V||(P=$(r,"click",l[8]),V=!0)},p(le,[K]){(!G||K&8)&&W(o,"downloadReportDisabled",le[3]),(!G||K&16)&&W(o,"animationDone",le[4]==="done"),(!G||K&16)&&W(o,"animationFail",le[4]==="fail"),le[3]?L?K&8&&O(L,1):(L=bn(),L.c(),O(L,1),L.m(r,null)):L&&(Se(),H(L,1,1,()=>{L=null}),Le());const Z={};!M&&K&4&&(M=!0,Z.checked=le[2],rt(()=>M=!1)),b.$set(Z);const ae={};K&1&&(ae.app=le[0]),!E&&K&2&&(E=!0,ae.filterStatus=le[1],rt(()=>E=!1)),S.$set(ae);const pe={};K&1&&(pe.app=le[0]),K&6&&(pe.filter={filterTag:yn,filterStatus:le[1],filterUnreadFirst:le[2]}),Y.$set(pe);const Ae={};K&1&&(Ae.app=le[0]),K&32&&(Ae.dialog_id=le[5]),A.$set(Ae)},i(le){G||(O(L),O(b.$$.fragment,le),O(S.$$.fragment,le),O(Y.$$.fragment,le),O(A.$$.fragment,le),G=!0)},o(le){H(L),H(b.$$.fragment,le),H(S.$$.fragment,le),H(Y.$$.fragment,le),H(A.$$.fragment,le),G=!1},d(le){le&&j(e),L&&L.d(),ce(b),ce(S),ce(Y),ce(A),V=!1,P()}}}let yn=null;function Qr(l,e,t){let n,i,{app:s}=e;const{dialogActiveID_r:r}=s;ve(l,r,y=>t(5,i=y));let o=null,a=1,f=!1,c=null;const m=Ut(1e3,()=>t(4,c=null)),u=s.operatorSelf_r;ve(l,u,y=>t(11,n=y));const d=()=>{var y;return"dialog_report "+((y=n==null?void 0:n.username)!=null?y:"UNK_USER")+"-"+Nn(new Date)+".csv"},_=async y=>{var b;if(!f){t(3,f=!0);try{const M=await s.api.dialog_DownloadReport();M?(bs(URL.createObjectURL(M.blob),(b=M.filename)!=null?b:d()),t(4,c="done")):t(4,c="fail")}catch{t(4,c="fail")}m(),t(3,f=!1)}};function p(y){a=y,t(2,a)}function h(y){o=y,t(1,o)}return l.$$set=y=>{"app"in y&&t(0,s=y.app)},[s,o,a,f,c,i,r,u,_,p,h]}class $r extends be{constructor(e){super(),we(this,e,Qr,Zr,_e,{app:0})}}function eo(l){let e,t,n,i,s,r,o,a,f,c,m,u,d,_,p,h;return{c(){e=w("div"),t=w("div"),n=w("div"),i=w("img"),r=T(),o=w("div"),a=w("div"),a.innerHTML='<img class="w100 h100 svelte-d45see" draggable="false" src="assets/icons/rotate.png"/>',f=T(),c=w("div"),c.innerHTML='<img class="w100 h100 svelte-d45see" draggable="false" src="assets/icons/download.png"/>',m=T(),u=w("div"),u.innerHTML='<img class="w100 h100 svelte-d45see" draggable="false" src="assets/icons/close.png"/>',v(i,"class","img svelte-d45see"),v(i,"draggable","false"),Ne(i.src,s=l[0])||v(i,"src",s),R(i,"transform","rotate("+l[3]+"deg)"),v(n,"class","pos_abs flex flex_cx flex_cy pad svelte-d45see"),R(n,"width",l[5]+"px"),R(n,"height",l[4]+"px"),v(t,"class","pos_abs flex flex_cx flex_cy pos_abs w100 h100 "),R(t,"transform","translate("+l[1]+"px, "+l[2]+"px)"),v(a,"class","flex cursor_ptr imgCtrlBtn svelte-d45see"),v(c,"class","flex cursor_ptr imgCtrlBtn svelte-d45see"),v(u,"class","flex cursor_ptr imgCtrlBtn svelte-d45see"),v(o,"class","flex pos_abs imgCtrlBtnGroup svelte-d45see"),v(e,"class","pos_abs w100 h100 unselect cnt layer_bg svelte-d45see")},m(y,b){U(y,e,b),g(e,t),g(t,n),g(n,i),g(e,r),g(e,o),g(o,a),g(o,f),g(o,c),g(o,m),g(o,u),_=!0,p||(h=[$(window,"mousemove",l[14]),$(window,"mouseup",l[13]),$(window,"blur",l[13]),$(window,"keydown",l[16]),$(i,"mousedown",l[12]),ft(ht.call(null,t,l[6])),$(a,"click",l[10]),$(c,"click",function(){et(Vt(l[0]))&&Vt(l[0]).apply(this,arguments)}),$(u,"click",l[15]),$(e,"wheel",l[11])],p=!0)},p(y,[b]){l=y,(!_||b&1&&!Ne(i.src,s=l[0]))&&v(i,"src",s),(!_||b&8)&&R(i,"transform","rotate("+l[3]+"deg)"),(!_||b&32)&&R(n,"width",l[5]+"px"),(!_||b&16)&&R(n,"height",l[4]+"px"),(!_||b&6)&&R(t,"transform","translate("+l[1]+"px, "+l[2]+"px)")},i(y){_||(He(()=>{d||(d=Oe(e,Ee,{duration:100},!0)),d.run(1)}),_=!0)},o(y){d||(d=Oe(e,Ee,{duration:100},!1)),d.run(0),_=!1},d(y){y&&j(e),y&&d&&d.end(),p=!1,Re(h)}}}function to(l,e,t){let n,i,s,r,{url:o=null}=e;const a=el(),f=Fe(null);ve(l,f,q=>t(18,n=q));const c=We(0);ve(l,c,q=>t(3,i=q));const m=We(0);ve(l,m,q=>t(5,r=q));const u=We(0);ve(l,u,q=>t(4,s=q));let d=0,_=0,p={rotate:0,scale:1,whInverse:!1};const h=()=>{if(!n||!p)return;const q=p.whInverse?n.height:n.width,x=p.whInverse?n.width:n.height;Ze(m,r=q*p.scale,r),Ze(u,s=x*p.scale,s),Ze(c,i=p.rotate,i)},y=()=>{!n||!p||(t(17,p.rotate+=90,p),t(17,p.whInverse=!p.whInverse,p),t(17,p))},b=q=>{t(17,p.scale=De(.1,p.scale+Math.sign(q.deltaY)*.1,10),p)};let M=null;const I=q=>M=[q.clientX,q.clientY,d,_],C=q=>M=null,k=q=>{!M||t(1,[d,_]=[q.clientX,q.clientY].map((x,N)=>x-M[N]+M[N+2]),d,t(2,_))},S=q=>a("close"),E=q=>q.which===27&&S();return l.$$set=q=>{"url"in q&&t(0,o=q.url)},l.$$.update=()=>{l.$$.dirty&393216&&h()},[o,d,_,i,s,r,f,c,m,u,y,b,I,C,k,S,E,p,n]}class lo extends be{constructor(e){super(),we(this,e,to,eo,_e,{url:0})}}function kn(l){let e=l[0],t,n,i=Sn(l);return{c(){i.c(),t=Ue()},m(s,r){i.m(s,r),U(s,t,r),n=!0},p(s,r){r&1&&_e(e,e=s[0])?(Se(),H(i,1,1,de),Le(),i=Sn(s),i.c(),O(i,1),i.m(t.parentNode,t)):i.p(s,r)},i(s){n||(O(i),n=!0)},o(s){H(i),n=!1},d(s){s&&j(t),i.d(s)}}}function Sn(l){let e,t;return e=new lo({props:{url:l[1]}}),e.$on("close",l[3]),{c(){ue(e.$$.fragment)},m(n,i){fe(e,n,i),t=!0},p(n,i){const s={};i&2&&(s.url=n[1]),e.$set(s)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function no(l){let e,t,n=l[1]&&kn(l);return{c(){n&&n.c(),e=Ue()},m(i,s){n&&n.m(i,s),U(i,e,s),t=!0},p(i,[s]){i[1]?n?(n.p(i,s),s&2&&O(n,1)):(n=kn(i),n.c(),O(n,1),n.m(e.parentNode,e)):n&&(Se(),H(n,1,1,()=>{n=null}),Le())},i(i){t||(O(n),t=!0)},o(i){H(n),t=!1},d(i){n&&n.d(i),i&&j(e)}}}function so(l,e,t){let n=1,i=null,{events:s}=e;xe(s.on("openOverlayImageView",o=>{t(0,n++,n),t(1,i=o)}));const r=()=>t(1,i=null);return l.$$set=o=>{"events"in o&&t(2,s=o.events)},[n,i,s,r]}class io extends be{constructor(e){super(),we(this,e,so,no,_e,{events:2})}}function ro(l){let e,t,n,i,s,r,o,a,f,c,m,u=oo;return i=new Ui({props:{app:l[0]}}),r=new xi({props:{app:l[0]}}),a=new $r({props:{app:l[0]}}),c=new io({props:{events:l[0].events}}),{c(){e=w("div"),t=T(),n=w("div"),ue(i.$$.fragment),s=T(),ue(r.$$.fragment),o=T(),ue(a.$$.fragment),f=T(),ue(c.$$.fragment),v(n,"class","flex flex_clm flex_grow_1 leftBlock svelte-ufyhtq"),v(e,"class","flex w100 h100 pos_rel")},m(d,_){U(d,e,_),g(e,t),g(e,n),fe(i,n,null),g(n,s),fe(r,n,null),g(e,o),fe(a,e,null),g(e,f),fe(c,e,null),m=!0},p(d,[_]){},i(d){m||(O(u),O(i.$$.fragment,d),O(r.$$.fragment,d),O(a.$$.fragment,d),O(c.$$.fragment,d),m=!0)},o(d){H(u),H(i.$$.fragment,d),H(r.$$.fragment,d),H(a.$$.fragment,d),H(c.$$.fragment,d),m=!1},d(d){d&&j(e),ce(i),ce(r),ce(a),ce(c)}}}const oo=0;function ao(l,e,t){let{operatorSelf:n}=e,{config:i}=e,{notifyEvents:s}=e,{moduleMgr:r}=e,{createApi:o}=e;const a=o(n.username),f=li(n,i,a,r);return xe(f.destroy),l.$$set=c=>{"operatorSelf"in c&&t(1,n=c.operatorSelf),"config"in c&&t(2,i=c.config),"notifyEvents"in c&&t(3,s=c.notifyEvents),"moduleMgr"in c&&t(4,r=c.moduleMgr),"createApi"in c&&t(5,o=c.createApi)},[f,n,i,s,r,o]}class fo extends be{constructor(e){super(),we(this,e,ao,ro,_e,{operatorSelf:1,config:2,notifyEvents:3,moduleMgr:4,createApi:5})}}function Ln(l,e,t){const n=l.slice();return n[6]=e[t],n}function co(l){let e,t,n=l[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=Cn(Ln(l,n,r));const s=r=>H(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Ue()},m(r,o){for(let a=0;a<i.length;a+=1)i[a].m(r,o);U(r,e,o),t=!0},p(r,o){if(o&5){n=r[0];let a;for(a=0;a<n.length;a+=1){const f=Ln(r,n,a);i[a]?(i[a].p(f,o),O(i[a],1)):(i[a]=Cn(f),i[a].c(),O(i[a],1),i[a].m(e.parentNode,e))}for(Se(),a=n.length;a<i.length;a+=1)s(a);Le()}},i(r){if(!t){for(let o=0;o<n.length;o+=1)O(i[o]);t=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)H(i[o]);t=!1},d(r){Qt(i,r),r&&j(e)}}}function uo(l){let e,t,n,i,s;return i=new Bn({}),{c(){e=w("div"),t=w("div"),n=T(),ue(i.$$.fragment),R(t,"height","20px"),v(e,"class","flex flex_clm flex_grow_1 flex_cy")},m(r,o){U(r,e,o),g(e,t),g(e,n),fe(i,e,null),s=!0},p:de,i(r){s||(O(i.$$.fragment,r),s=!0)},o(r){H(i.$$.fragment,r),s=!1},d(r){r&&j(e),ce(i)}}}function Mn(l){let e,t,n=l[6].username+"",i;return{c(){e=w("div"),t=oe("@"),i=oe(n),v(e,"class","nowrap textOverEllipsis")},m(s,r){U(s,e,r),g(e,t),g(e,i)},p(s,r){r&1&&n!==(n=s[6].username+"")&&ye(i,n)},d(s){s&&j(e)}}}function Cn(l){var M,I;let e,t,n,i=((M=l[6].first_name)!=null?M:"")+"",s,r,o,a,f,c=((I=l[6].last_name)!=null?I:"")+"",m,u,d,_,p,h,y,b=l[6].username&&Mn(l);return{c(){e=w("div"),t=w("div"),n=w("div"),s=oe(i),r=T(),o=w("div"),a=T(),f=w("div"),m=oe(c),u=T(),b&&b.c(),d=T(),R(o,"width","8px"),v(t,"class","flex nowrap textOverEllipsis"),v(e,"class","flex flex_clm cursor_ptr item unselect svelte-1n771m2")},m(C,k){U(C,e,k),g(e,t),g(t,n),g(n,s),g(t,r),g(t,o),g(t,a),g(t,f),g(f,m),g(e,u),b&&b.m(e,null),g(e,d),p=!0,h||(y=$(e,"click",function(){et(l[2](l[6]))&&l[2](l[6]).apply(this,arguments)}),h=!0)},p(C,k){var S,E;l=C,(!p||k&1)&&i!==(i=((S=l[6].first_name)!=null?S:"")+"")&&ye(s,i),(!p||k&1)&&c!==(c=((E=l[6].last_name)!=null?E:"")+"")&&ye(m,c),l[6].username?b?b.p(l,k):(b=Mn(l),b.c(),b.m(e,d)):b&&(b.d(1),b=null)},i(C){p||(C&&He(()=>{_||(_=Oe(e,Ee,{},!0)),_.run(1)}),p=!0)},o(C){C&&(_||(_=Oe(e,Ee,{},!1)),_.run(0)),p=!1},d(C){C&&j(e),b&&b.d(),C&&_&&_.end(),h=!1,y()}}}function _o(l){let e,t,n,i;const s=[uo,co],r=[];function o(a,f){return a[1]?0:1}return t=o(l),n=r[t]=s[t](l),{c(){e=w("div"),n.c(),v(e,"class","flex list flex_grow_1 svelte-1n771m2")},m(a,f){U(a,e,f),r[t].m(e,null),i=!0},p(a,[f]){let c=t;t=o(a),t===c?r[t].p(a,f):(Se(),H(r[c],1,1,()=>{r[c]=null}),Le(),n=r[t],n?n.p(a,f):(n=r[t]=s[t](a),n.c()),O(n,1),n.m(e,null))},i(a){i||(O(n),i=!0)},o(a){H(n),i=!1},d(a){a&&j(e),r[t].d()}}}function mo(l,e,t){let{api:n}=e,i=[],s=!1;const r=async()=>{var f,c;t(1,s=!0),t(0,i=(c=(f=await n.operator_GetList())==null?void 0:f.results)!=null?c:[]),t(1,s=!1)};let o=!1;const a=f=>c=>{o||(Pn(f),o=!0)};return r(),l.$$set=f=>{"api"in f&&t(3,n=f.api)},[i,s,a,n]}class go extends be{constructor(e){super(),we(this,e,mo,_o,_e,{api:3})}}const po=l=>typeof l=="number"&&String(l|0)===String(l);class Gn extends Error{}const Je=async(l,e=null)=>{try{return await l()}catch{}return e},sl=l=>async e=>{if(await Je(()=>e.response.status===l))return e;throw new Error(`Invalid response status, expected ${l}`)},In=sl(200),ho=sl(201),vo=sl(204),wo=async l=>{if(await Je(()=>po(l.result.count)&&Array.isArray(l.result.results)))return l;throw new Error("Invalid result, expected list container")},Lt=async l=>{if(await Je(()=>l.result.detail==="Authentication credentials were not provided.")===!0)throw new Gn("Not authorized");return l},Mt=async l=>({...l,result:l.response.status===204?null:await l.response.json()}),bo=(l,e)=>{var a,f,c;const t=(a=l==null?void 0:l.protocol)!=null?a:location.protocol,n=(f=l==null?void 0:l.host)!=null?f:location.host,i=(c=l==null?void 0:l.path_base)!=null?c:"/",s=`${t}//${n}/${i}`,r=new Set(["POST","PATCH","PUT"]),o={...e!=null?e:{},"content-type":"application/json"};return(m,u,d)=>{const _=m.toUpperCase().trim(),p=u!=null?u:"",h=d!=null?d:{},y=new URL(s);_==="GET"&&Object.entries(h).map(([M,I])=>y.searchParams.append(M,I)),y.pathname=[y.pathname,p].join("/").split("/").filter(Boolean).concat(" ").filter(Boolean).join("/").trim();const b=r.has(_)?JSON.stringify(h):null;return new Request(y,{method:_,headers:o,body:b})}},yo=(l,e,t)=>{var h,y,b,M;const n=bo(l,e.operator?{"x-username":e.operator}:{}),i=(h=e.onerror)!=null?h:st,s=(y=e.onnotify)!=null?y:st,r=(b=e.ontimestat)!=null?b:st,o=(M=e.onNotAuthorizedError)!=null?M:st,a=t!=null?t:(I,C)=>C(),f=async([I,C,k,S],E)=>{const q=ul();let x=null,N=null,Y={},B=null,A=!1;try{S=S!=null?S:[],x=n(I,C,k);for(const L of S)x=L(x);Y.request=x,Y.response=N=await a({request:x,method:I,path:C,options:k},()=>fetch(x));for(const L of E)Y=await L(Y)}catch(L){B=L,A=!0}const V=ul()-q;await Je(()=>{B instanceof Gn&&o()});const P=[];return P.push(...await Je(async()=>{const L=new URL(x.url);return[{type:"normal",chunks:[{color:"#fff",text:x.method},{color:"#000",text:`${L.pathname}${String(L.searchParams)?"?"+L.searchParams:""}`},{color:"#f00",text:await Je(()=>N.status,"")}]},{type:"mini",text:`${L.protocol}//${L.host}`},{type:"mini",text:`Time: ${V.toFixed(2)}ms`}]},[`${I} ${C}`])),P.push(await Je(()=>x.body?"Body: "+JSON.stringify(k).slice(0,100):"")),P.push(await Je(()=>Y.result.detail?`Detail: ${Y.result.detail}`:"")),P.push(ys(B)),A?i(P):s(P),r({method:I,path:C},V),!A&&Y.hasOwnProperty("result")?Y.result:null},c=[Mt,Lt],m=[Mt,Lt,ho],u=[Mt,Lt,In],d=[Mt,Lt,vo],_=[...u,wo],p={};return p.message_GetList=I=>f(["GET","messages",I],_),p.message_Create=(I,C,k=[])=>f(["POST","messages",{dialog:I,text:C,is_read:!0,attachments:k}],m),p.dialog_GetList=I=>f(["GET","dialogs",I],_),p.dialog_SetTags=(I,C)=>f(["PATCH",`dialogs/${I}`,{tag:C}],u),p.dialog_SetReadFlagAllMessages=I=>f(["POST",`dialogs/${I}/read`,{}],d),p.dialog_DownloadReport=()=>f(["GET","dialogs/download_report",{}],[In,async I=>{const C=k=>{const S=k.split(/;(.+)/)[1].split(/=(.+)/)[1];return S.toLowerCase().startsWith("utf-8''")?decodeURIComponent(S.replace("utf-8''","")):S.replace(/['"]/g,"")};return I.result={filename:await Je(()=>C(I.response.headers.get("content-disposition"))),blob:await I.response.blob()},I}]),p.lead_GetUnassignedList=I=>f(["GET","leads/unassigned",I],_),p.lead_AssignOperatorSelft=I=>f(["POST",`leads/${I}/assign`,{}],u),p.lead_SetStatus=(I,C)=>f(["PATCH",`leads/${I}`,{status:C}],u),p.lead_GetUnassignedLeadCount=()=>f(["GET","leads/count_free",{}],u),p.lead_AssignOneLead=()=>f(["POST","leads/get_one",{}],[...c,async I=>await Je(()=>{var C;return I.result=(C={200:!0,400:!1}[I.response.status])!=null?C:null,I})]),p.operatorSelf_GetOnlineInfo=()=>f(["GET","online",{}],u),p.operatorSelf_SetOnlineFlag=I=>f(["PUT","online",{online:!!I}],u),p.operator_GetList=I=>f(["GET","operators",I],_),p.file_Upload=I=>f(["POST","file",{},[C=>{C.headers.delete("content-type");const k=new FormData;return k.append("file",I),new Request(C.url,{method:C.method,headers:C.headers,body:k})}]],u),p.buildRequest=n,p},ko=()=>{const l=()=>!0,e=D=>new Promise(F=>setTimeout(F,D)),t=(D,F)=>e(D+Math.round(Math.random()*(F-D))),n=(D,F,X)=>Math.min(X,Math.max(D,F)),i=(D=0)=>new Date(Date.now()+(D!=null?D:0)).toJSON(),s=(D,F)=>{var Q;const X=Math.max(0,(F==null?void 0:F.offset)|0),ie=n(1,((Q=F==null?void 0:F.limit)!=null?Q:20)|0,1e6),re=D.length,ne=D.slice(X,X+ie);return{count:re,results:ne}};let r=1;const o=D=>(D!=null?D:[]).map(F=>({...F,id:r++}));let a=1;const f=[],c={},m=D=>{var F;return(F=c[D])!=null?F:null},u=()=>f,d=D=>{var X,ie,re;const F={operator_id:a++,username:(X=D.username)!=null?X:null,first_name:(ie=D.first_name)!=null?ie:null,last_name:(re=D.last_name)!=null?re:null};return f.push(F),c[F.username]=F,Z(F.username),F};let _=123123124;const p=[],h={},y=D=>{var F;return(F=h[D])!=null?F:null},b=()=>p.filter(D=>!D.hasOperator).sort((D,F)=>D._date_joined_msec-F._date_joined_msec),M=()=>({count:p.filter(D=>!D.hasOperator).length}),I=D=>{var ie,re,ne;const F=_++,X={tg_id:F,username:(ie=D.username)!=null?ie:null,first_name:(re=D.first_name)!=null?re:null,last_name:(ne=D.last_name)!=null?ne:null,date_joined:i(D.timeDelta),esub:null,pub_id:null,refcode:null,subpub:null,hasOperator:!1,status:"NW",is_fail:!1,ref_link:`https://ref.global.com/getRef?tg_id=${F}`};return X._date_joined_msec=+new Date(X.date_joined),p.push(X),h[X.tg_id]=X,X},C=(D,F)=>{const X=y(F);return!X||!m(D)||X.hasOperator?!1:(B(D,F),X.hasOperator=!0,X.status="IW",!0)},k=D=>{const F=b();let X=!1;return F.length&&(X=C(D,F[0].tg_id)),X?{status:"lead connected",__status:200}:{status:"error: there is no free leads",__status:400}},S=(D,F,X)=>{const ie=y(F);return ie?(X.status&&(X.status==="FL"?ie.is_fail=!0:ie.status=X.status),ie):null};let E=1;const q=[],x={},N=D=>{var F;return(F=x[D])!=null?F:null},Y=(D,F=[])=>{D.tag||(D.tag=[],D._tagSearch=new Set);const X=o(F);D.tag.splice(0,1e9),D._tagSearch.clear(),X.map(ie=>{D.tag.push(ie),D._tagSearch.add(ie.title)})},B=(D,F)=>{const X=y(F);if(!X||!m(D))return null;const re={id:E++,lead_id:F,lead:X,operator:D,unread_messages_count:0,last_message:null};return Y(re),q.push(re),x[re.id]=re,X.hasOperator=!0,re},A=(D,F,X)=>{const ie=N(F);return ie?(X.tag&&Y(ie,X.tag),ie):null},G=(D,F,X)=>{const ie=N(F);return ie?(me(D,{dialog_id:+F}).map(ne=>ne.is_read=!1),ie.unread_messages_count=0,!0):null},V=(D,F={})=>{const X=te=>te.last_message?te.last_message._received_at_msec:te.lead?te.lead._date_joined_msec:0,ie=(te,Te)=>Te-te,re=(te,Te)=>{let Ce=ie(X(te),X(Te));return Ce===0&&(Ce=ie(te.id,Te.id)),Ce},ne=F.status?new Set(F.status.split(",")):null,Q=q.filter(te=>te.operator===D).filter(F.tag?te=>te._tagSearch.has(F.tag):l).filter(ne?te=>ne.has(te.lead.status):l).filter(te=>{var Te;return((Te=te==null?void 0:te.lead)==null?void 0:Te.status)!=="DL"});let ge=[],ke=[];return F.unread_first?(ge=Q.filter(te=>te.unread_messages_count!==0),ke=Q.filter(te=>te.unread_messages_count===0)):ge=Q,ge.sort(re),ke.sort(re),ge.concat(ke)};let P=1;const L=[],z={},J=(D,F={})=>{var Q,ge,ke;const X=+F.dialog,ie=F.text,re=N(X);if(!re)return null;const ne={id:P++,dialog:X,text:ie,is_read:(Q=F.is_read)!=null?Q:!0,incoming:(ge=F.incoming)!=null?ge:!1,attachments:(ke=F.attachments)!=null?ke:[],received_at:i(F.timeDelta)};return ne._received_at_msec=+new Date(ne.received_at),L.push(ne),z[ne.id]=ne,re.last_message=ne,ne.is_read||re.unread_messages_count++,ne},me=(D,F={})=>L.filter(F.dialog_id?X=>X.dialog===F.dialog_id:l),se=5*60*1e3,le={},K=D=>{var F;return(F=le[D])!=null?F:null},Z=(D,F={})=>{const ie={online:!!F.online,offline_at:i(se),interval:Math.round(se/1e3)};return le[D]=ie,ie},ae=["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg","6.jpg","7.jpg","8.webp","9.webp","10.png","11.png","13.png","12.webp"],pe=["1.ogg"],Ae=`\u0414\u0430, \u043C\u0451\u0440\u0442\u0432.
\u0411\u0435\u0434\u0441\u0442\u0432\u0438\u0435, \u0443\u0433\u0440\u043E\u0436\u0430\u044E\u0449\u0435\u0435 \u0436\u0438\u0437\u043D\u0438 \u0434\u0435\u0432\u0443\u0448\u043A\u0438, \u0438\u0441\u0447\u0435\u0437\u043B\u043E, \u0441\u043B\u043E\u0432\u043D\u043E \u044D\u0442\u043E \u0431\u044B\u043B\u0430 \u043A\u0430\u043A\u0430\u044F-\u0442\u043E \u0448\u0443\u0442\u043A\u0430. \u041D\u043E \u043E\u043D\u0430 \u043D\u0435 \u043C\u043E\u0433\u043B\u0430 \u0440\u0430\u0434\u043E\u0432\u0430\u0442\u044C\u0441\u044F, \u0432\u0435\u0434\u044C \u0421\u043C\u0435\u0440\u0442\u044C \u0441\u043C\u0435\u043D\u0438\u043B\u0430 \u0441\u0432\u043E\u044E \u0444\u043E\u0440\u043C\u0443 \u0438 \u043F\u0440\u043E\u044F\u0432\u0438\u043B\u0430\u0441\u044C \u0432 \u0431\u043E\u043B\u0435\u0435 \u044F\u0432\u043D\u043E\u043C \u0432\u0438\u0434\u0435.
\u041F\u043E\u0434 \u0432\u0437\u0433\u043B\u044F\u0434\u043E\u043C \u043D\u0430\u043F\u0443\u0433\u0430\u043D\u043D\u043E\u0439 \u0434\u0435\u0432\u0443\u0448\u043A\u0438 \u0421\u043C\u0435\u0440\u0442\u044C \u0434\u0432\u0438\u043D\u0443\u043B\u0430\u0441\u044C \u0432 \u0435\u0451 \u0441\u0442\u043E\u0440\u043E\u043D\u0443. \u0422\u044C\u043C\u0430 \u043F\u0435\u0440\u0435\u0434 \u043D\u0435\u0439 \u043D\u0430\u0447\u0430\u043B\u0430 \u0441\u0433\u0443\u0449\u0430\u0442\u044C\u0441\u044F.
\u0422\u044C\u043C\u0430... \u043E\u043D\u0430 \u0441\u0435\u0439\u0447\u0430\u0441 \u043C\u0435\u043D\u044F \u043F\u0440\u043E\u0433\u043B\u043E\u0442\u0438\u0442, \u2014 \u043F\u043E\u0434\u0443\u043C\u0430\u043B\u0430 \u0434\u0435\u0432\u0443\u0448\u043A\u0430 \u0438 \u0435\u0449\u0451 \u043A\u0440\u0435\u043F\u0447\u0435 \u043E\u0431\u043D\u044F\u043B\u0430 \u0441\u0435\u0441\u0442\u0440\u0451\u043D\u043A\u0443. \u041E\u043D\u0430 \u0443\u0436\u0435 \u0434\u0430\u0436\u0435 \u0438 \u043D\u0435 \u0434\u0443\u043C\u0430\u043B\u0430 \u0431\u0435\u0436\u0430\u0442\u044C. \u0411\u0443\u0434\u044C \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A \u0447\u0435\u043B\u043E\u0432\u0435\u043A\u043E\u043C, \u043E\u043D\u0430 \u0431\u044B \u0435\u0449\u0435 \u043C\u043E\u0433\u043B\u0430 \u043D\u0430 \u0447\u0442\u043E-\u0442\u043E \u043D\u0430\u0434\u0435\u044F\u0442\u044C\u0441\u044F. \u041D\u043E \u043D\u0435\u0447\u0442\u043E, \u0432\u043E\u0437\u0432\u044B\u0448\u0430\u044E\u0449\u0435\u0435\u0441\u044F \u043F\u0435\u0440\u0435\u0434 \u043D\u0435\u0439, \u0441 \u043B\u0435\u0433\u043A\u043E\u0441\u0442\u044C\u044E \u0440\u0430\u0437\u0432\u0435\u044F\u043B\u043E \u0442\u0430\u043A\u0438\u0435 \u043C\u044B\u0441\u043B\u0438. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0445\u043E\u0442\u044F \u0431\u044B \u0434\u0430\u0440\u0443\u0439 \u043C\u043D\u0435 \u0431\u0435\u0437\u0431\u043E\u043B\u0435\u0437\u043D\u0435\u043D\u043D\u0443\u044E \u0441\u043C\u0435\u0440\u0442\u044C.
\u041E\u043D\u0430 \u043C\u043E\u0433\u043B\u0430 \u043B\u0438\u0448\u044C \u043C\u043E\u043B\u0438\u0442\u044C\u0441\u044F.
\u041C\u0430\u043B\u044B\u0448\u043A\u0430 \u0443\u0446\u0435\u043F\u0438\u043B\u0430\u0441\u044C \u0437\u0430 \u0435\u0451 \u0442\u0430\u043B\u0438\u044E, \u0434\u0440\u043E\u0436\u0430 \u043E\u0442 \u0443\u0436\u0430\u0441\u0430. \u0421\u043F\u0430\u0441\u0442\u0438 \u0441\u0435\u0441\u0442\u0440\u0451\u043D\u043A\u0443... \u043D\u043E \u044D\u0442\u043E \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E. \u041E\u043D\u0430 \u043C\u043E\u0433\u043B\u0430 \u043B\u0438\u0448\u044C \u0438\u0437\u0432\u0438\u043D\u0438\u0442\u044C\u0441\u044F \u0437\u0430 \u0441\u0432\u043E\u0451 \u0431\u0435\u0441\u0441\u0438\u043B\u0438\u0435. \u0421\u0435\u0441\u0442\u0440\u0451\u043D\u043A\u0430, \u0442\u044B \u043D\u0435 \u0431\u0443\u0434\u0435\u0448\u044C \u043E\u0434\u0438\u043D\u043E\u043A\u0430, \u044F \u043F\u043E\u0439\u0434\u0443 \u0441 \u0442\u043E\u0431\u043E\u0439.
\u0418 \u0442\u043E\u0433\u0434\u0430...`;let Pe=1;const ee=(D=null,F=null)=>(D=D!=null?D:Math.random()*ae.length|0,F=F!=null?F:F=["IM","DC"][Math.random()*2|0],{file:Pe++,file_type:F,url:`assets/img-test/${ae[D]}`}),Ie=(D=null,F="VC")=>(D=D!=null?D:Math.random()*pe.length|0,{file:Pe++,file_type:F,url:`assets/audio-test/${pe[D]}`});(async()=>{const D=(re,ne)=>{const Q=ne/re;let ge=-(ne+Q);return()=>(ge+=Q,ge)};let F=1;const X=(re=0)=>{let ne=Math.random()<.5,Q=Math.random()<.5,ge=Math.random()<.5;!ne&&!Q&&!ge&&(ne=!0),ne=Q=ge=!0;const ke=(F++).toString(36);return I({username:ne?`test_lead_${ke}`:null,first_name:Q?`F${ke}`:null,last_name:ge?`L${ke}`:null,timeDelta:re})},ie=(re,ne,Q=0)=>{J(re,{dialog:ne,text:`\u041F\u0440\u0438\u0432\u0435\u0442 @${re}. \u042F \u043D\u043E\u0432\u044B\u0439 \u043B\u0438\u0434, \u0432\u043E\u0442.`,is_read:!1,incoming:!0,timeDelta:Q});for(let ge=0;ge<Math.round(Math.random()*ae.length);ge++){const ke=ee(ge);J(re,{dialog:ne,text:`${ke.file_type==="IM"?"\u041A\u0430\u0440\u0442\u0438\u043D\u043A\u0430":"\u0424\u0430\u0439\u043B"} ${ge+1}.`,is_read:!1,incoming:!0,attachments:[ke],timeDelta:Q+ge*1e3})}};for(let re=0;re<10;re++){const Q=[10,100,1e3,5e3,7e3,1e4,1e4,1e5,2,3,5,7,8,10][re],ge=`op_test_${re}`;d({username:ge,first_name:"OpNumDlgs",last_name:Q+""});let ke=0;const te=D(Q,6e4*Q);for(let Te=0;Te<Q;Te++){const Ce=te(),Qe=X(Ce),Ye=B(ge,Qe.tg_id);Math.random()<.5&&ke++<5&&ie(ge,Ye.id,Ce)}}for(;;)await t(1e3,1e4),X()})();const Me=(D,F,X)=>{const ie=Q=>{Q&&Z(X)},re=async Q=>{await t(1e3,1e4);const ge=F.text.match(/without_text/i),ke=F.text.match(/long_text/i),te=F.text.match(/allimg|allfile/i),Te=ge?"":ke?Ae:`\u042D\u0445\u043E \u043E\u0442\u0432\u0435\u0442 \u0434\u043B\u044F @${X}.
"${F.text}"`;if(te){const Qe=F.text.match(/allimg/i)?"IM":"DC";for(let Ye=0;Ye<ae.length;Ye++)J(X,{dialog:F.dialog,text:Te,is_read:!1,incoming:!0,attachments:[ee(Ye,Qe)]});return}const Ce=[];F.text.match(/img/i)?Ce.push(ee(null,"IM")):F.text.match(/file/i)?Ce.push(ee(null,"DC")):F.text.match(/snd/i)&&Ce.push(Ie(null,"VC")),J(X,{dialog:F.dialog,text:Te,is_read:!1,incoming:!0,attachments:Ce})},ne=Q=>{var ge;return(ge=Q==null?void 0:Q.__status)!=null?ge:200};D("GET","operators",200,()=>s(u(),F)),D("GET","online",200,()=>K(X)),D("PUT","online",200,()=>Z(X,F)),D("GET","leads/unassigned",200,()=>s(b(),F)),D("GET","leads/count_free",200,()=>M()),D("POST","leads/get_one",ne,()=>k(X)),D("POST",/^leads\/(\d+)\/assign$/,200,Q=>C(X,Q),[ie]),D("PATCH",/^leads\/(\d+)$/,200,Q=>S(X,Q,F),[ie]),D("GET","dialogs",200,()=>s(V(X,F),F)),D("POST",/^dialogs\/(\d+)\/read$/,204,Q=>G(X,Q)),D("PATCH",/^dialogs\/(\d+)$/,200,Q=>A(X,Q,F),[ie]),D("GET","messages",200,()=>s(me(X,F),F)),D("POST","messages",201,()=>J(X,F),[ie,re])},ze=D=>{var Ce,Qe,Ye,il,rl;const F=((Ce=D==null?void 0:D.method)!=null?Ce:"").toUpperCase().trim(),X=((Qe=D==null?void 0:D.path)!=null?Qe:"").split("/").map(qe=>qe.trim()).filter(Boolean).join("/"),ie=Object.fromEntries(Object.entries((Ye=D==null?void 0:D.headers)!=null?Ye:{}).map(qe=>[qe[0].toLowerCase(),qe[1]])),re=(il=D==null?void 0:D.options)!=null?il:{},ne=(rl=ie["x-username"])!=null?rl:null,Q=[];Me((qe,wt,Wn,Yn,Vn=[])=>Q.push({method:qe,pathPattern:wt,cb:Yn,status:Wn,mwList:Vn}),re,ne);const ke=Q.map(qe=>{if(qe.method===F){if(qe.pathPattern instanceof RegExp){const wt=X.match(qe.pathPattern);return wt?{...qe,args:wt.slice(1)}:!1}return qe.pathPattern===X?{...qe,args:[]}:!1}}).filter(Boolean)[0];if(!ke)return null;const te=ke.cb(...ke.args);return ke.mwList&&ke.mwList.map(qe=>qe(te,ne,re)),{status:typeof ke.status=="function"?ke.status(te):ke.status,result:te}};try{self.addEventListener("message",({data:{rpcID:D,data:F}})=>{let X,ie;try{X=ze(F)}catch(re){ie=re.message}self.postMessage({rpcID:D,result:X,error:ie})})}catch{}return{request:ze}},So=()=>{const l=`( ${ko.toString()} )()`,e=new Blob([l],{type:"text/javascript"}),t=new Worker(window.URL.createObjectURL(e));let n=1;const i={};return t.addEventListener("message",({data:{rpcID:o,result:a,error:f}})=>{const c=i[o];delete i[o],f&&c.reject(new Error(f)),c.resolve(a)}),{request:o=>{const a=n++,f=i[a]=jt();return t.postMessage({rpcID:a,data:o}),f.promise},destroy:()=>t.terminate()}};function Lo(l){let e,t,n,i,s;return t=new fo({props:{operatorSelf:l[0],config:l[3],notifyEvents:l[1],moduleMgr:l[2],createApi:l[4]}}),{c(){e=w("div"),ue(t.$$.fragment),v(e,"class","pos_rel flex")},m(r,o){U(r,e,o),fe(t,e,null),n=!0,i||(s=ft(ht.call(null,e)),i=!0)},p(r,o){const a={};o&1&&(a.operatorSelf=r[0]),t.$set(a)},i(r){n||(O(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){r&&j(e),ce(t),i=!1,s()}}}function Mo(l){let e,t,n,i,s;return e=new ii({props:{select:"operators"}}),i=new go({props:{api:l[5]}}),{c(){ue(e.$$.fragment),t=T(),n=w("div"),ue(i.$$.fragment),v(n,"class","flex")},m(r,o){fe(e,r,o),U(r,t,o),U(r,n,o),fe(i,n,null),s=!0},p:de,i(r){s||(O(e.$$.fragment,r),O(i.$$.fragment,r),s=!0)},o(r){H(e.$$.fragment,r),H(i.$$.fragment,r),s=!1},d(r){ce(e,r),r&&j(t),r&&j(n),ce(i)}}}function Co(l){let e,t,n,i,s,r,o,a,f,c;const m=[Mo,Lo],u=[];function d(_,p){return _[0]?1:0}return t=d(l),n=u[t]=m[t](l),s=new yi({props:{modules:l[2]}}),o=new Ii({}),f=new di({props:{events:l[1]}}),{c(){e=w("main"),n.c(),i=T(),ue(s.$$.fragment),r=T(),ue(o.$$.fragment),a=T(),ue(f.$$.fragment),v(e,"class","flex flex_clm flex_grow_1 pos_rel overhide svelte-l8w6xt")},m(_,p){U(_,e,p),u[t].m(e,null),g(e,i),fe(s,e,null),g(e,r),fe(o,e,null),g(e,a),fe(f,e,null),c=!0},p(_,[p]){let h=t;t=d(_),t===h?u[t].p(_,p):(Se(),H(u[h],1,1,()=>{u[h]=null}),Le(),n=u[t],n?n.p(_,p):(n=u[t]=m[t](_),n.c()),O(n,1),n.m(e,i))},i(_){c||(O(n),O(s.$$.fragment,_),O(o.$$.fragment,_),O(f.$$.fragment,_),c=!0)},o(_){H(n),H(s.$$.fragment,_),H(o.$$.fragment,_),H(f.$$.fragment,_),c=!1},d(_){_&&j(e),u[t].d(),ce(s),ce(o),ce(f)}}}function Io(l,e,t){let n;ve(l,Ft,u=>t(0,n=u));const i=ll(),s=ws(),r=()=>{const u=window==null?void 0:window.g_Config;u||alert(`Fatal error
Config not found`);const d=u!=null?u:{};return[...Tt()].map(([p,h])=>{var b;const y=p.match(/^overwrite\-config\-([^]*)$/);if(y){try{h=JSON.parse(h)}catch(C){console.log("Invalid k value error: "+C.message);return}const M=y[1].split(".");let I=d;for(;M.length>=2;){const C=M.shift();I=I[C]=(b=I[C])!=null?b:{}}M.length===1&&(I[M[0]]=h)}}),d},o=u=>{var h,y;const d=((h=u.testMode)!=null?h:!0)&&!Tt().has("real-api");let _=()=>null,p=u.api;if(d){const[b,M]=((y=Tt().get("ping"))!=null?y:"").split(",").concat(200,300).filter(Boolean).map(C=>De(0,C|0,6e4)).slice(0,2).sort((C,k)=>C-k);console.log({pingMin:b,pingMax:M});const I=So();xe(I.destroy),p={protocol:"https:",host:"test.mode.dev",path_base:"api/"},_=()=>async({method:C,path:k,options:S,request:E})=>{await at(b+(M-b)*Math.random()|0);const q=Object.fromEntries([...E.headers]),{status:x,result:N}=await I.request({method:C,path:k,options:S,headers:q});return{status:x,json:()=>N}}}return(b=null)=>yo(p,{onerror:M=>i.emit("error",M),onnotify:M=>i.emit("debug",M),onNotAuthorizedError:()=>Ze(Ft,n=null,n),ontimestat:(M,I)=>cs(`${M.method} ${M.path}`,I),operator:b},_())},a=async()=>{const u=["assets/icons/arrow-up.png","assets/icons/check-list.png","assets/icons/close.png","assets/icons/copy-clipboard.png","assets/icons/download.png","assets/icons/folder.png","assets/icons/fullscreen.png","assets/icons/logout.png","assets/icons/pause.png","assets/icons/play.png","assets/icons/rotate.png","assets/icons/send.png","assets/icons/status1.png","assets/icons/upload.png","assets/icons/volume0.png","assets/icons/volume1.png","assets/icons/volume2.png","assets/icons/volume3.png"];try{const d=await caches.open("static");u.map(async _=>{await d.match(_)||await d.add(_)})}catch(d){console.error(d)}},f=r(),c=o(f),m=c();return a(),[n,i,s,f,c,m]}class To extends be{constructor(e){super(),we(this,e,Io,Co,_e,{})}}new To({target:document.getElementById("app")});
