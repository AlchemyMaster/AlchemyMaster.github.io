(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function D(){}const ze=t=>t;function Fe(t){return t()}function ke(){return Object.create(null)}function I(t){t.forEach(Fe)}function ee(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function We(t){return Object.keys(t).length===0}function Je(t,...e){if(t==null)return D;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function pe(t,e,n){t.$$.on_destroy.push(Je(e,n))}function fe(t){return t&&ee(t.destroy)?t.destroy:D}const Re=typeof window<"u";let Ke=Re?()=>window.performance.now():()=>Date.now(),ye=Re?t=>requestAnimationFrame(t):D;const Q=new Set;function Ge(t){Q.forEach(e=>{e.c(t)||(Q.delete(e),e.f())}),Q.size!==0&&ye(Ge)}function Xe(t){let e;return Q.size===0&&ye(Ge),{promise:new Promise(n=>{Q.add(e={c:t,f:n})}),abort(){Q.delete(e)}}}function m(t,e){t.appendChild(e)}function Ze(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Qe(t,e){return m(t.head||t,e),e.sheet}function S(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode.removeChild(t)}function $e(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function N(t){return document.createTextNode(t)}function A(){return N(" ")}function Ve(){return N("")}function z(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function $(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function et(t){return Array.from(t.childNodes)}function H(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function xe(t,e){t.value=e==null?"":e}function C(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function M(t,e,n){t.classList[n?"add":"remove"](e)}function tt(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,i,e),l}const ue=new Map;let de=0;function nt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function lt(t){const e={style_element:w("style"),rules:{}};return ue.set(t,e),e}function Le(t,e,n,i,l,c,s,r=0){const a=16.666/i;let o=`{
`;for(let y=0;y<=1;y+=a){const g=e+(n-e)*c(y);o+=y*100+`%{${s(g,1-g)}}
`}const f=o+`100% {${s(n,1-n)}}
}`,u=`__svelte_${nt(f)}_${r}`,d=Ze(t),{style_element:p,rules:_}=ue.get(d)||lt(d);if(!_[u]){const y=Qe(d,p);_[u]=!0,y.insertRule(`@keyframes ${u} ${f}`,y.cssRules.length)}const h=t.style.animation||"";return t.style.animation=`${h?`${h}, `:""}${u} ${i}ms linear ${l}ms 1 both`,de+=1,u}function st(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?c=>c.indexOf(e)<0:c=>c.indexOf("__svelte")===-1),l=n.length-i.length;l&&(t.style.animation=i.join(", "),de-=l,de||it())}function it(){ye(()=>{de||(ue.forEach(t=>{const{style_element:e}=t;E(e)}),ue.clear())})}let se;function le(t){se=t}function rt(){if(!se)throw new Error("Function called outside component initialization");return se}function ot(t){rt().$$.on_destroy.push(t)}const ne=[],_e=[],ae=[],we=[],at=Promise.resolve();let be=!1;function ct(){be||(be=!0,at.then(Ye))}function F(t){ae.push(t)}function ft(t){we.push(t)}const ge=new Set;let oe=0;function Ye(){const t=se;do{for(;oe<ne.length;){const e=ne[oe];oe++,le(e),ut(e.$$)}for(le(null),ne.length=0,oe=0;_e.length;)_e.pop()();for(let e=0;e<ae.length;e+=1){const n=ae[e];ge.has(n)||(ge.add(n),n())}ae.length=0}while(ne.length);for(;we.length;)we.pop()();be=!1,ge.clear(),le(t)}function ut(t){if(t.fragment!==null){t.update(),I(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}let te;function dt(){return te||(te=Promise.resolve(),te.then(()=>{te=null})),te}function he(t,e,n){t.dispatchEvent(tt(`${e?"intro":"outro"}${n}`))}const ce=new Set;let B;function W(){B={r:0,c:[],p:B}}function J(){B.r||I(B.c),B=B.p}function O(t,e){t&&t.i&&(ce.delete(t),t.i(e))}function T(t,e,n,i){if(t&&t.o){if(ce.has(t))return;ce.add(t),B.c.push(()=>{ce.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const _t={duration:0};function R(t,e,n,i){let l=e(t,n),c=i?0:1,s=null,r=null,a=null;function o(){a&&st(t,a)}function f(d,p){const _=d.b-c;return p*=Math.abs(_),{a:c,b:d.b,d:_,duration:p,start:d.start,end:d.start+p,group:d.group}}function u(d){const{delay:p=0,duration:_=300,easing:h=ze,tick:y=D,css:g}=l||_t,v={start:Ke()+p,b:d};d||(v.group=B,B.r+=1),s||r?r=v:(g&&(o(),a=Le(t,c,d,_,p,h,g)),d&&y(0,1),s=f(v,_),F(()=>he(t,d,"start")),Xe(k=>{if(r&&k>r.start&&(s=f(r,_),r=null,he(t,s.b,"start"),g&&(o(),a=Le(t,c,s.b,s.duration,0,h,l.css))),s){if(k>=s.end)y(c=s.b,1-c),he(t,s.b,"end"),r||(s.b?o():--s.group.r||I(s.group.c)),s=null;else if(k>=s.start){const L=k-s.start;c=s.a+s.d*h(L/s.duration),y(c,1-c)}}return!!(s||r)}))}return{run(d){ee(l)?dt().then(()=>{l=l(),u(d)}):u(d)},end(){o(),s=r=null}}}function mt(t,e){T(t,1,1,()=>{e.delete(t.key)})}function pt(t,e,n,i,l,c,s,r,a,o,f,u){let d=t.length,p=c.length,_=d;const h={};for(;_--;)h[t[_].key]=_;const y=[],g=new Map,v=new Map;for(_=p;_--;){const b=u(l,c,_),j=n(b);let P=s.get(j);P?i&&P.p(b,e):(P=o(j,b),P.c()),g.set(j,y[_]=P),j in h&&v.set(j,Math.abs(_-h[j]))}const k=new Set,L=new Set;function x(b){O(b,1),b.m(r,f),s.set(b.key,b),f=b.first,p--}for(;d&&p;){const b=y[p-1],j=t[d-1],P=b.key,re=j.key;b===j?(f=b.first,d--,p--):g.has(re)?!s.has(P)||k.has(P)?x(b):L.has(re)?d--:v.get(P)>v.get(re)?(L.add(P),x(b)):(k.add(re),d--):(a(j,s),d--)}for(;d--;){const b=t[d];g.has(b.key)||a(b,s)}for(;p;)x(y[p-1]);return y}function gt(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function U(t){t&&t.c()}function G(t,e,n,i){const{fragment:l,on_mount:c,on_destroy:s,after_update:r}=t.$$;l&&l.m(e,n),i||F(()=>{const a=c.map(Fe).filter(ee);s?s.push(...a):I(a),t.$$.on_mount=[]}),r.forEach(F)}function Y(t,e){const n=t.$$;n.fragment!==null&&(I(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(t,e){t.$$.dirty[0]===-1&&(ne.push(t),ct(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(t,e,n,i,l,c,s,r=[-1]){const a=se;le(t);const o=t.$$={fragment:null,ctx:null,props:c,update:D,not_equal:l,bound:ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ke(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};s&&s(o.root);let f=!1;if(o.ctx=n?n(t,e.props||{},(u,d,...p)=>{const _=p.length?p[0]:d;return o.ctx&&l(o.ctx[u],o.ctx[u]=_)&&(!o.skip_bound&&o.bound[u]&&o.bound[u](_),f&&ht(t,u)),d}):[],o.update(),f=!0,I(o.before_update),o.fragment=i?i(o.ctx):!1,e.target){if(e.hydrate){const u=et(e.target);o.fragment&&o.fragment.l(u),u.forEach(E)}else o.fragment&&o.fragment.c();e.intro&&O(t.$$.fragment),G(t,e.target,e.anchor,e.customElement),Ye()}le(a)}class X{$destroy(){Y(this,1),this.$destroy=D}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!We(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function vt(t){const e=t-1;return e*e*e+1}function V(t,{delay:e=0,duration:n=400,easing:i=ze}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:c=>`opacity: ${c*l}`}}function Ee(t,{delay:e=0,duration:n=400,easing:i=vt}={}){const l=getComputedStyle(t),c=+l.opacity,s=parseFloat(l.height),r=parseFloat(l.paddingTop),a=parseFloat(l.paddingBottom),o=parseFloat(l.marginTop),f=parseFloat(l.marginBottom),u=parseFloat(l.borderTopWidth),d=parseFloat(l.borderBottomWidth);return{delay:e,duration:n,easing:i,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*c};height: ${p*s}px;padding-top: ${p*r}px;padding-bottom: ${p*a}px;margin-top: ${p*o}px;margin-bottom: ${p*f}px;border-top-width: ${p*u}px;border-bottom-width: ${p*d}px;`}}const Z=[];function wt(t,e=D){let n;const i=new Set;function l(r){if(q(t,r)&&(t=r,n)){const a=!Z.length;for(const o of i)o[1](),Z.push(o,t);if(a){for(let o=0;o<Z.length;o+=2)Z[o][0](Z[o+1]);Z.length=0}}}function c(r){l(r(t))}function s(r,a=D){const o=[r,a];return i.add(o),i.size===1&&(n=e(l)||D),r(t),()=>{i.delete(o),i.size===0&&(n(),n=null)}}return{set:l,update:c,subscribe:s}}const ie=wt(null),bt=t=>{ie.set(t),g_Api.setHeader("x-username",t.username)};function Oe(t){let e,n,i;return{c(){e=w("div"),e.textContent="Operators",$(e,"class","item cursor_ptr svelte-1980tew"),M(e,"active",t[0]==="operators"),M(e,"disabled",t[1].has("operators"))},m(l,c){S(l,e,c),n||(i=z(e,"click",t[3]("operators")),n=!0)},p(l,c){c&1&&M(e,"active",l[0]==="operators"),c&2&&M(e,"disabled",l[1].has("operators"))},d(l){l&&E(e),n=!1,i()}}}function Ae(t){let e,n,i,l,c;return{c(){e=w("div"),e.textContent="New leads",n=A(),i=w("div"),i.textContent="My leads",$(e,"class","item cursor_ptr svelte-1980tew"),M(e,"active",t[0]==="newLeads"),M(e,"disabled",t[1].has("newLeads")),$(i,"class","item cursor_ptr svelte-1980tew"),M(i,"active",t[0]==="myLeads"),M(i,"disabled",t[1].has("myLeads"))},m(s,r){S(s,e,r),S(s,n,r),S(s,i,r),l||(c=[z(e,"click",t[3]("newLeads")),z(i,"click",t[3]("myLeads"))],l=!0)},p(s,r){r&1&&M(e,"active",s[0]==="newLeads"),r&2&&M(e,"disabled",s[1].has("newLeads")),r&1&&M(i,"active",s[0]==="myLeads"),r&2&&M(i,"disabled",s[1].has("myLeads"))},d(s){s&&E(e),s&&E(n),s&&E(i),l=!1,I(c)}}}function Se(t){let e,n=t[2].username+"",i,l,c;return{c(){e=w("div"),i=N(n),$(e,"class","item cursor_ptr notHover nowrap textOverEllipsis svelte-1980tew"),C(e,"max-width","200px")},m(s,r){S(s,e,r),m(e,i),c=!0},p(s,r){(!c||r&4)&&n!==(n=s[2].username+"")&&H(i,n)},i(s){c||(F(()=>{l||(l=R(e,V,{},!0)),l.run(1)}),c=!0)},o(s){l||(l=R(e,V,{},!1)),l.run(0),c=!1},d(s){s&&E(e),s&&l&&l.end()}}}function yt(t){let e,n,i,l,c,s,r=!t[2]&&Oe(t),a=t[2]&&Ae(t),o=t[2]&&Se(t);return{c(){e=w("div"),r&&r.c(),n=A(),a&&a.c(),i=A(),l=w("div"),c=A(),o&&o.c(),$(l,"class","flex flex_grow_1"),$(e,"class","flex flex_cy w100 list unselect svelte-1980tew")},m(f,u){S(f,e,u),r&&r.m(e,null),m(e,n),a&&a.m(e,null),m(e,i),m(e,l),m(e,c),o&&o.m(e,null),s=!0},p(f,[u]){f[2]?r&&(r.d(1),r=null):r?r.p(f,u):(r=Oe(f),r.c(),r.m(e,n)),f[2]?a?a.p(f,u):(a=Ae(f),a.c(),a.m(e,i)):a&&(a.d(1),a=null),f[2]?o?(o.p(f,u),u&4&&O(o,1)):(o=Se(f),o.c(),O(o,1),o.m(e,null)):o&&(W(),T(o,1,1,()=>{o=null}),J())},i(f){s||(O(o),s=!0)},o(f){T(o),s=!1},d(f){f&&E(e),r&&r.d(),a&&a.d(),o&&o.d()}}}function $t(t,e,n){let i;pe(t,ie,r=>n(2,i=r));let{select:l=""}=e,{disabled:c=new Set}=e;const s=r=>a=>{c.has(r)||n(0,l=r)};return t.$$set=r=>{"select"in r&&n(0,l=r.select),"disabled"in r&&n(1,c=r.disabled)},[l,c,i,s]}class kt extends X{constructor(e){super(),K(this,e,$t,yt,q,{select:0,disabled:1})}}function xt(t){let e;return{c(){e=w("div"),e.innerHTML=`<div class="svelte-j15bjw"></div> 
	<div class="svelte-j15bjw"></div> 
	<div class="svelte-j15bjw"></div>`,$(e,"class","lds-roller svelte-j15bjw")},m(n,i){S(n,e,i)},p:D,i:D,o:D,d(n){n&&E(e)}}}class qe extends X{constructor(e){super(),K(this,e,null,xt,q,{})}}function je(t,e,n){const i=t.slice();return i[5]=e[n],i}function Lt(t){let e,n,i=t[0],l=[];for(let s=0;s<i.length;s+=1)l[s]=Te(je(t,i,s));const c=s=>T(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Ve()},m(s,r){for(let a=0;a<l.length;a+=1)l[a].m(s,r);S(s,e,r),n=!0},p(s,r){if(r&5){i=s[0];let a;for(a=0;a<i.length;a+=1){const o=je(s,i,a);l[a]?(l[a].p(o,r),O(l[a],1)):(l[a]=Te(o),l[a].c(),O(l[a],1),l[a].m(e.parentNode,e))}for(W(),a=i.length;a<l.length;a+=1)c(a);J()}},i(s){if(!n){for(let r=0;r<i.length;r+=1)O(l[r]);n=!0}},o(s){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)T(l[r]);n=!1},d(s){$e(l,s),s&&E(e)}}}function Et(t){let e,n,i,l,c;return l=new qe({}),{c(){e=w("div"),n=w("div"),i=A(),U(l.$$.fragment),C(n,"height","20px"),$(e,"class","flex flex_clm flex_grow_1 flex_cy")},m(s,r){S(s,e,r),m(e,n),m(e,i),G(l,e,null),c=!0},p:D,i(s){c||(O(l.$$.fragment,s),c=!0)},o(s){T(l.$$.fragment,s),c=!1},d(s){s&&E(e),Y(l)}}}function Te(t){let e,n,i=t[5].username+"",l,c,s,r,a=t[5].first_name+"",o,f,u,d,p,_=t[5].last_name+"",h,y,g,v,k,L;return{c(){e=w("div"),n=w("div"),l=N(i),c=A(),s=w("div"),r=w("div"),o=N(a),f=A(),u=w("div"),d=A(),p=w("div"),h=N(_),y=A(),$(n,"class","nowrap textOverEllipsis"),C(u,"width","8px"),$(s,"class","flex nowrap textOverEllipsis"),$(e,"class","flex flex_clm cursor_ptr item unselect svelte-1n771m2")},m(x,b){S(x,e,b),m(e,n),m(n,l),m(e,c),m(e,s),m(s,r),m(r,o),m(s,f),m(s,u),m(s,d),m(s,p),m(p,h),m(e,y),v=!0,k||(L=z(e,"click",function(){ee(t[2](t[5]))&&t[2](t[5]).apply(this,arguments)}),k=!0)},p(x,b){t=x,(!v||b&1)&&i!==(i=t[5].username+"")&&H(l,i),(!v||b&1)&&a!==(a=t[5].first_name+"")&&H(o,a),(!v||b&1)&&_!==(_=t[5].last_name+"")&&H(h,_)},i(x){v||(x&&F(()=>{g||(g=R(e,V,{},!0)),g.run(1)}),v=!0)},o(x){x&&(g||(g=R(e,V,{},!1)),g.run(0)),v=!1},d(x){x&&E(e),x&&g&&g.end(),k=!1,L()}}}function Ot(t){let e,n,i,l;const c=[Et,Lt],s=[];function r(a,o){return a[1]?0:1}return n=r(t),i=s[n]=c[n](t),{c(){e=w("div"),i.c(),$(e,"class","flex list flex_grow_1 svelte-1n771m2")},m(a,o){S(a,e,o),s[n].m(e,null),l=!0},p(a,[o]){let f=n;n=r(a),n===f?s[n].p(a,o):(W(),T(s[f],1,1,()=>{s[f]=null}),J(),i=s[n],i?i.p(a,o):(i=s[n]=c[n](a),i.c()),O(i,1),i.m(e,null))},i(a){l||(O(i),l=!0)},o(a){T(i),l=!1},d(a){a&&E(e),s[n].d()}}}function At(t,e,n){let i=[],l=!1;const c=async()=>{n(1,l=!0);const a=await g_Api("GET","operators");n(0,i=a.results),n(1,l=!1)};let s=!1;const r=a=>o=>{s||(bt(a),s=!0)};return c(),[i,l,r]}class St extends X{constructor(e){super(),K(this,e,At,Ot,q,{})}}const Ue=t=>new Promise(e=>setTimeout(e,t)),me=t=>{let e=null,n=null,i=!0;const l=()=>{i&&setTimeout(l,10);const s=t.parentNode;if(s){const r=s.getBoundingClientRect();(e!==r.width||n!==r.height)&&(e=r.width,n=r.height,t.style.width=`${e}px`,t.style.height=`${n}px`,console.log("upd"))}};return l(),{destroy:()=>i=!1}};function Me(t,e,n){const i=t.slice();return i[12]=e[n],i}function jt(t){let e,n,i=[],l=new Map,c,s,r,a=t[1];const o=f=>f[12].tg_id;for(let f=0;f<a.length;f+=1){let u=Me(t,a,f),d=o(u);l.set(d,i[f]=De(d,u))}return{c(){e=w("div"),n=w("div");for(let f=0;f<i.length;f+=1)i[f].c();$(n,"class","flex list svelte-1llqkck"),$(e,"class","pos_abs"),C(e,"overflow","auto")},m(f,u){S(f,e,u),m(e,n);for(let d=0;d<i.length;d+=1)i[d].m(n,null);t[5](e),c=!0,s||(r=fe(me.call(null,e)),s=!0)},p(f,u){u&10&&(a=f[1],W(),i=pt(i,u,o,1,f,a,l,n,mt,De,null,Me),J())},i(f){if(!c){for(let u=0;u<a.length;u+=1)O(i[u]);c=!0}},o(f){for(let u=0;u<i.length;u+=1)T(i[u]);c=!1},d(f){f&&E(e);for(let u=0;u<i.length;u+=1)i[u].d();t[5](null),s=!1,r()}}}function Tt(t){let e,n,i,l,c;return l=new qe({}),{c(){e=w("div"),n=w("div"),i=A(),U(l.$$.fragment),C(n,"height","20px"),$(e,"class","flex flex_clm flex_grow_1 flex_cy")},m(s,r){S(s,e,r),m(e,n),m(e,i),G(l,e,null),c=!0},p:D,i(s){c||(O(l.$$.fragment,s),c=!0)},o(s){T(l.$$.fragment,s),c=!1},d(s){s&&E(e),Y(l)}}}function De(t,e){let n,i,l=e[12].username+"",c,s,r,a,o=e[12].first_name+"",f,u,d,p,_,h=e[12].last_name+"",y,g,v,k,L,x;return{key:t,first:null,c(){n=w("div"),i=w("div"),c=N(l),s=A(),r=w("div"),a=w("div"),f=N(o),u=A(),d=w("div"),p=A(),_=w("div"),y=N(h),g=A(),$(i,"class","nowrap textOverEllipsis"),C(d,"width","8px"),$(r,"class","flex nowrap textOverEllipsis"),$(n,"class","flex flex_clm cursor_ptr item unselect pos_abs svelte-1llqkck"),C(n,"left",e[12].x+"px"),C(n,"top",e[12].y+"px"),this.first=n},m(b,j){S(b,n,j),m(n,i),m(i,c),m(n,s),m(n,r),m(r,a),m(a,f),m(r,u),m(r,d),m(r,p),m(r,_),m(_,y),m(n,g),k=!0,L||(x=z(n,"click",function(){ee(e[3](e[12]))&&e[3](e[12]).apply(this,arguments)}),L=!0)},p(b,j){e=b,(!k||j&2)&&l!==(l=e[12].username+"")&&H(c,l),(!k||j&2)&&o!==(o=e[12].first_name+"")&&H(f,o),(!k||j&2)&&h!==(h=e[12].last_name+"")&&H(y,h),(!k||j&2)&&C(n,"left",e[12].x+"px"),(!k||j&2)&&C(n,"top",e[12].y+"px")},i(b){k||(b&&F(()=>{v||(v=R(n,V,{},!0)),v.run(1)}),k=!0)},o(b){b&&(v||(v=R(n,V,{},!1)),v.run(0)),k=!1},d(b){b&&E(n),b&&v&&v.end(),L=!1,x()}}}function Mt(t){let e,n,i,l;const c=[Tt,jt],s=[];function r(a,o){return a[2]?0:1}return n=r(t),i=s[n]=c[n](t),{c(){e=w("div"),i.c(),$(e,"class","flex flex_grow_1")},m(a,o){S(a,e,o),s[n].m(e,null),l=!0},p(a,[o]){let f=n;n=r(a),n===f?s[n].p(a,o):(W(),T(s[f],1,1,()=>{s[f]=null}),J(),i=s[n],i?i.p(a,o):(i=s[n]=c[n](a),i.c()),O(i,1),i.m(e,null))},i(a){l||(O(i),l=!0)},o(a){T(i),l=!1},d(a){a&&E(e),s[n].d()}}}const Dt=160,Ct=50,ve=10;async function Ce(){return(await g_Api("GET","leads/unassigned",{page:1})).results.map(t=>({...t,date_joined:+new Date(t.date_joined)})).sort((t,e)=>e.date_joined-t.date_joined)}function Nt(t,e,n){let i;pe(t,ie,h=>n(8,i=h));let l=[],c=[],s=null;function r(){if(!s)return;const h=s.getBoundingClientRect(),y=Dt+ve*2,g=Ct+ve*2,v=Math.max(1,Math.floor(h.width/y)),k=(h.width-v*y)/2,L=ve;console.log({ccx:v},h.width,y,Math.floor(h.width/y)),n(1,c=l.map((x,b)=>{const j={...x};return j.x=b%v*y+k,j.y=L+Math.floor(b/v)*g,j})),console.log(c)}let a=!1;async function o(){n(2,a=!0),n(4,l=await Ce()),n(2,a=!1),u()}let f=!0;async function u(){for(;f;){await Ue(1e3);const h=new Set(l.map(L=>L.tg_id)),y=await Ce(),g=new Set(y.map(L=>L.tg_id)),v=y.filter(L=>!h.has(L.tg_id));l.filter(L=>g.has(L.tg_id)).length===l.length&&v.size===0||n(4,l=[...l.filter(L=>g.has(L.tg_id)),...v].sort((L,x)=>x.date_joined-L.date_joined))}}ot(()=>f=!1);let d=!1;const p=h=>async y=>{if(!i||d)return;d=!0;const g=await g_Api("POST","lead/setOperator",{lead_id:h.tg_id,username:i.username});console.log({result:g}),d=!1};o();function _(h){_e[h?"unshift":"push"](()=>{s=h,n(0,s)})}return t.$$.update=()=>{t.$$.dirty&17&&r()},[s,c,a,p,l,_]}class Ht extends X{constructor(e){super(),K(this,e,Nt,Mt,q,{})}}function Ne(t,e,n){const i=t.slice();return i[5]=e[n],i}function He(t){let e;return{c(){e=w("div"),e.textContent="stan18k",$(e,"class","username svelte-oz08h")},m(n,i){S(n,e,i)},d(n){n&&E(e)}}}function Pe(t){let e,n,i,l,c=t[5].text+"",s,r,a=t[5].incoming&&He();return{c(){e=w("div"),a&&a.c(),n=A(),i=w("div"),l=w("pre"),s=N(c),r=A(),C(l,"padding","0px"),C(l,"margin","0px"),$(i,"class","flex"),$(e,"class","flex flex_clm chat_item svelte-oz08h"),M(e,"chat_item_other",t[5].incoming),M(e,"chat_item_self",!t[5].incoming)},m(o,f){S(o,e,f),a&&a.m(e,null),m(e,n),m(e,i),m(i,l),m(l,s),m(e,r)},p(o,f){o[5].incoming?a||(a=He(),a.c(),a.m(e,n)):a&&(a.d(1),a=null),f&1&&c!==(c=o[5].text+"")&&H(s,c),f&1&&M(e,"chat_item_other",o[5].incoming),f&1&&M(e,"chat_item_self",!o[5].incoming)},d(o){o&&E(e),a&&a.d()}}}function Pt(t){let e,n,i,l,c,s,r,a,o,f=t[0],u=[];for(let d=0;d<f.length;d+=1)u[d]=Pe(Ne(t,f,d));return{c(){e=w("div"),n=w("div"),i=w("div"),l=w("div");for(let d=0;d<u.length;d+=1)u[d].c();c=A(),s=w("div"),r=w("textarea"),$(l,"class","flex flex_clm flex_grow_1"),$(i,"class","flex pos_abs "),C(i,"overflow","auto"),$(n,"class","flex flex_grow_1 pos_rel overhide"),$(r,"class","flex flex_grow_1 chat_input_textarea svelte-oz08h"),$(s,"class","flex chat_input svelte-oz08h"),$(e,"class","flex flex_clm flex_grow_1")},m(d,p){S(d,e,p),m(e,n),m(n,i),m(i,l);for(let _=0;_<u.length;_+=1)u[_].m(l,null);m(e,c),m(e,s),m(s,r),xe(r,t[1]),a||(o=[fe(me.call(null,i)),z(r,"input",t[3]),z(r,"keyup",t[2])],a=!0)},p(d,[p]){if(p&1){f=d[0];let _;for(_=0;_<f.length;_+=1){const h=Ne(d,f,_);u[_]?u[_].p(h,p):(u[_]=Pe(h),u[_].c(),u[_].m(l,null))}for(;_<u.length;_+=1)u[_].d(1);u.length=f.length}p&2&&xe(r,d[1])},i:D,o:D,d(d){d&&E(e),$e(u,d),a=!1,I(o)}}}function Bt(t,e,n){let i=[];const l={id:1,text:"",received_at:new Date().toJSON(),is_read:!0,incoming:!0,dialog:1};for(let a=0;a<10;a++){const o={...l};o.id=a+1,o.text="Text...",o.incoming=Math.random()<.5,i.push(o)}let c="";const s=a=>{if(a.which===13){console.log(c);const o={...l};o.id=2,o.text=c,o.incoming=!1,i.push(o),n(0,i),n(1,c="")}};function r(){c=this.value,n(1,c)}return[i,c,s,r]}class It extends X{constructor(e){super(),K(this,e,Bt,Pt,q,{})}}function Be(t,e,n){const i=t.slice();return i[9]=e[n],i}function Ie(t){let e,n,i=t[9].lead.username+"",l,c,s,r,a=t[9].lead.first_name+"",o,f,u,d,p,_=t[9].lead.last_name+"",h,y,g,v,k,L;return{c(){e=w("div"),n=w("div"),l=N(i),c=A(),s=w("div"),r=w("div"),o=N(a),f=A(),u=w("div"),d=A(),p=w("div"),h=N(_),y=A(),$(n,"class","nowrap textOverEllipsis"),C(u,"width","8px"),$(s,"class","flex nowrap textOverEllipsis userAttr svelte-1mnl9e4"),$(e,"class","flex flex_clm cursor_ptr item unselect svelte-1mnl9e4")},m(x,b){S(x,e,b),m(e,n),m(n,l),m(e,c),m(e,s),m(s,r),m(r,o),m(s,f),m(s,u),m(s,d),m(s,p),m(p,h),m(e,y),v=!0,k||(L=z(e,"click",function(){ee(t[1](t[9]))&&t[1](t[9]).apply(this,arguments)}),k=!0)},p(x,b){t=x,(!v||b&1)&&i!==(i=t[9].lead.username+"")&&H(l,i),(!v||b&1)&&a!==(a=t[9].lead.first_name+"")&&H(o,a),(!v||b&1)&&_!==(_=t[9].lead.last_name+"")&&H(h,_)},i(x){v||(x&&F(()=>{g||(g=R(e,Ee,{},!0)),g.run(1)}),v=!0)},o(x){x&&(g||(g=R(e,Ee,{},!1)),g.run(0)),v=!1},d(x){x&&E(e),x&&g&&g.end(),k=!1,L()}}}function zt(t){let e,n,i,l,c,s=t[0],r=[];for(let o=0;o<s.length;o+=1)r[o]=Ie(Be(t,s,o));const a=o=>T(r[o],1,1,()=>{r[o]=null});return l=new It({}),{c(){e=w("div"),n=w("div");for(let o=0;o<r.length;o+=1)r[o].c();i=A(),U(l.$$.fragment),$(n,"class","flex flex_clm list svelte-1mnl9e4"),$(e,"class","flex flex_grow_1 ")},m(o,f){S(o,e,f),m(e,n);for(let u=0;u<r.length;u+=1)r[u].m(n,null);m(e,i),G(l,e,null),c=!0},p(o,[f]){if(f&3){s=o[0];let u;for(u=0;u<s.length;u+=1){const d=Be(o,s,u);r[u]?(r[u].p(d,f),O(r[u],1)):(r[u]=Ie(d),r[u].c(),O(r[u],1),r[u].m(n,null))}for(W(),u=s.length;u<r.length;u+=1)a(u);J()}},i(o){if(!c){for(let f=0;f<s.length;f+=1)O(r[f]);O(l.$$.fragment,o),c=!0}},o(o){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)T(r[f]);T(l.$$.fragment,o),c=!1},d(o){o&&E(e),$e(r,o),Y(l)}}}function Ft(t,e,n){let i;pe(t,ie,o=>n(4,i=o));let l=[];const c={id:1,text:"",received_at:new Date().toJSON(),is_read:!0,incoming:!0,dialog:1};for(let o=0;o<10;o++){const f={...c};f.id=o+1,f.text="Text...",f.incoming=Math.random()<.5}const s=o=>f=>{};async function r(){!i||(n(0,l=await g_Api("GET","dialog/getDialogList",{username:i.username})),console.log(l))}r();async function a(){for(;;){const o=await g_Api("GET","dialog/getDialogList",{username:i.username});console.log(o),n(0,l=o),await Ue(1e3)}}return a(),[l,s]}class Rt extends X{constructor(e){super(),K(this,e,Ft,zt,q,{})}}function Gt(t){let e,n,i,l,c,s,r,a;return n=new Ht({}),c=new Rt({}),{c(){e=w("div"),U(n.$$.fragment),i=A(),l=w("div"),U(c.$$.fragment),$(e,"class","pos_abs content flex svelte-116f09r"),M(e,"contentHideL",t[1]!=="newLeads"),$(l,"class","pos_abs content flex svelte-116f09r"),M(l,"contentHideR",t[1]!=="myLeads")},m(o,f){S(o,e,f),G(n,e,null),S(o,i,f),S(o,l,f),G(c,l,null),s=!0,r||(a=[fe(me.call(null,e)),fe(me.call(null,l))],r=!0)},p(o,f){(!s||f&2)&&M(e,"contentHideL",o[1]!=="newLeads"),(!s||f&2)&&M(l,"contentHideR",o[1]!=="myLeads")},i(o){s||(O(n.$$.fragment,o),O(c.$$.fragment,o),s=!0)},o(o){T(n.$$.fragment,o),T(c.$$.fragment,o),s=!1},d(o){o&&E(e),Y(n),o&&E(i),o&&E(l),Y(c),r=!1,I(a)}}}function Yt(t){let e,n;return e=new St({}),{c(){U(e.$$.fragment)},m(i,l){G(e,i,l),n=!0},p:D,i(i){n||(O(e.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),n=!1},d(i){Y(e,i)}}}function qt(t){let e,n,i,l,c,s,r,a;function o(_){t[2](_)}let f={};t[1]!==void 0&&(f.select=t[1]),n=new kt({props:f}),_e.push(()=>gt(n,"select",o));const u=[Yt,Gt],d=[];function p(_,h){return _[0]?1:0}return s=p(t),r=d[s]=u[s](t),{c(){e=w("main"),U(n.$$.fragment),l=A(),c=w("div"),r.c(),$(c,"class","flex flex_grow_1 pos_rel overhide"),$(e,"class","flex flex_clm svelte-116f09r")},m(_,h){S(_,e,h),G(n,e,null),m(e,l),m(e,c),d[s].m(c,null),a=!0},p(_,[h]){const y={};!i&&h&2&&(i=!0,y.select=_[1],ft(()=>i=!1)),n.$set(y);let g=s;s=p(_),s===g?d[s].p(_,h):(W(),T(d[g],1,1,()=>{d[g]=null}),J(),r=d[s],r?r.p(_,h):(r=d[s]=u[s](_),r.c()),O(r,1),r.m(c,null))},i(_){a||(O(n.$$.fragment,_),O(r),a=!0)},o(_){T(n.$$.fragment,_),T(r),a=!1},d(_){_&&E(e),Y(n),d[s].d()}}}function Ut(){const t=()=>0,e={id:1};let n=0;const i={tg_id:123123124,username:"123124123",first_name:"test",last_name:"ewr",date_joined:"2022-10-27T13:48:51.054781Z",esub:"123123",pub_id:"2312",refcode:"123123",subpub:"23123"};let l=[];const c=f=>l.find(u=>u.tg_id===f),s=()=>{const f={...i};f.tg_id+=n,f.first_name+=" "+n,f.last_name+=" "+n,f.date_joined=new Date().toJSON(),f.username=[f.first_name,f.last_name].map(u=>u.trim()).filter(Boolean).join(" ").replace(/\s/g,"_"),n++,l.push(f)},r={};Array(10).fill().map(s),setInterval(()=>{s()},2400),setInterval(()=>{l[l.length*Math.random()|0].hasOperator=!0},3e3);const a={},o=async(f,u,d={})=>{var h,y;{if(f==="GET"&&u==="operators_")return await t(),{results:[{username:"stan18k",first_name:"Stanislav",last_name:"Kulakov"},{username:"dmodev",first_name:"Demon",last_name:"Dev"},{username:"idandrey",first_name:"Andrey",last_name:""},{username:"eveascigarettesnbeer",first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer ".repeat(1e3),first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer",first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer",first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer",first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer",first_name:"YEHA",last_name:""},{username:"eveascigarettesnbeer ".repeat(1e3),first_name:"YEHA ".repeat(1e3),last_name:"D sf  ".repeat(1e3)}]};if(f==="GET"&&u==="leads/unassigned")return await t(),{results:l.filter(g=>!g.hasOperator)};if(f==="POST"&&u==="lead/setOperator"){const{lead_id:g,username:v}=d;await t();const k=c(g);if(!k||k.hasOperator)return!1;k.hasOperator=!0,e.id++;const L={...e,lead_id:g,operator:v};return r[v]=(h=r[v])!=null?h:[],r[v].push(L),!0}if(f==="GET"&&u==="dialog/getDialogList"){const g=(y=r[d.username])!=null?y:[];return g.map(v=>v.lead=c(v.lead_id)),g}}const p="https://92.255.108.70/",_=new URL(p);return f==="GET"&&Object.entries(d).map(([g,v])=>_.searchParams.append(g,v)),_.pathname=u,await(await fetch(_,{method:f,headers:a})).json()};return o.setHeader=(f,u)=>a[f]=u,o}function Wt(t,e,n){let i;pe(t,ie,r=>n(0,i=r));let l="operators";function c(r){r&&n(1,l="newLeads")}globalThis.g_Api=Ut();function s(r){l=r,n(1,l)}return t.$$.update=()=>{t.$$.dirty&1&&c(i)},[i,l,s]}class Jt extends X{constructor(e){super(),K(this,e,Wt,qt,q,{})}}new Jt({target:document.getElementById("app")});
